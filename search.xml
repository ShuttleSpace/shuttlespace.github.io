<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[JGit]]></title>
    <url>%2F2019%2F03%2F16%2FJGit%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄJGit ÊòØ‰∏Ä‰∏™Âü∫‰∫é EDL(BSD ÂçèËÆÆÁöÑÂèòÁßç)ÊéàÊùÉÁöÑËΩªÈáèÁ∫ß„ÄÅÂÆûÁé∞ Git ÁâàÊú¨ÊéßÂà∂Á≥ªÁªüÂäüËÉΩ(Â∏∏ËßÑ‰ªìÂ∫ìËÆøÈóÆ,ÁΩëÁªúÂçèËÆÆ,ÁâàÊú¨ÊéßÂà∂Ê†∏ÂøÉÁÆóÊ≥ï)ÁöÑÁ∫Ø Java Â∫ì. ÂÖ•Èó®Ëé∑ÂèñÂú®‰ªìÂ∫ìÊêúÁ¥¢ÂºïÊìé‰∏≠ÊêúÁ¥¢ jgit Âç≥ÂèØËé∑ÂèñÂêÑÁßçÊ∑ªÂä†‰æùËµñÁöÑÊñπÂºè.ÊàëÁé∞Âú®Âü∫Êú¨‰ΩøÁî®ÁöÑÊòØ gradle ‰æùËµñ 12implementation("org.eclipse.jgit:org.eclipse.jgit:5.3.0.201903130848-r")implementation("org.eclipse.jgit:org.eclipse.jgit.http.server:5.3.0.201903130848-r") JGit ‰πüÂÖ∑Êúâ CLI(ÂäüËÉΩÊØî git CLI Â∞ë),ÂèØ‰ª•ËØï‰∏Ä‰∏ã JGit ÁöÑÂäüËÉΩ. ÊâãÂä®ÁºñËØë JGit CLIÂÅáËÆæÂ∑≤Áªè clone EGit ‰ªìÂ∫ì. git clone https://git.eclipse.org/r/jgit/jgit.git ÂÖ∑‰ΩìÊü•Áúã 12345678~/src/jgit$ mvn clean install# ËøõÂÖ• jgit ÂèØÊâßË°åÊñá‰ª∂ÊâÄÂú®Êñá‰ª∂Â§πorg.eclipse.jgit.pgm/target/jgit# Êü•Áúã version ÂëΩ‰ª§prompt$ ./jgit versionjgit version xxxxx# Â¶ÇÊûúÁªèÂ∏∏‰ΩøÁî® jgit ÂëΩ‰ª§,ÂèØ‰ª•Ê∑ªÂä†ÊâßË°åÈìæÊé•(ÈÄöÂ∏∏Âú® /usr/local/bin)sudo ln -s /path/to/jgit /usr/local/bin/jgit Âú® JGit CLI ËøêË°åÂëΩ‰ª§1234567891011121314151617181920prompt$ ./git# ‰ºöÂàóÂá∫ÊúÄÂ∏∏Áî®ÁöÑÂëΩ‰ª§jgit --git-dir GIT_DIR --help (-h) --show-stack-trace command [ARG ...]The most commonly used commands are: branch List, create, or delete branches clone Clone a repository into a new directory commit Record changes to the repository daemon Export repositories over git:// diff Show diffs fetch Update remote refs from another repository init Create an empty git repository log View commit history push Update remote repository from local refs rm Stop tracking a file tag Create a tag version Display the version of jgit # Â∏∏Áî®ÁöÑ debug test ÂëΩ‰ª§ prompt$ ./jgit debug-show-commands Êü•Áúã‰ªìÂ∫ìÂú®Êü•ÁúãÊúÄÂ∏∏Áî®ÁöÑÂëΩ‰ª§‰πãÂâçÔºå‰Ω†ÂèØËÉΩÊÉ≥Áü•ÈÅìËØ•‰ªìÂ∫ìÂåÖÂê´‰∫ÜÂ§öÂ∞ëÂàÜÊîØÔºåÂΩìÂâçÂàÜÊîØÊòØÈÇ£‰∏™.‰ΩøÁî® branch -v ÂèØ‰ª•Ëé∑ÂèñÊâÄÊúâÂàÜÊîØÁöÑÁÆÄÁï•‰ø°ÊÅØÔºåÁâàÊú¨Âè∑ÔºåÁâàÊú¨Âè∑Êèê‰∫§‰ø°ÊÅØÁöÑÁ¨¨‰∏ÄË°å. 12345678910111213prompt$ ./jgit branch -v# master 4d4adfb Git Project import: don't hide but gray out existing projects# * traceHistory 6b9fe04 [historyView] Add trace instrumentation# Âíå git-log ‰∏ÄÊ†∑ log ÂëΩ‰ª§ÊòæÁ§∫Êèê‰∫§‰ø°ÊÅØjgit log --author Math --grep tycho master# ÊòæÁ§∫ master ÂàÜÈíü‰∏≠Ôºå‰ΩúËÄÖÂêçÂåÖÂê´ Math,Êèê‰∫§‰ø°ÊÅØÂåÖÂê´ tycho ÁöÑÊêúÊúâÊèê‰∫§‰ø°ÊÅØ.# commit xxxx# Author: Math xxxx# Date: xxx# Update build to use tycho x.xx.x# ...# Â§ßÂ§öÊï∞ÁöÑÊêúÁ¥¢ÈÉΩ‰ºöÁ≤æÁ°ÆËøáÊª§Êèê‰∫§Êó•ÂøóÔºåÂ¶ÇÊèê‰∫§ËÄÖÂßìÂêçÁ≠â ÂéÜÂè≤ÂõæÂΩ¢Âåñjgit glog Ê†∏ÂøÉÊ¶ÇÂøµAPI‰ªìÂ∫ìRepository ÁÆ°ÁêÜÊâÄÊúâÁöÑÈ°πÁõÆÂíåÂºïÁî®ÔºåÁÆ°ÁêÜ‰ª£Á†Å 12345val repository = FileRepositoryBuilder() .setGitDir(File("/my/git/directory")) .readEnvironment() // Êâ´Êèè GIT_* ÁéØÂ¢ÉÂèòÈáè .findGitDir() // Êâ´ÊèèÊñá‰ª∂Á≥ªÁªü .build() Git ÂØπË±°Âú® Git object model ÊâÄÊúâÁöÑÂØπË±°ÈÉΩÊòØÁî± SHA-1 id Ë°®Á§∫.Âú® JGit ‰∏≠ÊòØÁî± AnyObjectId Âíå ObjectIdÁ±ªË°®Á§∫.Âú® Git object model ‰∏≠ÂÆö‰πâ‰∫ÜÂõõÁßçÂØπË±°Á±ªÂûã: blob: Áî®‰∫éÂ≠òÂÇ®Êñá‰ª∂ÂØπË±° tree: ÂèØ‰ª•Áúã‰Ωú‰∏Ä‰∏™Êñá‰ª∂Â§πÔºåÊåáÂêëÂÖ∂‰ªñÁöÑ tree Êàñ blob commit: ÊåáÂêë‰∏Ä‰∏™ tree ÁöÑÊèê‰∫§‰ø°ÊÅØ tag: Á™ÅÂá∫Êèê‰∫§‰ø°ÊÅØ,ÈÄöÂ∏∏Áî®Êù•Ê†áËÆ∞ÁâπÊÆäÁöÑ release ÁâàÊú¨. ‰∏∫‰∫Ü‰ªé‰∏Ä‰∏™‰ªìÂ∫ì‰∏≠ËØÜÂà´‰∏Ä‰∏™ÂØπË±°ÔºåÂè™Ë¶Å‰º†ÂÖ•‰∏Ä‰∏™Ê≠£Á°ÆÁöÑ revision Â≠óÁ¨¶‰∏≤Âç≥ÂèØ 1val head = repository.resolve("HEAD") Refref ÊòØ‰∏Ä‰∏™ÂåÖÂê´Âçï‰∏™ÂØπË±°Ê†áËØÜÁ¨¶ÁöÑÂèòÈáè.ÂØπË±°Ê†áËØÜÁ¨¶ÂèØ‰ª•ÊòØ‰ªª‰Ωï Git ÂêàÊ≥ïÂØπË±°(blob,tree,commit,tag)‰æãÂ¶Ç,Ëé∑Âèñ head ÁöÑÂºïÁî®. 1val HEAD = repository.findRef("refs/heads/master") RevWalkRevWalk ÈÅçÂéÜ commit graphÔºåÂπ∂ÊåâÈ°∫Â∫èÁîüÊàêÂåπÈÖçÁöÑ commit 1val revWalk = RevWalk(repository) RevCommitRevCommit Ë°®Á§∫ Git object model ‰∏≠ÁöÑ‰∏Ä‰∏™ commit 1val commit = walk.parseCommit(objectIdOfCommit); RevTagRevCommit Ë°®Á§∫ Git object model ‰∏≠ÁöÑ‰∏Ä‰∏™ Tag 1val tag = walk.parseCommit(objectIdOfTag); RevTreeRevCommit Ë°®Á§∫ Git object model ‰∏≠ÁöÑ‰∏Ä‰∏™ tree 1val tree = walk.parseCommit(objectIdOfTree); ÂèÇËÄÉËôΩÁÑ∂ JGit ÂåÖÂê´‰∫ÜËÆ∏Â§öÂíå Git ‰ªìÂ∫ì‰∫§‰∫íÁöÑ‰ΩéÁ∫ß‰ª£Á†ÅÔºåÂêåÊó∂ËøòÊúâ‰∏Ä‰∫õÂèÇËÄÉorg.eclipse.jgit.apitÂåÖ‰∏≠ Git porcelain ÂëΩ‰ª§ÁöÑÈ´òÁ∫ß API. Ê∑ªÂä†ÂëΩ‰ª§(git-add)add ÂëΩ‰ª§ÂèØ‰ª•ÂêëÁ¥¢Âºï‰∏≠Ê∑ªÂä†Êñá‰ª∂ÔºåÂêåÊó∂ÂèØ‰ª•ÈÄöËøá setter ÊñπÊ≥ïÈÖçÁΩÆ addFilepattern() 1234val git = Git(repository)git.add() .addFilepattern("/dir") .call() Êèê‰∫§ÂëΩ‰ª§(git-commit) setAuthor() setCommitter() setAll() 1234git.commit() .setAuthor("author","email") .setMessage("message") .call() tag ÂëΩ‰ª§(git-tag) setName() setMessage() setTagger() setObjectId() setForceUpdate() setSigned(): ÊöÇ‰∏çÊîØÊåÅÔºå‰ºöÊäõÂºÇÂ∏∏ 123git.tag() .setName("tag") .call() log ÂëΩ‰ª§(git-log) add(AnyObjectId start) addRange(AnyObjectId since,AnyObjectId until) 123git.log() .add(head) .call() merge ÂëΩ‰ª§(git-merge)TODO Ant ‰ªªÂä°]]></content>
  </entry>
  <entry>
    <title><![CDATA[teamcityËá™Âä®ÂåñÊõ¥Êñ∞hexoÂçöÂÆ¢]]></title>
    <url>%2F2019%2F03%2F09%2Fteamcity%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9B%B4%E6%96%B0hexo%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÂú®Áü•‰πéÊâæÂà∞‰∫Ü‰∏Ä‰∏™Êõ¥Â•ΩÁöÑÊñπÊ≥ï: ÂéüÊñáÂú®ËøôÈáåÊàëÊï¥ÁêÜ‰∏Ä‰∏ã: ÂàõÂª∫‰ªìÂ∫ì xxx.github.io. ÂàõÂª∫‰∏§‰∏™ÂàÜÊîØ: master/hexo.(ÂèØÂú® github ÁΩëÈ°µÊàñÊú¨Âú∞ÂàõÂª∫) git clone git@github.com:xxx/xxx.github.io.git Â¶ÇÊûúÊ≤°ÊúâÂú®ÁΩëÈ°µÂàõÂª∫ÂàÜÊîØ,ÂèØ‰ª•Âú®Ê≠§Â§ÑÂàõÂª∫.git checkout -b master; git checkout -b hexo Êé•‰∏ãÊù•ÊâßË°å npm install hexo; hexo init; npm i; npm i hexo-deployer-git,Ê≠§Â§ÑÂú® hexo ÂàÜÊîØÊìç‰Ωú ‰øÆÊîπ _config.yml ÁöÑ deploy ÂèÇÊï∞,Ê≠§Â§ÑÂú® master ÂàÜÊîØÊìç‰Ωú. Êàë‰ΩøÁî®‰∫Ühexo-next-theme,‰ªé git ‰∏ä‰∏ãËΩΩÂêé,ËøõÂÖ• themes/next ÊâßË°å git submodule init,Â∞Ü next ‰∏ªÈ¢òÂÖ≥ËÅî,Ê≠§Â§ÑÂú® hexo ÂàÜÊîØÊìç‰Ωú git add .; git commit -m &quot;blahblahblah&quot;; git push origin hexo; Êèê‰∫§ÁΩëÁ´ôÁõ∏ÂÖ≥Êñá‰ª∂. hexo g -d ÁîüÊàêÁΩëÁ´ôÂπ∂ÈÉ®ÁΩ≤Âà∞ github. Â∞Ü CNAME,ÂõæÁâáÁ≠âÊñá‰ª∂ÊîæÂÖ• source ÁõÆÂΩï‰∏ã,ÂèØ‰øùËØÅÊé®ÈÄÅÂà∞ github ‰∏ç‰ºöË¢´Âà†Èô§.‚ö†Ô∏è üëá ËÉ°ÊâØ,ËßÇÁúãËØ∑Ë∞®ÊÖé!!!TeamCity ÊòØ Jetbrains ÂÖ¨Âè∏Âá∫ÂìÅÁöÑÊåÅÁª≠ÂåñÈõÜÊàêÂ∑•ÂÖ∑ÔºåÁ±ª‰ººJenkins,ÁïåÈù¢Êõ¥Âä†Áé∞‰ª£ÂåñÔºåÂäüËÉΩÊõ¥Âº∫Â§ß,ËÄå‰∏îÂÆÉÁöÑ server Âíå agent ÊòØÂàÜÁ¶ªÁöÑÔºåÂèØ‰ª•ÊåáÂÆöÊú¨Êú∫ÊàñËøúÁ®ãÁöÑÊú∫Âô®Êù•ËøêË°åÊûÑÂª∫Á≠ñÁï•ÔºåÂÖ∂‰∏≠ËøòÊúâË∞ÉÂ∫¶ÈòüÂàóÁÆóÊ≥ï.hexo ÊòØÈùôÊÄÅÂçöÂÆ¢ÁîüÊàêÂ∑•ÂÖ∑.hexo d -gÂëΩ‰ª§ÂèØ‰ª•Ëá™Âä®ÁîüÊàê public Êñá‰ª∂Â§πÂèä HTMLÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂Êé®ÈÄÅÂà∞ github(Âú®_config.yml‰∏≠Â∑≤ÁªèÈÖçÁΩÆËøá).‰∏ÄËà¨Áî®Êà∑ÂèØËÉΩÂØπthemeËá™ÂÆö‰πâ(‰øÆÊîπtheme‰∏ãÁöÑ_config.yml),ÂΩìÊç¢Êú∫ÊàñÂ§á‰ªΩÊó∂ÔºåÂ∏åÊúõÂ∞ÜÂçöÂÆ¢Ê∫êÊñá‰ª∂(*.md)Âèä‰øÆÊîπÁöÑ‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂‰∏ÄÂπ∂Â§á‰ªΩ.ËÄåhexoÈªòËÆ§Âè™Â§á‰ªΩpublicÊñá‰ª∂Â§π,ÊâÄ‰ª•Êú¨ÊñáÊé¢Á¥¢‰ΩøÁî® CITeamCityÂ∞ÜÊé®ÈÄÅÂà∞GithubÁöÑÊ∫êÊñá‰ª∂ÁºñËØëÁîüÊàêpublicÊñá‰ª∂,ËøôÊ†∑ÊØèÊ¨°ÂÜôÂÆåÊñáÁ´†,Âè™Ë¶ÅÂ∞ÜÂÖ∂Êé®ÈÄÅÂà∞Github,TeamCity‰ºöËá™Âä®ÁîüÊàêÂçöÂÆ¢HTML. Ëé∑ÂèñÂà∞ËØ• Key.ËÄåÂÆûÈôÖ‰∏äÂú® build ÊâßË°åÊó∂ key ‰ª• ing Ë¢´Âà†Èô§‰∫Ü,‰∏çÂèØËÉΩËé∑ÂèñÂà∞.ËøôÂπ∂‰∏çÊÑèÂë≥ÁùÄÁªùÂØπÂÆâÂÖ®ÔºåÂè™ÊòØÂ¢ûÂä†‰∫Ü key Ë¢´ÁõóÁöÑÈöæÂ∫¶. agent ÂøÖÈ°ªÂÆâÂÖ®. teamcity ÂÆâË£ÖTeamCityÊèê‰æõ‰∫Ü DockerÂÆâË£ÖÊñπÂºèÔºåÂõ†Ê≠§ËØ∑ÊèêÂâçÂÆâË£ÖÂ•ΩDocker.Êñá‰ª∂ÁõÆÂΩïÂ¶Ç‰∏ã(ËØ∑ÊèêÂâçÂàõÂª∫),teamcity ÊîØÊåÅÂ§öÁßçÊï∞ÊçÆÂ≠òÂÇ®ÊñπÂºèÔºåÊ≠§Â§Ñ‰ΩøÁî® mysql Êù•Â≠òÂÇ®„ÄÇ 123456789101112# - teamcity - agent - conf - data - server - data - datadir - opt - mysql - backup - data dockery-compose.yml Êé•‰∏ãÊù•ÊòØdocker-compose.yml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162``yamlversion: "3.3"services: teamcity-server: image: jetbrains/teamcity-server container_name: teamcity-server restart: always ports: - 8111:8111 volumes: - $PWD/server/datadir:/data/teamcity_server/datadir - $PWD/server/opt/logs:/opt/teamcity/logs - $PWD/server/data:/data/teamcity_server/others # ÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õËµÑÊ∫êÔºåÂèØ‰ª•‰ªéÊú¨Êú∫Â§çÂà∂Âà∞ server ‰∏ä environment: # TEAMCITY_SERVER_MEM_OPTS: -Xmx2g -XX:MaxPermSize=270m -XX:ReservedCodeCacheSize=350m MYSQL_USER: team-user MYSQL_PASSWORD: team-pwd MYSQL_ROOT_PASSWORD: teamcity8080 MYSQL_DATABASE: teamcitydb depends_on: - db links: - db networks: - team db: image: mysql container_name: teamcity-db restart: always volumes: - $PWD/mysql:/etc/mysql/conf.d - $PWD/mysql/backup:/var/lib/mysql # Âè™Êúâ /var/lib/mysql ÂØπÂ∫îÊú¨Âú∞Êñá‰ª∂‰∏∫Á©∫ÔºåÊâç‰ºöÂàõÂª∫Ëøô‰∏™Êï∞ÊçÆÂ∫ì,Âç≥ÂàùÊ¨°ÂàõÂª∫Êó∂ÔºåËøô‰∏™ÂØπÂ∫îÁöÑÊú¨Âú∞Êñá‰ª∂Â§πË¶Å‰∏∫Á©∫ - $PWD/mysql/data:/others environment: MYSQL_USER: team-user MYSQL_PASSWORD: team-pwd MYSQL_ROOT_PASSWORD: teamcity8080 MYSQL_DATABASE: teamcitydb ports: - 3306:3306 networks: - team # &lt;&gt;&lt;&gt; agent &lt;&gt;&lt;&gt; teamcity-agent: image: jetbrains/teamcity-agent container_name: teamcity-agent restart: always volumes: - $PWD/agent/conf:/data/teamcity_agent/conf - $PWD/agent/data:/data/teamcity_agent/others environment: AGENT_NAME: MacbookPro SERVER_URL: http://xxx.xxx.x.xxx:8111 # Ê≠§Â§ÑÂØπÂ∫îÁöÑÊòØ TeamCityServer ÁöÑIP, localhost/127.0.0.1 ÈÉΩ‰∏çË°åÔºåËØ∑‰ΩøÁî®Ê≠£Á°ÆÁöÑ IP,Á´ØÂè£ÂØπÂ∫î‰∏äÈù¢Êö¥Èú≤Âá∫Êù•ÁöÑÁ´ØÂè£ links: - teamcity-server # teamcity_agent ÈªòËÆ§ÁöÑ‰ªªÂä°ÁéØÂ¢ÉË∑ØÂæÑ: opt/buildagent/worknetworks: team: driver: bridge ÁÑ∂ÂêéÊâßË°å docker-compose up -d Âç≥ÂèØ„ÄÇ ÈúÄË¶ÅÂÖàÊ†πÊçÆÊú¨Êú∫ OS ÂÆâË£Ödocker-compose &gt; docker-compose up -d ÁîüÊàêÊúçÂä°docker-compose down Ëß£‰ΩìÊúçÂä°ÔºåÂà†Èô§ÂÆπÂô®,ÁΩëÁªúdocker-compose start/stop ÂêØÂä®ÁªàÊ≠¢ÊúçÂä° ÊâìÂºÄ http://localhost:8111 Êàñ http://[ip]:8111 Âç≥ÂèØËøõÂÖ• TeamCity Server web ‰∫§‰∫íÁéØÂ¢É.ÊåâÁÖßÊèêÁ§∫ÂàùÂßãÂåñ.ÁôªÂΩïÊó∂ÈªòËÆ§Ê≤°ÊúâËÆøÂÆ¢ÂàõÂª∫Êñ∞Áî®Êà∑ÁöÑÊùÉÈôêÔºåÊâÄ‰ª•ÈúÄË¶ÅÂ∑≤Ë∂ÖÁ∫ßÁî®Êà∑ÊùÉÈôêÁôªÂΩïÔºåÁÇπÂáª‰∏ãÈù¢ÁöÑ‰ª•Ë∂ÖÁ∫ßÊùÉÈôêÁôªÂΩïÂêéÊèêÁ§∫ËæìÂÖ• token,ÂèØ‰ª•ËøõÂÖ• TeamCity Server Êú¨Âú∞Êò†Â∞ÑÊñá‰ª∂‰∏≠Êü•ÊâæÔºåÊàñÊòØ‰ΩøÁî® docker logs teamcity-server Âç≥ÂèØÁúãÂà∞ token„ÄÇ ÂàõÂª∫È°πÁõÆÊó∂ÔºåTeamCity ÈªòËÆ§‰ΩøÁî®Áî®Êà∑ÂêçÂØÜÁ†ÅËøûÊé• Github,ÂΩìÁÑ∂ÂèØ‰ª•ÈÄöËøá‰∏ä‰º†Êú¨Âú∞ ssh key ÂØÜÈí•Âà∞ TeamCity Server,ÈÄöËøá TeamCity Server ËøûÊé•. ËÆæÁΩÆÁºñËØëÊ≠•È™§,ÊàëÂÜçÊ¨°ÊâßË°å‰∫Üshell ËÑöÊú¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#! /bin/bash# ÂÆâË£Ö nodejsVERSION=v10.15.2DISTRO=linux-x64function checkNode() &#123; ISNODESUCCEED=$(node -v) if [ ISNODESUCCEED != $VERSION ]; then installNode else echo "NodeJSÂ∑≤ÂÆâË£Ö" fi&#125;function insallNode() &#123; mkdir -p /usr/local/lib/nodejs tar -xJf /data/teamcity_agent/others/node-$VERSION-$DISTRO # -v ‰ºöËæìÂá∫Ëß£ÂéãÊó•ÂøóÔºåÊ≠§Â§ÑÂ§™Â§öÔºåÊâÄ‰ª•ÂÖ≥Èó≠ export PATH=/usr/local/lib/nodejs/node-$VERSION-$DISTRO/bin:$PATH source ~/.profile checkNode&#125;checkNode# ÂÆâË£Ö‰æùËµñnpm i# ÁîüÊàêpublicÊñá‰ª∂./node_modules/hexo/bin/hexo g# ‰∏∫ github.io ÈÖçÁΩÆ CNAMEif [ ! -f "/CNAME" ]; then echo "blog.dang8080.cn" &gt; CNAMEfi# ÈÖçÁΩÆ gitgit config --global credential.helper store # ‰øùÂ≠ò github Êèê‰∫§ËÄÖ‰ø°ÊÅØÔºå‰∏ãÊ¨°‰∏çÁî®ÂÜçËæìÂØÜÁ†Ågit config --global user.name "Humphrey"git config --global user.email "dang8080@qq.com"git add --allgit commit -m "TeamCity CI Êèê‰∫§ÈÉ®ÁΩ≤: $(date)"git push origin master ÈóÆÈ¢ò: ÊâÄ‰ª•ÈóÆÈ¢òÊù•‰∫Ü,ÈÖçÁΩÆÂÆå‰∫ÜÁÇπÂáª run Êü•Áúã Build log ‰ºöÂèëÁé∞ push Â§±Ë¥•„ÄÇÂõ†‰∏∫ÈÄöËøá https Âêë github Êèê‰∫§‰ª£Á†ÅÈúÄË¶Å‰∫§‰∫íÂºèËæìÂÖ•Áî®Êà∑ÂØÜÁ†Å„ÄÇËÄåÊ≠§Â§ÑÊ≤°ÊúâÊèê‰æõÔºåÂ∞ÜÂØÜÁ†ÅÁ°¨ÁºñÁ†ÅÂà∞Ê≠§ shell ÈáåÊèê‰∫§Âà∞ github ‰πü‰∏çÂÆâÂÖ®„ÄÇÊàñËÄÖÂç≥‰ΩøÊòØÈÄöËøá‰øÆÊîπ VCS root ‰ΩøÁî® git@github.com ssh checkout ÁöÑ‰ª£Á†ÅÔºå‰πüÊó†Ê≥ïÊé®ÈÄÅÂà∞ github. ÈóÆÈ¢òÂÆö‰Ωç: TeamCity SSH agent ‰ΩøÁî®Êú¨Êú∫(Linux/MacOS)ÁöÑ OpenSSH ÁÆ°ÁêÜ SSH,ÂØπ‰∫é Windows,ÈúÄË¶ÅÊâãÂä®ÂÆâË£Ö OpenSSH (CygWin,MinGW,Git for Windows).SSH agent ÂøÖÈ°ªÊ∑ªÂä†Âà∞ $PATH ‰∏≠.Á¨¨‰∏ÄÊ¨°ËøûÊé•Âà∞ËøúÁ®ãÂú∞ÂùÄÊó∂ÔºåSSH agent ‰ºöËØ¢ÈóÆÊòØÂê¶‰øùÂ≠òËøúÁ®ãÂú∞ÂùÄÁöÑ fingerprint Âà∞Âú∞ÂùÄÊï∞ÊçÆÂ∫ì ~/.ssh/known_hosts‰∏≠.‰∏∫‰∫ÜÈÅøÂÖçËØ¢ÈóÆÔºåÂèØ‰ª•ÊèêÂâçÈÖçÁΩÆ„ÄÇÂ¶ÇÊûúÁõ∏‰ø°ËØ•ËøúÁ®ãÂú∞ÂùÄÔºåÂèØ‰ª•Á¶ÅÁî®ËøúÁ®ãÂú∞ÂùÄÊ£ÄÊü• ÂØπÊâÄÊúâÁöÑËøûÊé•ÈÉΩÁ¶ÅÁî®Ôºå~/.ssh/config 123Host \*StrictHostKeyChecking no ÁâπÂÆöËøûÊé•,-o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no TeamCity ÂΩìÂâç‰ªÖÊîØÊåÅ PEM Ê†ºÂºèÁöÑ key.Â¶ÇÊûú‰ΩøÁî®‰∫ÜÂÖ∂‰ªñÊ†ºÂºèÁöÑ keyÔºåËØ∑Â∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫ PEM.ÂèØ‰ª•Âú® TeamCity web ÁïåÈù¢ Conversions -&gt; Export OpenSSH key ‰∏≠ËΩ¨Êç¢. OpenSSH ÊúÄËøëÁâàÊú¨ÈªòËÆ§‰∏çÁîüÊàê PEM Ê†ºÂºè key.‰ΩøÁî®‰∏ãÂàóÊñπÂºèÁîüÊàê PEM: ssh-keygen -t rsa -m PEM ‰∏ä‰º†Âà∞ TeamCity Server ÁöÑ SSH key ÈªòËÆ§‰øùÂ≠òÂú® &lt;TeamCity Data Directory&gt;/config/projects/&lt;project&gt;/pluginData/ssh_keysÔºåTeamCity ‰ºöËøΩË∏™Ê≠§Êñá‰ª∂Â§π‰øùËØÅ SSH key Êõ¥Êñ∞„ÄÇSSH key ÈÄÇÁî®‰∫éÊú¨È°πÁõÆÂèäÂ≠êÈ°πÁõÆ. Âú® TeamCity agent checkout ÊâßË°åÊó∂ÔºåGit Êèí‰ª∂‰ºö‰ªé TeamCity Server ‰∏ãËΩΩ SSH key Âà∞ agent.ËØ• key ‰ºöÊöÇÊó∂‰øùÂ≠òÂú® TeamCity agent ÁöÑÊñá‰ª∂Á≥ªÁªüÈáåÔºåÂú® fetch/clone ÁªìÊùüÂêéÂ∞±Ë¢´Âà†Èô§. key Ë¢´Âà†Èô§ÁöÑÂéüÂõ†ÊòØÔºöÈÄöËøá build ÊâßË°åÁöÑ test ÂèØËÉΩ‰ºöÁïô‰∏ãÊÅ∂ÊÑè‰ª£Á†ÅÔºå‰πãÂêé‰ºöËÆøÈóÆ TeamCity agent Êñá‰ª∂Á≥ªÁªü, TeamCity ÊòØ‰∏çÊîØÊåÅ git ssh Êé®Âä®‰ª£Á†ÅÂà∞ github ÁöÑ.ÔºàÊîØÊåÅ ssh ‰º†ÈÄÅÊñá‰ª∂Ôºâ ÊñπÊ°à‰∏Ä:ÂΩì run ‰∏ÄÊ¨°‰πãÂêéÔºåÊâßË°å docker exec -it teamcity-agent bash ËøõÂÖ• opt/buildagent/work/xxxxx/ ‰∏ã,ÊâãÂä® git push origin master„ÄÇËøôÊ†∑ÂêéÁª≠Â∞±‰∏çÁî®ÂÜçÈÖçÁΩÆ‰∫Ü ÊñπÊ°à‰∫å:(Á°¨Ê†∏)github ÈúÄË¶Å‰øùÂ≠òÊú¨Êú∫ÁöÑ SSH pub key,ÊâçÊé•Âèó git ssh Êé®ÈÄÅ.ÈÇ£Êàë‰ª¨Â∞±Âú® TeamCity ÁîüÊàê ssh key,ÁÑ∂ÂêéÊ∑ªÂä†Âà∞ github. ÂÆûË∑µ‰∏Ä1234docekr exec -it teamcity-agent bashssh-keygen -t rsassh-add [id_rsa]# ÁÑ∂ÂêéÂ§çÂà∂ id_rsa.pub ÁöÑÂÜÖÂÆπÂà∞ github Âç≥ÂèØ ÂÆûË∑µ‰∫åËøû TeamCity agent bash ‰πü‰∏çÊÉ≥ËøõÔºå‰ΩøÁî® shell ÊûÑÂª∫ÂÖàÂÆâË£Ö expect tcl tk 123456789101112131415161718192021222324apt-get update &amp;&amp; apt-get install tcl tk expect# ‰∏ãÈù¢ÊòØ shell#! /usr/bin/expect -fset context $PWD# Âà†Èô§Êóßkeyspawn rm -f "$context/id_rsa" "$context/id_rsa.pub"expect&#123;&#125;# ÁîüÊàêÊñ∞keyspawn ssh-keygen -t rsaexpect&#123; "*save the key*" &#123; send "$context/id_rsa\r";exp_continue &#125; "*passphrase*" &#123; send "\r";exp_continue &#125; "*again*" &#123; send "\r" &#125;&#125;spawn ssh-add "$context/id_rsa"sshcheck=$(ssh -vT git@github.com)if [[ $sshcheck =~ "successfully authenticated" ]]; then echo "ssh ÈÖçÁΩÆÊàêÂäü"else echo "ssh ÈÖçÁΩÆÂ§±Ë¥•"fi# Â§çÂà∂ pubpubkey=$(cat "$context/id_rsa)curl -H "Content-Type:application/json" -X POST --data '&#123; "title":"TeamCityAgentAuto","key":"$pubkey"&#125;']]></content>
      <tags>
        <tag>teamcity</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Room & kotlin coroutine]]></title>
    <url>%2F2019%2F03%2F03%2FRoom-kotlin-coroutine%2F</url>
    <content type="text"><![CDATA[OverviewRoom 2.1 ÂºÄÂßãÊîØÊåÅ Kotlin ÂçèÁ®ã„ÄÇDAO ÊñπÊ≥ïÂèØ‰ª•‰ΩøÁî® suspend Ê†áËÆ∞‰ª•Á°Æ‰øùËøô‰∫õÊñπÊ≥ï‰∏ç‰ºöÂú®‰∏ªÁ∫øÁ®ã‰∏≠Ë¢´ÊâßË°å„ÄÇRoom ‰ΩøÁî® Executor(Êù•Ëá™Ê°ÜÊû∂ÁªÑ‰ª∂) ‰Ωú‰∏∫ Dispatcher ËøêË°å SQL ËØ≠Âè•ÔºåÂΩìÁÑ∂Âú®ÁºñËØë RoomDatabase Êó∂Ôºå‰Ω†‰πüÂèØ‰ª•Êèê‰æõËá™Â∑±ÁöÑ Executor. ÂΩìÂâçÂçèÁ®ãÊîØÊåÅÊ≠£Âú®ÂºÄÂèë‰∏≠ÔºåÊõ¥Â§öÁâπÊÄßÊ≠£Âú®ËÆ°Âàí‰∏≠ Ê∑ªÂä†‰æùËµñËØ∑ÂçáÁ∫ß Room Âà∞ v2.1, ÂêåÊó∂ Kotlin v1.3.0+ , Coroutines v1.0.0+ 1implementation "androidx.room:room-coroutines:$&#123;versions.room&#125;" Áé∞Âú®Â∞±ÂèØ‰ª•‰ΩøÁî®Âï¶ 123456789101112131415161718@Daointerface UsersDao &#123; @Query("SELECT * FROM users") suspend fun getUsers(): List&lt;User&gt; @Query("UPDATE users SET age = age + 1 WHERE userId = :userId) suspend fun incrementUserAge(userId: String) @Insert suspend fun insertUser(user: User) @Update suspend fun updateUser(user: User) @Delete suspend fun deleteUser(user: User)&#125; Âú®Ë∞ÉÁî®ÂÖ∂‰ªñ suspending DAO ÂáΩÊï∞Êó∂Ôºå@Transaction ‰πüÂèØ‰ª•Ë¢´ suspending 123456789101112131415@Daoabstract class UsersDao &#123; @Transaction open suspend fun setLoggedInUser(loggedInUser: user) &#123; deleteUser(loggedInUser) insertUser(loggedInUser) &#125; @Query("DELETE FROM users") abstract fun deleteUser(user: User) @Insert abstract suspend fun insertUser(user: User)&#125; Ê†πÊçÆÊòØÂê¶Âú® transaction ÂÜÖË∞ÉÁî®ÔºåRoom ÂØπ suspending ÂáΩÊï∞Â§ÑÁêÜÈÄªËæë‰∏çÂêå. Âú® Transaction ‰∏≠ Âú®Êï∞ÊçÆÂ∫ìËØ≠Âè•Ë¢´Ëß¶ÂèëÁöÑ CoroutineContext ‰∏ãÔºåRoom ‰∏çÂÅö‰ªª‰ΩïÂ§ÑÁêÜ„ÄÇÂáΩÊï∞Ë∞ÉÁî®ËÄÖÂ∫îËØ•Á°Æ‰øùÊ≠§ÊñπÊ≥ï‰∏ç‰ºöÂú® UI Á∫øÁ®ã‰∏≠ÊâßË°å.Âõ†‰∏∫ suspend ÂáΩÊï∞Âè™ËÉΩË¢´ÂÖ∂‰ªñ suspend ÂáΩÊï∞ ÊàñÂú® coroutine ÂÜÖË∞ÉÁî®ÔºåÊâÄ‰ª•‰Ω†‰∏çËÉΩÊää Dispatchers.Main ËµãÂÄºÁªô DispatcherÔºåÂ∫îËØ•ÊòØ Dispatchers.IO ÊàñËá™ÂÆö‰πâ ‰∏çÂú® Transaction ‰∏≠ Room ‰ºöÁ°Æ‰øùÊï∞ÊçÆÂ∫ìËØ≠Âè•Âú® Architecutre Components I/O Dispatcher ‰∏≠Ëß¶Âèë„ÄÇËØ• Dispatcher Âú®Âêå‰∏Ä‰∏™ I/O Executor ÁöÑ‰∏Ä‰∏™ÂêéÂè∞Á∫øÁ®ã‰∏≠ËøêË°å LiveData Â∫ïÂ±Ç12345@Insertfun insertUserSync(user: User)@Insertsuspend fun insertUser(user: User) ÂØπ‰∫éÂêåÊ≠• insert,ÁîüÊàêÁöÑ‰ª£Á†ÅÂºÄÂßãÂêØÂä®‰∏Ä‰∏™ transaction,ÁÑ∂ÂêéÊâßË°å insert,Ê†áËÆ∞ transaction successfull ÔºåÁªàÁªì„ÄÇÂêåÊ≠•ÊñπÊ≥ïÂú®Ë¢´Ë∞ÉÁî®Â§ÑÁöÑÁ∫øÁ®ãÊâßË°å. 12345678910@Overridepublic void insertUserSync(final User user) &#123; __db.beginTransaction(); try &#123; __insertionAdapterOfUser.insert(user); __db.setTransactionSuccessful(); &#125; finally &#123; __db.endTransaction(); &#125;&#125; suspending ‰ºöÁ°Æ‰øù‰∏ç‰ºöÂú® UI Á∫øÁ®ã‰∏≠ÊâßË°å„ÄÇÁîüÊàêÁöÑ‰ª£Á†Å‰ºö‰º†ÈÄí‰∏Ä‰∏™ Continuation.Âú® Callable#call() ‰∏≠ÊâßË°åÂíåÂêåÊ≠•Áõ∏ÂêåÁöÑ‰ª£Á†Å 1234567891011121314151617@Overridepublic Object insertUserSuspend(final User user, final Continuation&lt;? super Unit&gt; p1) &#123; return CoroutinesRoom.execute(__db, new Callable&lt;Unit&gt;() &#123; @Override public Unit call() throws Exception &#123; __db.beginTransaction(); try &#123; __insertionAdapterOfUser.insert(user); __db.setTransactionSuccessful(); return kotlin.Unit.INSTANCE; &#125; finally &#123; __db.endTransaction(); &#125; &#125; &#125;, p1);&#125; CoroutinesRoom.execute ‰ºöÊ†πÊçÆÊï∞ÊçÆÂ∫ìÊòØÂê¶ open,ÂΩìÂâçË∞ÉÁî®ÊòØÂê¶Âú® transaction ÂÜÖÊù•ÂàáÊç¢Â§ÑÁêÜ context. is open &amp; in transaction ‰ªÖË∞ÉÁî® insert ÈÄªËæë not in transaction ‰ΩøÁî® Architecture Components IO Executor Âú®ÂêéÂè∞Á∫øÁ®ãÊâßË°å insert ÈÄªËæë]]></content>
      <tags>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
        <tag>Room</tag>
        <tag>Kotlin</tag>
        <tag>Kotlin ÂçèÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[docker,docker-composeÂ≠¶‰π†Á¨îËÆ∞]]></title>
    <url>%2F2019%2F03%2F01%2Fdocker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[OverviewCompose ÊòØ‰∏Ä‰∏™‰∏∫‰∫ÜÂÆö‰πâÂíåËøêË°åÂ§öÂÆπÂô® Docker Â∫îÁî®ÁöÑÂ∑•ÂÖ∑„ÄÇÂÆòÊñπÂä®ÊâãÁ§∫‰æã ÁâπÊÄß ‰∏Ä‰∏™‰∏ªÊú∫Â§ö‰∏™ÈöîÁ¶ªÁéØÂ¢É ÂΩìÂÆπÂô®ÂàõÂª∫Êó∂‰øùÁïôÊâÄÊúâÁöÑ volume Âè™ÊúâÂÆπÂô®Ë¢´Êõ¥ÊîπÊó∂ÊâçËß¶ÂèëÂàõÂª∫ ÂÆö‰πâÂèòÈáèÂíåÂú®‰∏çÂêåÁéØÂ¢É‰∏≠‰ΩøÁî® ‰ΩøÁî®Âú∫ÊôØ Ëá™Âä®ÊµãËØïÁéØÂ¢É ÂçïÁã¨‰∏ªÊú∫ÈÉ®ÁΩ≤ docker-compose ÂÆâË£Ö1234sudo curl -L "https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-composesudo chmod +x /usr/local/bin/docker-composesudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-composesudo docker-compose --version pip ÂÆâË£Ö 1pip install docker-compose Âç∏ËΩΩ 12sudo rm /usr/local/bin/docker-composepip uninstall docker-compose docker-compose ÂëΩ‰ª§ -f ÊåáÂÆö ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ compose Êñá‰ª∂ÁöÑÂêçÁß∞ÂíåË∑ØÂæÑ 1„ÄÅ‰ΩøÁî®Â§ö‰∏™ Compose Êñá‰ª∂Êó∂ÔºåCompose ‰ºöÊääËøôÂá†‰∏™Êñá‰ª∂ÂêàÂπ∂‰∏∫‰∏Ä‰∏™ÈÖçÁΩÆ„ÄÇÊåâÈ°∫Â∫èÂêàÂπ∂ÔºåÂêéËæπÁöÑË¶ÜÁõñÂâçËæπÁöÑÈÖçÁΩÆ„ÄÇ2„ÄÅdocker-compose -f docker-compose.yml -f docker-compose.admin.yml run backup_db3„ÄÅ‰ΩøÁî® -(dash) ‰Ωú‰∏∫ -f ÁöÑÂÄºÔºåÂ∞Ü‰ºö‰ªéËæìÂÖ•‰∏≠ËØªÂèñÈÖçÁΩÆÊñá‰ª∂Âêç„ÄÇ‰ΩøÁî® stdin Êó∂ÔºåÈÖçÁΩÆÈáåÊ∂âÂèäÂà∞ÁöÑË∑ØÂæÑÈÉΩÊòØÁõ∏ÂØπ‰∫éÂΩìÂâçÂ∑•‰Ωú‰∏ä‰∏ãÊñáË∑ØÂæÑ„ÄÇ4„ÄÅÂ¶ÇÊûú‰∏çÊòØÁî® -f,Compose ÈÅçÂéÜÂΩìÂâç‰∏ä‰∏ãÊñáË∑ØÂæÑÂíåÂÆÉÁöÑÁà∂Ë∑ØÂæÑÊü•ËØ¢ docker-compose.yml Âíå docker-compose.override.yml Êñá‰ª∂„ÄÇËØ∑Ëá≥Â∞ëÊèê‰æõ‰∏Ä‰∏™ docker-compose.yml Êñá‰ª∂„ÄÇÂ¶ÇÊûúÊâÄÊúâÁöÑÊñá‰ª∂ÈÉΩÂú®Âêå‰∏Ä‰∏™Êñá‰ª∂Â§π‰∏ãÔºåCompose Â∞ÜÂêàÂπ∂ÂÆÉ‰ª¨„ÄÇ5„ÄÅdocker-compose.override.yml ÁöÑÈÖçÁΩÆÈ´ò‰∫é docker-compose.yml,‰∏î‰∏∫ÂêéËÄÖÊèê‰æõÈ¢ùÂ§ñÁöÑÈÖçÁΩÆÂ±ûÊÄß„ÄÇ ‰∏∫ÂçïÁã¨ÁöÑ Compose Êñá‰ª∂ÊåáÂÆöË∑ØÂæÑ 1„ÄÅ‰ΩøÁî® -f, Êàñ‰ªéÂëΩ‰ª§Ë°åËæìÂÖ•ÔºåÊàñÂú® shell / Êüê‰∏™ÁéØÂ¢ÉÈÖçÁΩÆÊñá‰ª∂‰∏≠ËÆæÁΩÆ COMPOSE_FILE ÁéØÂ¢ÉÂèòÈáè,ÊåáÂÆö‰∏çÂú®ÂΩìÂâçÊñá‰ª∂Â§πÁöÑ Compose Êñá‰ª∂Ë∑ØÂæÑ.2„ÄÅdocker-compose -f ~/sandbox/rails/docker-compose.yml pull db ‰ªé ~/sandbox/rails/docker-compose.yml Êñá‰ª∂‰∏≠Ëé∑Âèñ db ÊúçÂä°‰∏≠ÂÆö‰πâÁöÑ postgres db ÈïúÂÉè„ÄÇ -p ÊåáÂÆöÈ°πÁõÆÂêç 1„ÄÅÂ¶ÇÊûú‰∏çÊåáÂÆö -p,Compose ÈªòËÆ§‰ΩøÁî®ÂΩìÂâçÊñá‰ª∂Â§πÁöÑÂêçÁß∞„ÄÇ ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè docker-compose CLI ÁéØÂ¢ÉÂèòÈáèÈªòËÆ§ÂÜÖÁΩÆ‰∫ÜÂá†‰∏™ÁéØÂ¢ÉÂèòÈáèÂèØ‰ª•ÈÖçÁΩÆ docker-compose.‰ª• DOCKER_ ÂºÄÂ§¥ÁöÑÂèòÈáèÂíåÈÖçÁΩÆ docker ÂëΩ‰ª§Ë°åÂÆ¢Êà∑Á´ØÁöÑÂèòÈáèÁ±ª‰ºº„ÄÇÂ¶ÇÊûú‰ΩøÁî® docker-machineÁöÑËØùÔºåeval &quot;$(docker-machine env my-docker-vm)&quot;Â∞Ü‰∏∫ÂèòÈáèËÆæÁΩÆÊ≠£Á°ÆÁöÑÂÄº„ÄÇ COMPOSE_PROJECT_NAME 1„ÄÅËÆæÁΩÆÈ°πÁõÆÂêç.ËØ•ÂÄºÂú®ÂêØÂä®Êó∂‰ºö‰Ωú‰∏∫ÂÆπÂô®ÊúçÂä°ÁöÑÂâçÁºÄ.ÊØîÂ¶ÇÈ°πÁõÆÂêç myapp,ÂåÖÂê´‰∏§‰∏™ÊúçÂä° db Âíå web,ÈÇ£‰πà Compose ÂêØÂä®ÁöÑÂÆπÂô®Âêç‰∏∫ myapp_db_1 Âíå myapp_web_1.2„ÄÅÈªòËÆ§Êó∂È°πÁõÆÊñá‰ª∂Â§πÁöÑÊ†πÁõÆÂΩïÂêç„ÄÇ COMPOSE_FILE 1„ÄÅÊåáÂÆö Compose Êñá‰ª∂Ë∑ØÂæÑ„ÄÇÂ¶ÇÊûúÊú™ÊåáÂÆöÔºåCompose Â∞ÜÂú®ÂΩìÂâçÊñá‰ª∂Â§πÊü•ËØ¢ docker-compose.yml Êñá‰ª∂ÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®Â∞ÜÁªßÁª≠ÈÅçÂéÜÁà∂ÁõÆÂΩïÁõ¥Âà∞ÊâæÂà∞„ÄÇ2„ÄÅÊîØÊåÅ‰ΩøÁî®Êñá‰ª∂Ë∑ØÂæÑÂàÜÈöîÁ¨¶(Linux &amp; MacOS [:] Windows [;]).ÊØîÂ¶Ç COMPOSE_FILE=docker-compose.yml:docker-compose.prod.yml,Ë∑ØÂæÑÂàÜÈöîÁ¨¶ÂèØ‰ª•ÈÄöËøá COMPOSE_PATH_SEPARATOR Ëá™ÂÆö‰πâ COMPOSE_API_VERSION 1„ÄÅDocker API ‰ªÖÊîØÊåÅÊù•Ëá™ÊåáÂÆöÁâàÊú¨ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±Ç„ÄÇ‰ΩøÁî® docker-compose Êó∂Âá∫Áé∞ client and server don&#39;t have same version ÈîôËØØÔºåÈÇ£‰πàÂèØ‰ª•ÈÄöËøáËÆæÁΩÆËØ•ÂèòÈáèËß£ÂÜ≥„ÄÇ2„ÄÅËÆæÁΩÆËØ•ÂèòÈáè‰∏ªË¶ÅÈíàÂØπ‰∏¥Êó∂ÁöÑËøêË°åÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÁâàÊú¨‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµ„ÄÇ DOCKER_HOST 1„ÄÅ‰∏∫ docker daemon ËÆæÁΩÆ URL.Âíå docker ÂÆ¢Êà∑Á´Ø‰∏ÄÊ†∑ÔºåÈªòËÆ§‰∏∫ unix:///var/run/docker.sock DOCKER_TLS_VERIFY 1„ÄÅËÆæÁΩÆÁ©∫Â≠óÁ¨¶‰ª•Â§ñÁöÑ‰ªª‰ΩïÂÄºÊó∂ÔºåÂºÄÂêØ TLS. DOCKER_CERT_PATH 1„ÄÅÈÖçÁΩÆ ca.pem,cert.pem,key.pem ÁöÑË∑ØÂæÑ„ÄÇÈªòËÆ§ ~/.docker COMPOSE_HTTP_TIMEOUT 1„ÄÅË∂ÖÊó∂Êó∂Èó¥(Áßí).ÈªòËÆ§ 60s COMPOSE_TLS_VERSION 1„ÄÅTLS ÁâàÊú¨.ÈªòËÆ§ TLSv1. ÂèØ‰æõÈÄâÈ°π TLSv1, TLSv1_1, TLSv1_2 COMPOSE_CONVERT_WINDOWS_PATH 1„ÄÅÊòØÂê¶ÂºÄÂêØÊää Windos-style ÁöÑË∑ØÂæÑËΩ¨‰∏∫ Unix-style ÁöÑÂç∑ÂÆö‰πâ„ÄÇÂú® Windos ‰∏ä‰ΩøÁî® Docker Machine Âíå Docker Toolbox Êó∂ÊÄªÊòØË¶ÅËÆæÁΩÆËØ•ÂèòÈáè„ÄÇÈªòËÆ§ 0„ÄÇ true/1 ‰ª£Ë°®ÂºÄÂêØÔºåfalse/0 ‰ª£Ë°®ÂÖ≥Èó≠. COMPOSE_PATH_SEPARATOR 1„ÄÅÂ¶ÇÊûúËÆæÁΩÆÔºåCOMPOSE_FILE ÂÄºÂ∞Ü‰ΩøÁî®Ê≠§Â§ÑÁöÑÂÆö‰πâ‰Ωú‰∏∫ÂàÜÈöîÁ¨¶„ÄÇ COMPOSE_FORCE_WINDOWS_HOST 1„ÄÅÂ¶ÇÊûúËÆæÁΩÆÔºåÂç≥‰Ωø Compose ËøêË°åÂú® Unix-based Á≥ªÁªü‰∏äÔºåÂç∑ÂÆö‰πâ‰πüÂ∞Ü‰ΩøÁî®ÁÆÄÁï•ËØ≠Ê≥ïËß£Êûê‰∏∫ÂÅáËÆæËøêË°åÂú® Windows ‰∏äÁöÑË∑ØÂæÑ„ÄÇtrue/a,false/0 COMPOSE_IGNORE_ORPHANS 1„ÄÅÂ¶ÇÊûúËÆæÁΩÆÔºåCompose ‰∏ç‰ºöËØïÁùÄÂØπÈ°πÁõÆÁöÑÂçïÁã¨ÂÆπÂô®Ê£ÄÊµã„ÄÇtrue/1,false/0 COMPOSE_PARALLEL_LIMIT 1„ÄÅÂπ∂Ë°åÊâßË°åÁöÑÈôêÂà∂„ÄÇÈªòËÆ§ 64ÔºåÁªù‰∏çËÉΩ‰Ωé‰∫é 2. COMPOSE_INTERACTIVE_NO_CLI 1„ÄÅÂ¶ÇÊûúËÆæÁΩÆÔºåCompose ‰∏ç‰ºöÂ∞ùËØï‰ΩøÁî® Docker CLI Âíå run exec Êìç‰Ωú‰∫§‰∫í„ÄÇtrue/1,false/0 Compose fileversion 3buildÈÖçÁΩÆÈÄâÈ°πÂú®ÁºñËØëÊúüÁîüÊïà„ÄÇbuild ÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™Ë∑ØÂæÑ 1234version: "3"services: webapp: build: ./dir ÊàñËÄÖÊòØ‰∏Ä‰∏™Âú®ÊåáÂÆö context ‰∏ãÁöÑË∑ØÂæÑÂØπË±°ÔºåÂêåÊó∂ÂèØÂåÖÂê´ Dockerfile Âíå args 12345678version: "3"services: webapp: build: context: ./dir dockerfile: Dockerfile-alternate args: buildno: 1 Â¶ÇÊûúÂêåÊó∂‰πüÊåáÂÆö‰∫Ü image,Compose ‰ΩøÁî® webapp Âíå image ‰∏≠ÊåáÂÆöÁöÑÂèØÈÄâÁöÑ tag ÂëΩÂêçÊúÄÁªàÁîüÊàêÁöÑÈïúÂÉèÂêç 12build: ./dirimage: webapp:tag swarm mode ‰∏çÊîØÊåÅ„ÄÇdocker stack ÂëΩ‰ª§Âè™Êé•ÂèóÈ¢ÑÁºñËØëÁöÑÈïúÂÉè. CONTEXTÂèØ‰ª•ÊòØÂåÖÂê´ Dockerfile Êñá‰ª∂ÁöÑË∑ØÂæÑÔºåÊàñ git ‰ªìÂ∫ìÁöÑ url.Â¶ÇÊûúÊòØÁõ∏ÂØπË∑ØÂæÑÔºåÈÇ£‰πàË¢´Ëß£Êûê‰∏∫Áõ∏ÂØπ‰∫éÂΩìÂâç Compose Êñá‰ª∂ÁöÑË∑ØÂæÑ„ÄÇÊ≠§Êñá‰ª∂Â§πÂêåÊó∂‰πüÊòØÂèëÈÄÅÂà∞ Docker daemon ÁöÑÁºñËØë‰∏ä‰∏ãÊñá„ÄÇ DOCKERFILEÂèØÈÄâÊ≠§Â§ÑÂøÖÈ°ªÊåáÂÆöÁºñËØëË∑ØÂæÑ ARGSÂè™ÊúâÂú®ÁºñËØëËøáÁ®ã‰∏≠ÂèØËÆøÈóÆÁöÑÁéØÂ¢ÉÂèòÈáè„ÄÇÈ¶ñÂÖàÔºåÂú® Dokcerfile ‰∏≠ÊåáÂÆöÂèÇÊï∞: 12345ARG buildnoARG gitcommithashRUN echo "Build number: $buildno"RUN echo "Bashed on commit: $gitcommithash" ÁÑ∂ÂêéÂú® build ‰∏ãÁªôËØ•ÂèÇÊï∞Â§çÂà∂ÔºàÂèØ‰ª•ÊòØÈîÆÂÄºÂØπÂàóË°®ÔºâÔºö 1234567891011build: context: . args: buildno: 1 gitcommithash: cdc3b19build: context: . args: - buildno=1 - gitcommithash=cdc3b19 ‰Ω†‰πüÂèØ‰ª•‰∏çÊåáÂÆöÂÄºÔºåÂÆÉÁöÑÂÄºÂ∞±ÊòØÁºñËØëÊó∂ Compose ÂΩìÂâçËøêË°åÁéØÂ¢ÉÁöÑÂÄº. YAML Â∏ÉÂ∞îÂÄº(true,false,yes,no,on,off)Â∫îËØ•‰ΩøÁî®ÂºïÂè∑Â∫îÁî®ÔºåËøôÊ†∑Ëß£ÊûêÂô®ÊâçËÉΩÊääÂÆÉ‰ª¨Ëß£Êûê‰∏∫ string CACHE_FROM v3.2+ ÊåáÂÆö engine ÂèØ‰ª•ÁºìÂ≠òÁöÑÈïúÂÉèÂàóË°® 12345build: context: . cache_from: - alpine:latest - corp/webapp:3.14 LABELS v3.3+ ÂêëÁîüÊàêÁöÑÈïúÂÉèÊ∑ªÂä†ÂÖÉÊï∞ÊçÆ„ÄÇÂèØ‰ª•ÊòØÊï∞ÁªÑÊàñÁõÆÂΩïÊé®Ëçê‰ΩøÁî®ÂèçÂêë DNS Ê†áËÆ∞‰ª•ÈÅøÂÖçÂíåÂÖ∂‰ªñËΩØ‰ª∂ÂÜ≤Á™Å 12345678910111213build: context: . labels: com.example.description: "Accounting webapp" com.example.department: "Finance" com.example.label-with-empty-value: ""build: context: . labels: - "com.example.description=Accounting webapp" - "com.example.department=Finance" - "com.example.label-with-empty-value" SHM_SIZE v3.5+ ËÆæÁΩÆÁºñËØëÁîüÊàêÂÆπÂô® dev/shm&#39; ÂàÜÂå∫Â§ßÂ∞è„ÄÇint ÂÄºÂçï‰Ωç‰∏∫ byte. string ÂèØ‰ª•Êê∫Â∏¶Âçï‰Ωç 1234567build: context: . shm_size: '2gb'build: context: . shm_size: 10000000 TARGET v3.4+ ÁºñËØë Dockerfile ‰∏≠ÂÆö‰πâÁöÑÊåáÂÆöÁâàÊú¨ 123build: context: . target: prod cap_add,cap_dropÊ∑ªÂä†ÊàñÂà†Èô§ÂÆπÂô®ÁöÑÂÆπÈáè„ÄÇman 7 capabilities Êü•ÁúãÂèØÁî®ÂàóË°® 12345cap_add: - ALLcap_drop: - NET_ADMIN - SYS_ADMIN swarm mode Êó†Êïà cgroup_parent‰∏∫ÂÆπÂô®ÊåáÂÆöÂèØÈÄâÁöÑ cgroup parent 1cgroup_parent: m-executor-abcd swarm mode Êó†Êïà commandË¶ÜÁõñÈªòËÆ§ÁöÑÂëΩ‰ª§ 1command: bundle exec thin -p 3000 ‰πüÂèØ‰ª•ÊòØÂàóË°® 1command: ["bundle", "exec", "thin", "-p", "3000"] configsTips ÂÖ±‰∫´Êñá‰ª∂Â§πÔºåÂç∑ÔºåÁªëÂÆöÊåÇËΩΩ Â¶ÇÊûú‰Ω†ÁöÑÈ°πÁõÆ‰∏çÂú® UsersÁõÆÂΩï(cd ~),ÈÇ£‰πà‰Ω†ÈúÄË¶ÅÂÖ±‰∫´È©±Âä®Âô®Êàñ Dockerfile ÊâÄÂú®‰ΩçÁΩÆÂíåÂΩìÂâçÊ≠£Âú®‰ΩøÁî®ÁöÑÂç∑„ÄÇÂ¶ÇÊûúÂá∫Áé∞ËøêË°åÊó∂ÈîôËØØË°®Á§∫Êñá‰ª∂Êú™ÊâæÂà∞ÔºåÈÇ£‰πàÂ∞±ÊòØ‰∏Ä‰∏™ÊåÇËΩΩÂç∑ÁöÑËØ∑Ê±ÇË¢´ÊãíÁªùÔºåÊàñÊúçÂä°ÂêØÂä®Â§±Ë¥•ÔºåËØïÁùÄÂÖ±‰∫´Êñá‰ª∂ÊàñÈ©±Âä®„ÄÇÊåÇËΩΩÂç∑Ë¶ÅÊ±ÇÂÖ±‰∫´È°πÁõÆ‰∏çÂú® C:\Users (Windows),Êàñ /Users (Mac) ÁöÑÈ©±Âä®ÔºåÂπ∂‰∏îÂ¶ÇÊûúÊòØËøêË°åÂú® Dokcer Desktop for Windows ÁöÑ Linux ÂÆπÂô®‰∏äÁöÑÊâÄÊúâÂ∫îÁî®ÈÉΩÈúÄË¶ÅÂÖ±‰∫´„ÄÇ Â¶ÇÊûúÊîπÂèò‰∫Ü‰∏Ä‰∏™ÊúçÂä°ÁöÑ Dockerfile ÊàñËÄÖÁºñËØëÊñá‰ª∂Â§πÈáåÁöÑÂÜÖÂÆπÔºåËøêË°å docker-compose buildÈáçÊñ∞ÁºñËØë ÂÆòÊñπÁ§∫‰æãCompose &amp; WordPress ‰∏∫È°πÁõÆÂàõÂª∫Á©∫Êñá‰ª∂Â§π„ÄÇËØ•Êñá‰ª∂Â§π‰Ωú‰∏∫Â∫îÁî®ÁöÑ‰∏ä‰∏ãÊñáÔºå‰∏îÂè™‰øùÂ≠òÊûÑÂª∫ÈïúÂÉèÊâÄÈúÄÁöÑËµÑÊ∫ê„ÄÇ ÂàõÂª∫ docker-compose.yml 1234567891011121314151617181920212223242526272829version: "3.3"services: db: image: mysql:5.7 volumes: - db_data:/var/lib/mysql restart: always environment: MYSQL_ROOT_PASSWORD: somewordpress MYSQL_DATABASE: wordpress MYSQL_USER: wordpress MYSQL_PASSWORD: wordpress wordpress: depends_on: - db image: wordpress:latest ports: - "8000:80" restart: always environment: WORDPRESS_DB_HOST: db:3306 WORDPRESS_DB_USER: wordpress WORDPRESS_DB_PASSWORD: wordpress WORDPRESS_DB_NAME: wordpress volumes: db_data: &#123;&#125;# db_data Âç∑‰ºö‰øùÂ≠ò‰ªª‰Ωï WordPress ÂØπÊï∞ÊçÆÂ∫ìÁöÑÊîπÂèò„ÄÇ# WordPress ÈÄöÂ∏∏ÂºÄÊîæ 80 Âíå 443 Á´ØÂè£. docker-compose up -d. Â¶ÇÊûú‰ΩøÁî® Docker Machine, ÈÇ£‰πàËøêË°å docker-machine ip MACHINE_VM Ëé∑ÂèñËøêË°åÂú∞ÂùÄ„ÄÇÂ¶ÇÊûúÊòØ destop ÁâàÔºåhttp://localhost Âç≥ÂèØ. docker-compose down ÁßªÈô§ÂÆπÂô®ÔºåÈªòËÆ§ÁöÑÁΩëÁªúÔºå‰øùÁïô WordPress ÂíåÊï∞ÊçÆÂ∫ì„ÄÇdocker-compose down --volumes ÂÖ®ÈÉ®ÁßªÈô§„ÄÇ]]></content>
      <tags>
        <tag>docker</tag>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[[ËØë]-LiveData with SnackBar,Navigation and other events(the SingleLiveEvent case)]]></title>
    <url>%2F2019%2F02%2F28%2F%E8%AF%91-LiveData-with-SnackBar-Navigation-and-other-events-the-SingleLiveEvent-case%2F</url>
    <content type="text"><![CDATA[ÂéüÊñá view(activity/fragment) Âíå ViewModel ‰∫§ÊµÅÁöÑÊØîËæÉÂ•ΩÁöÑÊñπÂºèÊòØ LiveData observables. view ËÆ¢ÈòÖ LiveData ÁöÑÊîπÂèò‰∏îÈöèÊó∂ÂìçÂ∫î„ÄÇËøôÈÄÇÁî®‰∫éËøûÁª≠‰∏çÊñ≠ÁöÑÊòæÁ§∫Âú®‰∏Ä‰∏™Â±èÂπïÁöÑÊï∞ÊçÆ„ÄÇ‰ΩÜÊòØÊüê‰∫õÊï∞ÊçÆÂç¥Êõ¥Â∫îËØ•Ë¢´Ê∂àË¥π‰∏ÄÊ¨°ÔºåÊØîÂ¶Ç Snackbar Ê∂àÊÅØÔºånavigation ‰∫ã‰ª∂ Êàñ dialog Ëß¶ÂèëÂô®„ÄÇ‰∏éÂÖ∂ËØïÁùÄÈÄöËøáÊâ©Â±ï Architecture Components Êâ©Â±ïÊàñÂ∫ìËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå‰∏çÂ¶ÇÊàë‰ª¨ÂèØ‰ª•Áõ¥Èù¢ËøôÊòØ‰∏™ËÆæËÆ°Áº∫Èô∑„ÄÇÊàë‰ª¨Êé®Ëçê‰Ω†Êää‰Ω†ÁöÑ‰∫ã‰ª∂Áúã‰ΩúÊòØÁä∂ÊÄÅÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÊú¨ÊñáÊàë‰ª¨Â∞ÜÂàó‰∏æ‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÈîôËØØÂíåÊé®ËçêÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ ‚ùå Bad: 1. ÂØπ‰∫ã‰ª∂‰ΩøÁî® LiveDataÂú® LiveData ÂØπË±°ÂÜÖÈÉ®Áõ¥Êé•ÊåÅÊúâ Snackbar Ê∂àÊÅØÊàñ navigation ‰ø°Âè∑„ÄÇÂéüÂàô‰∏äÊôÆÈÄöÁöÑ LiveData ÂØπË±°ÂèØ‰ª•ËøôÊ†∑‰ΩøÁî®Ôºå‰ΩÜÂÆûÈôÖ‰∏ä‰ºöÊö¥Èú≤‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇÂú® master/detail Êû∂ÊûÑÁöÑ app ‰∏≠ÔºåÂ¶Ç‰∏ãÊòØ maters ÁöÑ ViewModel 12345678910// ËØ∑‰∏çË¶ÅÂØπ‰∫ã‰ª∂ËøôÊ†∑Áî®class ListViewModel : ViewModel &#123; private val _navigateToDetails = MutableLiveData&lt;Boolean&gt;() val navigateToDetails : LiveData&lt;Boolean&gt; get() = _navigateToDetails fun userClicksOnButton() &#123; _navigateToDetails.value = true &#125;&#125; Âú® View(activity/fragment) ‰∏≠ 123myViewModel.navigateToDetails.observe(this,Observer &#123; if (it) startActivity(DetailsActivity....)&#125;) Ê≠§ÊñπÊ°àÁöÑ‰∏çË∂≥Âú®‰∫é _navigateToDetailsÂ∞Ü‰ºö‰∏ÄÁõ¥‰∏∫ true,ËÄå‰∏î‰∏çÂèØËÉΩÂõûÂà∞È¶ñÂ±è: Áî®Êà∑ÁÇπÂáªÊåâÈíÆÂêØÂä® Details Activity Áî®Êà∑ÊåâËøîÂõûÊåâÈíÆÔºåÂõûÂà∞‰∏ª Activity ÂΩì activity ËøõÂÖ•ÂõûÈÄÄÊ†àÊó∂ observers Â§±Ê¥ªÔºåÁé∞Âú®ÂÜçÊ¨°ÊøÄÊ¥ª ‰ªé ViewModel ‰∏≠Ë∞ÉÁî® navigation ‰∏îÁ´ãÂç≥Â∞ÜÂÖ∂ËÆæ‰∏∫ false 1234fun userClicksOnButton() &#123; _navigateToDetails.value = true _navigateToDetails.value = false&#125; ‰ΩÜÊòØËØ∑Ê≥®ÊÑèÔºö LiveData ‰øùÂ≠òÊï∞ÊçÆ‰ΩÜ‰∏ç‰ºö‰øùËØÅÂú®Êé•ÂèóÂà∞‰∫ã‰ª∂Êó∂ÂèëÈÄÅ‰ªª‰ΩïÊï∞ÊçÆ„ÄÇ‰æãÂ¶ÇÔºåÂΩìÊ≤°ÊúâËßÇÂØüËÄÖÊ¥ªË∑ÉÊó∂Êõ¥Êñ∞ÂÄºÔºåÈÇ£‰πà‰∏Ä‰∏™Êñ∞ÂÄºÂ∞ÜÊõøÊç¢ÂéüÊù•ÁöÑÂÄº„ÄÇÂêåÊó∂Ôºå‰ªé‰∏çÂêåÁ∫øÁ®ãËÆæÁΩÆÂ±ûÊÄßÂ∞Ü‰ºöÂØºËá¥Á´û‰∫âÁä∂ÊÄÅÔºåÊ≠§Êó∂‰ªÖËÉΩ‰øùËØÅ‰∏Ä‰∏™ËßÇÂØüËÄÖË¢´Ë∞ÉÁî®„ÄÇ ÊúÄ‰∏ªË¶ÅÁöÑÈóÆÈ¢òÊòØÔºåËøô‰∏™ÊñπÊ°àÂæàÈöæÁêÜËß£ËÄå‰∏î‰ª£Á†ÅÂûÉÂúæ„ÄÇÊâÄ‰ª•Êàë‰ª¨Â¶Ç‰Ωï‰øùËØÅÂú® navigation ‰∫ã‰ª∂ÂèëÁîüÊó∂ÂÄºÈáçÁΩÆÔºü ‚ùåBetter: 2.‰ΩøÁî® LiveData wrapper ‰∫ã‰ª∂ÔºåÂú®ËßÇÂØüËÄÖ‰∏≠ÈáçÁΩÆÂ±ûÊÄß.123456listViewModel.navigateToDetails.observe(this,Observer &#123; if (it) &#123; myViewModel.navigateToDetailsHandled() startActivity(DetailsActivity...) &#125;&#125;) 1234567891011121314class ListViewModel: ViewModel &#123; private val _navigateToDetails = MutableLiveData&lt;Boolean&gt;() val navigateToDetails: LiveData&lt;Boolean&gt; get() = _navigateToDetails fun userClicksOnButton() &#123; _navigateToDetails.value = true &#125; fun navigateToDetailsHandled() &#123; _navigateToDetails.value = false &#125;&#125; Ê≠§ÊñπÊ°àÁöÑ‰∏çË∂≥‰πãÂ§ÑÂú®‰∫éÊúâ‰∫õÂÜó‰Ωô‰ª£Á†Å ‚úÖ okÔºö‰ΩøÁî® SingleLiveEventSingleLiveEvent Âè™ÈÄÇÁî®‰∫éÈÉ®ÂàÜÂú∫ÊôØ„ÄÇÂè™ÂèëÈÄÅÂíåÊõ¥Êñ∞‰∏ÄÊ¨°Áä∂ÊÄÅÁöÑ LiveData 12345678910class ListViewModel: ViewModel &#123; private val _navigateToDetails = SingleLiveEvent&lt;Any&gt;() val navigateToDetails: LiveData&lt;Any&gt; get() = _navigateToDetails fun userClicksOnButton() &#123; _navigateToDetails.call() &#125;&#125; 123myViewModel.navigateToDetails.observe(this, Observer &#123; startActivity(DetailsActivity...)&#125;) 123456789101112131415161718192021222324252627282930313233343536373839// SingleLiveEventpublic class SingleLiveEvent&lt;T&gt; extends MutableLiveData&lt;T&gt; &#123; private static final String TAG = "SingleLiveEvent"; private final AtomicBoolean mPending = new AtomicBoolean(false); @MainThread public void observe(LifecycleOwner owner, final Observer&lt;T&gt; observer) &#123; if (hasActiveObservers()) &#123; Log.w(TAG, "Multiple observers registered but only one will be notified of changes."); &#125; // Observe the internal MutableLiveData super.observe(owner, new Observer&lt;T&gt;() &#123; @Override public void onChanged(@Nullable T t) &#123; if (mPending.compareAndSet(true, false)) &#123; observer.onChanged(t); &#125; &#125; &#125;); &#125; @MainThread public void setValue(@Nullable T t) &#123; mPending.set(true); super.setValue(t); &#125; /** * Used for cases where T is Void, to make calls cleaner. */ @MainThread public void call() &#123; setValue(null); &#125;&#125; Ê≠§ÊñπÊ°àÁöÑ‰∏çË∂≥‰πãÂ§ÑÂú®‰∫éÂè™Êúâ‰∏Ä‰∏™ËÆ¢ÈòÖËÄÖ„ÄÇÂ¶ÇÊûú‰Ω†ÊúâÂ§ö‰∏™ËßÇÂØüËÄÖÔºåÈÇ£‰πàÂè™Êúâ‰∏Ä‰∏™Ë¢´Ë∞ÉÁî®‰∏î‰∏ç‰øùËØÅÈ°∫Â∫è„ÄÇ ‚úÖ Êé®ËçêÔºö‰ΩøÁî® Event Wrapper1234567891011121314151617open class Event&lt;out T&gt;(private val content: T) &#123; val hasBeenHandled = false private set // Âè™ËØªÂ±ûÊÄß /** * ËøîÂõû content, ÈòªÊ≠¢ÂÖ∂ÂÜçÊ¨°Ë∞ÉÁî® fun getContentIfNotHandled(): T? &#123; return if (hasBeenHandled) &#123; null &#125; else &#123; hasBeenHandled = true content &#125; &#125; fun peekContent(): T = content&#125; 1234567891011class ListViewModel : ViewModel &#123; private val _navigateToDetails = MutableLiveData&lt;Event&lt;String&gt;&gt;() val navigateToDetails : LiveData&lt;Event&lt;String&gt;&gt; get() = _navigateToDetails fun userClicksOnButton(itemId: String) &#123; _navigateToDetails.value = Event(itemId) // Trigger the event by setting a new Event as a new value &#125;&#125; 1234567891011class ListViewModel : ViewModel &#123; private val _navigateToDetails = MutableLiveData&lt;Event&lt;String&gt;&gt;() val navigateToDetails : LiveData&lt;Event&lt;String&gt;&gt; get() = _navigateToDetails fun userClicksOnButton(itemId: String) &#123; _navigateToDetails.value = Event(itemId) // Trigger the event by setting a new Event as a new value &#125;&#125; Ê≠§ÊñπÊ°àÁöÑ‰ºòÂäøÊòØÁî®Êà∑ÈúÄË¶Å‰ΩøÁî® getContentIfNotHandled() Êàñ peekContent()ÊåáÂÆöÊÑèÂõæ„ÄÇÊ≠§ÊñπÊ≥ïÊää‰∫ã‰ª∂ÊäΩË±°‰∏∫ state ÁöÑ‰∏ÄÈÉ®ÂàÜÔºöÂèòÊàê‰ªÖË°®Á§∫ÊòØÂê¶Ë¢´Ê∂àË¥πÁöÑÊ∂àÊÅØ„ÄÇ ÁªìËÆ∫ÊÄª‰πãÔºåÊää‰∫ã‰ª∂‰Ωú‰∏∫Áä∂ÊÄÅÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ‰ΩøÁî®Ëøô‰∏™ EventObserver Âú®Â§ßÈáè‰∫ã‰ª∂ÁªìÊùüÂêéÁßªÈô§ÂÆÉ 1234567class EventObserver&lt;T&gt;(private val onEventUnhandledContent: (T) -&gt; Unit) : Observer&lt;Event&lt;T&gt;&gt; &#123; override fun onChanged(event: Event&lt;T&gt;?) &#123; event?.getContentIfNotHandled()?.let &#123; value -&gt; onEventUnhandledContent(value) &#125; &#125;&#125; 123inline fun &lt;T&gt; LiveData&lt;Event&lt;T&gt;&gt;.observeEvent(owner: LifecycleOwner, crossinline onEventUnhandledContent: (T) -&gt; Unit) &#123; observe(owner, Observer &#123; it?.getContentIfNotHandled()?.let(onEventUnhandledContent) &#125;)&#125;]]></content>
      <tags>
        <tag>ÁøªËØë</tag>
        <tag>LiveData</tag>
        <tag>Navigation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LiveData]]></title>
    <url>%2F2019%2F02%2F28%2FLiveData%2F</url>
    <content type="text"><![CDATA[LiveData ÁöÑ‰ºòÂäø Á°Æ‰øù UI ÂíåÊï∞ÊçÆÁä∂ÊÄÅÂåπÈÖç LiveData ÈÅµÂæ™ËßÇÂØüËÄÖÊ®°Âºè„ÄÇ Êó†ÂÜÖÂ≠òÊ≥ÑÊºè ‰∏ç‰ºöÂõ†‰∏∫ Activity Ë¢´ÁªàÊ≠¢ËÄåÂ¥©Ê∫É Â¶ÇÊûúËßÇÂØüËÄÖÂ§Ñ‰∫é inactive Áä∂ÊÄÅÔºå‰æãÂ¶Ç activity Â§Ñ‰∫éÂõûÈÄÄÊ†à‰∏≠ÔºåÈÇ£‰πàÂÆÉ‰∏ç‰ºöÊé•Êî∂Âà∞‰ªª‰Ωï LiveData ‰∫ã‰ª∂. ‰∏çÁî®ÊâãÂä®Â§ÑÁêÜÁîüÂëΩÂë®Êúü‰∫ã‰ª∂ Êó∂ÂàªÊõ¥Êñ∞Êï∞ÊçÆÁä∂ÊÄÅ Â¶ÇÊûú‰∏Ä‰∏™ËßÇÂØüËÄÖÁöÑÂèò‰∏∫ inactiveÔºåÈÇ£‰πàÂÆÉ‰ºöÂú®ÈáçÊñ∞ active Êó∂Ëé∑ÂèñÊúÄÊñ∞ÁöÑÊï∞ÊçÆÁä∂ÊÄÅ„ÄÇÊØîÂ¶ÇÔºå‰∏Ä‰∏™ activiy Â¶ÇÊûúÂ§Ñ‰∫éÂêéÂè∞ÔºåÈÇ£‰πàÂÆÉÂ∞ÜÂú®ÈáçÊñ∞ËøîÂõûÂâçÂè∞Êó∂Ëé∑ÂèñÂà∞ÊúÄÊñ∞ÁöÑÊï∞ÊçÆ„ÄÇ Â∫îÂØπ configuration change Â¶ÇÊûú‰∏Ä‰∏™ activity Êàñ fragment Áî±‰∫é configuration change(ËÆæÂ§áÊóãËΩ¨) ÂØºËá¥ÈáçÊñ∞ÂàõÂª∫ÔºåÂÆÉ‰ºöÁ´ãÂç≥Ëé∑ÂèñÊúÄÊñ∞ÂèØÁî®ÁöÑÊï∞ÊçÆ. ÂÖ±‰∫´ËµÑÊ∫ê ÂèØ‰ª•‰ΩøÁî®Âçï‰æãÊ®°ÂºèÊâ©Â±ï LiveDataÔºåÂ∞ÅË£ÖÁ≥ªÁªüÊúçÂä°Âú® app ÂÜÖÂÖ±‰∫´„ÄÇ Âú® ViewModel ÂØπË±°‰∏≠‰øùÂ≠òÂèØ‰ª•Êõ¥Êñ∞ UI ÁöÑ LiveData ÂØπË±°ÔºåËÄå‰∏çÊòØÂú® activity Êàñ fragment ÁöÑÂéüÂõ†ÊòØÔºö ÈÅøÂÖç activty Êàñ framgent ËøáÂ∫¶ËÜ®ËÉÄ„ÄÇUI controller ‰ªÖË¥üË¥£Â±ïÁ§∫Êï∞ÊçÆËÄå‰∏çÊòØ‰øùÂ≠òÊï∞ÊçÆÁä∂ÊÄÅ ‰ªéÁâπÊÄßÁöÑ activity Êàñ fragment ‰∏≠Ââ•Á¶ª LiveData ÂÆû‰æãÔºå‰ΩøÂæó LiveData ÂØπË±°ÂèØ‰ª•Âú® configuration change ‰∏≠Â≠òÊ¥ª„ÄÇ ËØ∑Âú®‰∏ªÁ∫øÁ®ã‰∏≠Ë∞ÉÁî® setValue(T) Êõ¥Êñ∞ LiveData ÂØπË±°.Â¶ÇÊûúÊòØÂú®Â∑•‰ΩúÁ∫øÁ®ãÔºåËØ∑Ë∞ÉÁî® postValue(T).]]></content>
      <tags>
        <tag>Architecture Components</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÈ´òÁ∫ß-6-ÂÖÉÊ®°Âûã,IDs,UIDs]]></title>
    <url>%2F2019%2F02%2F26%2FObjectBox%E9%AB%98%E7%BA%A7-6-%E5%85%83%E6%A8%A1%E5%9E%8B-IDs-UIDs%2F</url>
    <content type="text"><![CDATA[‰∏çÂÉè SQLite ËøôÊ†∑ÁöÑÊï∞ÊçÆÂ∫ìÔºåObjectBox ‰∏çÈúÄË¶Å‰Ω†ÂàõÂª∫ database schema.Ëøô‰∏çÊÑèÂë≥ÁùÄ ObjectBox ÊòØÊó† schema ÁöÑ„ÄÇ‰∏∫È´òÊïàËµ∑ËßÅÔºåObjectBox ÂØπÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÁª¥Êä§‰∫Ü‰∏Ä‰∏™ÂÖÉÊ®°Âûã(meta model)„ÄÇÊ≠§ÂÖÉÊ®°ÂûãÂÆûÈôÖ‰∏äÁ≠â‰ª∑‰∫é ObjectBox ÁöÑ schema.ÂÆÉÂåÖÂê´‰∫ÜÊâÄÊúâÂ±ûÊÄßÁöÑÁ±ªÂûã„ÄÅindexes Á≠â.‰∏çÂêå‰πãÂ§ÑÂú®‰∫é ObjectBox ËØïÂõæËá™Âä®ÁÆ°ÁêÜËØ•ÂÖÉÊ®°Âûã.Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåËøôÈúÄË¶Å‰Ω†Â∏ÆÂøô. Object ÁöÑ IDs ÊòØ @Id ÂÆö‰πâÁöÑÔºåËÄå ÊâÄÊúâ entity Á±ªÂûãÁöÑÂÆû‰æãÈÉΩÁªëÂÆö‰∏Ä‰∏™ meta model ID. JSON for consistent IDsObjectBox Êää‰∏ÄÈÉ®ÂàÜÂÖÉÊ®°Âûã‰øùÂ≠òÂú® JSON Êñá‰ª∂‰∏≠.Ê≠§Êñá‰ª∂Â∫îËØ•ÈÄöËøáÁâàÊú¨ÊéßÂà∂ËΩØ‰ª∂ÁÆ°ÁêÜ,‰∏ªË¶ÅÂéüÂõ†ÊòØÔºöÂÆÉÂèØ‰ª•‰øùËØÅ ÂÖÉÊ®°ÂûãÈáåÁöÑ IDs Âíå UIDs Ë∑®ËÆæÂ§á‰∏ÄËá¥.]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÈ´òÁ∫ß-5-Êõ¥Êñ∞Êï∞ÊçÆÊ®°Âûã]]></title>
    <url>%2F2019%2F02%2F26%2FObjectBox%E9%AB%98%E7%BA%A7-5-%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[ObjectBox Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãËá™Âä®ÁÆ°ÁêÜÊï∞ÊçÆÊ®°Âûã.ÂΩìÊ∑ªÂä†/Âà†Èô§ entities ÊàñÂ±ûÊÄßÊó∂ÔºåObjectBox Ëá™Âä®‰ΩúÂá∫ÂìçÂ∫î„ÄÇÂØπ‰∫éÂÖ∂‰ªñÊîπÂèòÂ¶Ç ‰øùÁïôÊàñÊîπÂèòÁ±ªÂûãÔºåObjectBox ÈúÄË¶ÅÈ¢ùÂ§ñ‰ø°ÊÅØ„ÄÇ UIDsObjectBox ÈÄöËøá unique IDs(UIDs) Êù•ËøΩË∏™ entities ÂíåÂ±ûÊÄßÁöÑÂèòÂåñ„ÄÇÊâÄÊúâÁöÑ UIDs ÈÉΩÂ≠òÂÇ®Âú® module-name/objectbox-models/default.json ‰∏≠,ÂèØ‰ª•‰ΩøÁî®ÁâàÊú¨ÊéßÂà∂ËΩØ‰ª∂(git)ËøõË°åÁÆ°ÁêÜ„ÄÇ ÁÆÄÂçïÊù•ËØ¥: ‰∏∫‰∫Ü‰Ωø UID Áõ∏ÂÖ≥ÁöÑÊîπÂèòÁîüÊïàÔºåÂú®Ëøô‰∫õ entity Êàñ Â±ûÊÄß‰∏äÊîæÁΩÆ @Uid ÁÑ∂ÂêéÁºñËØëÔºåÂú®Ëé∑ÂèñËøõ‰∏ÄÊ≠•ÊèêÁ§∫„ÄÇ ÈáçÂëΩÂêç entities Âíå Â±ûÊÄßÈúÄË¶Å UID Ê≥®Ëß£ÁöÑÂéüÂõ†ÊòØ: Â¶ÇÊûú‰ªÖ‰ªÖÊîπÂèò entities ÂíåÂ±ûÊÄßÁöÑÂêçÂ≠óÔºåObjectBox Âè™‰ºöÊÑèËØÜÂà∞ old entity ‰∏çËßÅ‰∫ÜÔºåËÄåÂàõÂª∫‰∫ÜÊñ∞ÁöÑ entity.ÊâÄ‰ª•ÂëäËØâ ObjectBox ÈáçÂëΩÂêç entity ÂíåÊï∞ÊçÆÔºåËÄå‰∏çÊòØ‰∏¢ÂºÉÂÆÉ‰ª¨.ÂÆÉ‰ª¨ÊòØÁõ∏ÂêåÁöÑ‰∏Ä‰∏™ entity„ÄÇÂÆûÈôÖ‰∏äÊòØÂú®ÂÜÖÈÉ®Áªô entity ÁªëÂÆö‰∏Ä‰∏™ UID.Â±ûÊÄß‰πü‰∏ÄÊ†∑. ÂÆûË∑µÁ¨¨‰∏ÄÊ≠•: ‰∏∫ÊÉ≥Ë¶ÅÈáçÂëΩÂêçÁöÑ entity/Â±ûÊÄßÊ∑ªÂä†Á©∫ÁöÑ @Uid Ê≥®Ëß£ 123@Entity@Uidpublic class MyName &#123; ... &#125; Á¨¨‰∫åÊ≠•: ÁºñËØëÈ°πÁõÆÔºåÁÑ∂Âêé‰ºöËæìÂá∫ÈîôËØØ‰ø°ÊÅØÔºöÁªôÂá∫ÂΩìÂâç entity/Â±ûÊÄßÁöÑ UID 123error: [ObjectBox] UID operations for entity "MyName": [Rename] apply the current UID using @Uid(6645479796472661392L) - [Change/reset] apply a new UID using @Uid(4385203238808477712L) Á¨¨‰∏âÈÉ®: Êää‰∏äÈù¢ÁöÑ UID Â§çÂà∂Âà∞ @Uid() Èáå 123@Entity@Uid(6645479796472661392L)public class MyName &#123; ... &#125; Á¨¨ÂõõÊ≠•: ÈáçÂëΩÂêçÂêß 123@Entity@Uid(6645479796472661392L)public class MyNewName &#123; ... &#125; ÊàñËÄÖÂèØ‰ª•Âú® default.json ‰∏≠ÊâæÂà∞ UID,ÁÑ∂ÂêéÁõ¥Êé•‰ΩøÁî®Âà∞ @Uid() ‰∏äÔºåÈáçÂëΩÂêçÂç≥ÂèØ ‰øÆÊîπÂ±ûÊÄßÁ±ªÂûãÊÉ≥Ë¶Å‰øÆÊîπÂ±ûÊÄßÁ±ªÂûãÔºåÈÇ£‰πà ObjectBox ÂÜÖÈÉ®ÂæóÂàõÂª∫‰∏Ä‰∏™Êñ∞Á±ªÂûã„ÄÇÂõ†‰∏∫ ObjectBox ‰∏ç‰ºöËøÅÁßªÊï∞ÊçÆ„ÄÇ ÈáçÂëΩÂêçÂ±ûÊÄßÁ±ªÂûãÔºöËøôÊ†∑ËØ•Â±ûÊÄßÂ∞±‰ºöË¢´ËÆ§‰∏∫ÊòØÊñ∞Â±ûÊÄß(Â¶ÇÊûúËØ•Â±ûÊÄßÂ∑≤ÁªèÊúâ @Uid Ê≥®Ëß£‰∫ÜÔºåÂàôË°å‰∏çÈÄö) 1234// old:String year;// new:int yearInt; ÂëäËØâ ObjectBox ÂØπÊñ∞Â±ûÊÄß‰ΩøÁî®Êñ∞ UID. ÂÆûË∑µ‰∏Ä‰∏ãÁ¨¨‰∏ÄÊ≠•ÔºöÂØπÊÉ≥‰øÆÊîπÁ±ªÂûãÁöÑÂ±ûÊÄßÊ∑ªÂä† @Uid Ê≥®Ëß£ 12@UidString year; Á¨¨‰∫åÊ≠•: ÁºñËØëËé∑ÂèñÈîôËØØ‰ø°ÊÅØ 123error: [ObjectBox] UID operations for property "MyEntity.year": [Rename] apply the current UID using @Uid(6707341922395832766L) - [Change/reset] apply a new UID using @Uid(9204131405652381067L) Á¨¨‰∏âÊ≠•Ôºö‰∏∫ËØ•Â±ûÊÄßÂ∫îÁî®Êñ∞ @Uid,Âπ∂‰øÆÊîπÁ±ªÂûã. 12@Uid(9204131405652381067L)int year;]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÈ´òÁ∫ß-4-entityÁªßÊâø]]></title>
    <url>%2F2019%2F02%2F26%2FObjectBox%E9%AB%98%E7%BA%A7-4-entity%E7%BB%A7%E6%89%BF%2F</url>
    <content type="text"><![CDATA[ObjectBox ÂÖÅËÆ∏Â≠êÁ±ªÁªßÊâø entity Áà∂Á±ªÊåÅ‰πÖÂåñÁöÑÂ±ûÊÄß„ÄÇÂêåÊ†∑‰πüÊîØÊåÅÁªßÊâøÈùû entity Á±ª„ÄÇ1.4+ ‰πüÊîØÊåÅÂ§öÁªßÊâø.ÂØπ‰∫éÁà∂Á±ªÊù•ËØ¥ÂèØ‰ª•‰ΩøÁî® @BaseEntity. Êó†Ê≥®Ëß£: Á±ªÊú¨Ë∫´ÂèäÂÖ∂Â±ûÊÄß‰∏çÈúÄË¶ÅÊåÅ‰πÖÂåñ @BaseEntity: Â±ûÊÄßÂú®Â≠êÁ±ª‰∏≠ÊåÅ‰πÖÂåñÔºåÁ±ªÊú¨Ë∫´‰∏çÊåÅ‰πÖÂåñ @Entity: Â±ûÊÄßÂú®Â≠êÁ±ª‰∏≠ÊåÅ‰πÖÂåñÔºåÁ±ªÊú¨Ë∫´‰πüÊåÅ‰πÖÂåñ 123456789101112131415161718192021222324252627282930// base class:@BaseEntitypublic abstract class Base &#123; @Id long id; String baseString; public Base() &#123; &#125; public Base(long id, String baseString) &#123; this.id = id; this.baseString = baseString; &#125;&#125;// sub class:@Entitypublic class Sub extends Base &#123; String subString; public Sub() &#123; &#125; public Sub(long id, String baseString, String subString) &#123; super(id, baseString); this.subString = subString; &#125;&#125; 1234567891011121314// entities inherit properties from entities@Entitypublic class SubSub extends Sub &#123; String subSubString; public SubSub() &#123; &#125; public SubSub(long id, String baseString, String subString, String subSubString) &#123; super(id, baseString, subString); this.subSubString = subSubString; &#125;&#125; ‰ΩøÁî®ÂâçÊ≥®ÊÑè Âú®ÁªßÊâøÈìæ‰∏≠ÂèØËÉΩÂ≠òÂú®Áî± @BaseEntity Ê≥®Ëß£ÁöÑÁ±ªÔºåÂÆÉ‰ª¨ÁöÑÂ±ûÊÄßÂ∞ÜË¢´ÂøΩÁï•Ôºå‰∏ç‰ºöÊàê‰∏∫ entity model ÁöÑ‰∏ÄÈÉ®ÂàÜ ‰∏çÊé®ËçêÁªßÊâø‰∏Ä‰∏™‰ªÖÂê´Êúâ ID Â±ûÊÄßÁöÑ base entity Á±ª. Êüê‰∫õÊÉÖÂÜµ‰∏ãÂèØ‰ª•‰ΩøÁî® interface Êõ¥ÁÆÄÂçïÊòé‰∫Ü ÈôêÂà∂ @BaseEntity Ê≥®Ëß£ÁöÑÁà∂Á±ª‰∏çËÉΩÊàê‰∏∫ library ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ Ê≤°ÊúâÂ§öÊÄÅÊü•ËØ¢(‰æãÂ¶ÇÊü•ËØ¢Áà∂Á±ªÂç¥Â∏åÊúõÂæóÂà∞Â≠êÁ±ª) ÂΩìÂâçÊó†ËÆ∫ÊòØ @Entity ËøòÊòØ @BaseEntity Ê≥®Ëß£ÁöÑÁà∂Á±ªÔºåÈÉΩ‰∏çËÉΩ‰ΩøÁî® ToOne ToMany ÂÖ≥ËÅî]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÈ´òÁ∫ß-3-Ëá™ÂÆö‰πâÁ±ªÂûã]]></title>
    <url>%2F2019%2F02%2F26%2FObjectBox%E9%AB%98%E7%BA%A7-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[ObjectBox ÊîØÊåÅ‰ª•‰∏ãÁ±ªÂûãÔºàJavaÔºâ: 1234567891011boolean, Booleanint, Integershort, Shortlong, Longfloat, Floatdouble, Doublebyte, Bytechar, Characterbyte[]StringDate ËΩ¨Êç¢Âô®Ê≥®Ëß£ÂíåÂ±ûÊÄßËΩ¨Êç¢‰ΩøÁî® @Convert Ê≥®Ëß£Â∞ÜÂÖ∂‰ªñÁ±ªÂûãÂ±ûÊÄßËΩ¨‰∏∫ÂÜÖÁΩÆÂ±ûÊÄß„ÄÇÊ≠§Â§ÑÈúÄË¶ÅÊèê‰æõ PropertyConverter ÂÆûÁé∞„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839// enum ËΩ¨‰∏∫ Integer@Entitypublic class User &#123; @Id private Long id; @Convert(converter = RoleConverter.class, dbType = Integer.class) private Role role; public enum Role &#123; DEFAULT(0), AUTHOR(1), ADMIN(2); final int id; Role(int id) &#123; this.id = id; &#125; &#125; public static class RoleConverter implements PropertyConverter&lt;Role, Integer&gt;; &#123; @Override public Role convertToEntityProperty(Integer databaseValue) &#123; if (databaseValue == null) &#123; return null; &#125; for (Role role : Role.values()) &#123; if (role.id == databaseValue) &#123; return role; &#125; &#125; return Role.DEFAULT; &#125; @Override public Integer convertToDatabaseValue(Role entityProperty) &#123; return entityProperty == null ? null : entityProperty.id; &#125; &#125;&#125; more Â¶ÇÊûúÊòØÂú® entity Á±ª‰∏≠ÂÆö‰πâËá™ÂÆö‰πâËΩ¨Êç¢Âô®ÔºåÈÇ£‰πàËØ•ËΩ¨Êç¢Âô®Â∫îËØ•‰∏∫ static. Âà´ÂøòËÆ∞Ê≠£Á°ÆÂ§ÑÁêÜ null,ÈÄöÂ∏∏Â¶ÇÊûú input ÊòØ nullÔºå‰πüÂ∫îËøîÂõû null. Êé®Ëçê‰ΩøÁî®Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåÊõ¥ÊòìËΩ¨Êç¢. ÁªùÂØπ‰∏çËÉΩÂú®ËΩ¨Êç¢Âô®‰∏≠Ë∞ÉÁî®Êï∞ÊçÆÂ∫ì(Box,BoxStore),ËΩ¨Êç¢Âô®ÊñπÊ≥ïÂú®‰∫ãÂä°‰∏≠Ë∞ÉÁî®Ôºå‰æãÂ¶ÇËØªÂèñÊàñÂÜôÂÖ•ÂØπË±°Âà∞ box ‰∏≠Â∞Ü‰ºöÂ§±Ë¥•„ÄÇ ‰∏∫ÊèêÈ´òÊÄßËÉΩÔºåObjectBox ‰ΩøÁî®‰∫ÜÂØπÊâÄÊúâÁöÑËΩ¨Êç¢Âô®‰ΩøÁî®‰∫ÜÂîØ‰∏Ä‰∏Ä‰∏™ÂÆû‰æã„ÄÇËØ∑‰øùËØÅÈô§ÈªòËÆ§Êó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÂ§ñÊ≤°ÊúâËá™ÂÆö‰πâÂÖ∂‰ªñÊûÑÈÄ†ÊñπÊ≥ï„ÄÇÂêåÊó∂ËØ∑‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂ∫î‰∏∫Âú® multiple entities ‰∏≠ÂèØËÉΩÊ∂âÂèäÂà∞Âπ∂Âèë. List/Array Á±ªÂûãÂèØ‰ª•‰ΩøÁî®ËΩ¨Êç¢Âô®ËΩ¨Êç¢ List Á±ªÂûã„ÄÇ‰æãÂ¶ÇÊää List ËΩ¨‰∏∫‰∏ÄÊù° String ÁöÑ JSON Êï∞ÁªÑ.ÂΩìÂâç‰∏çÊîØÊåÅ Array ËΩ¨Êç¢Âô®.Êü•ÁúãÁâπÊÄßÂÆûÁé∞ËøõÂ∫¶Array EnumsÊúÄ‰Ω≥ÂÆûË∑µ: ‰∏çË¶ÅÊåÅ‰πÖÂåñ enum ÁöÑ ordinal Êàñ name: ‰∫åËÄÖÈÉΩ‰∏çÁ®≥ÂÆöÔºå‰∏îÂú®‰∏ãÊ¨°‰Ω†‰øÆÊîπ enum ÂÆö‰πâÊó∂‰ºöÊîπÂèò ‰ΩøÁî®Á®≥ÂÆöÁöÑ ids: Âú® enum ‰∏≠ÂÆö‰πâËá™ÂÆö‰πâÂ±ûÊÄß(integer,string) ÈÉΩÂèØ‰ª•‰øùËØÅÁ®≥ÂÆö„ÄÇ‰ΩøÁî®ËØ•ÁâπÊÄß‰Ωú‰∏∫‰Ω†ÁöÑÊåÅ‰πÖÂåñÊò†Â∞Ñ. ÂáÜÂ§áÂ•ΩÂ∫îÂØπÊú™Áü•: ÂÆö‰πâ‰∏Ä‰∏™ UNKNOWN ÁöÑ enmu ÂÄº„ÄÇÂèØ‰ª•Â∫îÂØπ null Êàñ unknown ÂÄºÁöÑÊÉÖÂÜµ„ÄÇ‰æãÂ¶ÇÂèØ‰ª•Á°Æ‰øùÂ∑≤ÁªèË¢´ÁßªÈô§ÁöÑ enum ÂÄº‰∏ç‰ºöÂØºËá¥ App Â¥©Ê∫É. Êü•ËØ¢Êó∂ÁöÑËá™ÂÆö‰πâÁ±ªÂûãQueryBuilder ÊòØ‰∏çÂÖ≥ÂøÉËá™ÂÆöÁ±ªÂûãÁöÑ„ÄÇËØ∑‰ΩøÁî®ÂÜÖÁΩÆÁ±ªÂûãÊü•ËØ¢„ÄÇ]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÈ´òÁ∫ß-2-Object IDs]]></title>
    <url>%2F2019%2F02%2F26%2FObjectBox%E9%AB%98%E7%BA%A7-2-Object-IDs%2F</url>
    <content type="text"><![CDATA[Object ÂøÖÈ°ªÂÖ∑Êúâ‰∏Ä‰∏™Á±ªÂûã‰∏∫ long ÁöÑÂ±ûÊÄß.ÂΩìÁÑ∂ÂèØ‰ª•‰ΩøÁî®ÂÆÉÁöÑÂåÖË£ÖÁ±ª java.lang.Long,‰ΩÜÊòØ‰∏çÂª∫ËÆÆ‰ΩøÁî®ÂåÖË£ÖÁ±ª.ÂÖ∂‰ªñÁ±ªÂûãÁöÑ ID ( UID Á≠â)ÂèØ‰ª•Ëá™Áî±ÂÆö‰πâÔºåÊü•ËØ¢Á≠âÊìç‰Ωú„ÄÇ news vs. persisted entitiesÂΩìÂàõÂª∫‰∏Ä‰∏™ÂØπË±°Êó∂ÔºåËøòÊ≤°ÊúâÂ≠òÂÖ•ÔºåÂÆÉ‰ª¨ÁöÑ ID ÊòØ 0.‰∏ÄÊó¶ËØ•ÂØπË±°Â≠òÂÖ•ÔºåObjectBox Â∞Ü‰∏∫ËØ•ÂØπË±°ÊåáÂÆö ID.ÂèØ‰ª•ÈÄöËøá put()ËøîÂõûÂÄºÊãøÂà∞ËØ• ID. ÊâÄ‰ª•Âú® ObjectBox ÂÜÖÈÉ®ÈÄöÂ∏∏Êää ID ‰Ωú‰∏∫‰∏Ä‰∏™Áä∂ÊÄÅÊåáÁ§∫Âô®,Â¶ÇÊûú‰∏∫ 0 Ë°®Á§∫Êñ∞ÂàõÂª∫Ôºå‰∏ç‰∏∫ 0 Ë°®Á§∫Â∑≤ÁªèÂ≠òÂÇ®„ÄÇÂÖ≥ËÅîÁâπÂà´‰æùËµñËøô‰∏™ÁâπÊÄß. ÁâπÊÆäÁöÑ Object IDsObject IDs ÂèØËÉΩÊòØ‰ªªÊÑè long ÂÄºÔºåÈô§‰∫Ü‰ª•‰∏ã‰∏§Áßç: 0: ÊàñËÄÖÂΩìÁ±ªÂûã‰∏∫ Long Êó∂‰∏∫ null,Ë¢´ËÆ§‰∏∫ÊòØÊñ∞ÂàõÂª∫ÔºåËøòÊú™Â≠òÂÇ®„ÄÇputËøô‰∏™ÂØπË±°ÊÄªÊòØ‰ºöÊèíÂÖ•‰∏Ä‰∏™Êñ∞ÂØπË±°ÔºåÂπ∂ÊåáÂÆö‰∏Ä‰∏™Êú™‰ΩøÁî®ËøáÁöÑ ID. 0xFFFFFFFFFFFFFFFF (-1 in Java): ObjectBox ‰øùÁïô„ÄÇ ObjectBox ÊåáÂÆö IDÂØπ‰∫éÊØè‰∏Ä‰∏™Êñ∞ÂØπË±°ÔºåObjectBox ÊääÊØîÂΩìÂâç box ‰∏≠ÊúÄÂ§ßÁöÑ ID ÂÄºÂ§ßÁöÑÊú™‰ΩøÁî®ÁöÑÂÄºÊåáÂÆöÁªôÊñ∞ÂØπË±°ÁöÑ ID.ÊØîÂ¶Ç box ‰∏≠Êúâ‰∏Ä‰∏™ ID ‰∏∫ 1 Âíå ID ‰∏∫ 100 ÁöÑÂØπË±°ÔºåÈÇ£‰πàÊñ∞ÂàõÂª∫ÂØπË±°ÁöÑ ID Â∞Ü‰∏∫ 101. ÈªòËÆ§Âè™Êúâ ObjectBox ÂèØ‰ª•ÊåáÂÆö ID(üëá ‰ªãÁªç).Â¶ÇÊûúËØïÂõæËá™Â∑±Â≠òÂÖ•‰∏Ä‰∏™ ID ÊØîÂΩìÂâç ID ÂÄºÊúÄÂ§ßÁöÑËøòÂ§ßÁöÑÂØπË±°ÔºåObjectBox Â∞ÜÊäõÂá∫ÈîôËØØ„ÄÇ ÊâãÂä®ÊåáÂÆö IDsÂ¶ÇÊûúÈúÄË¶ÅÊâãÂä®ÊåáÂÆö ID,ÈÇ£‰πàËØ∑Ê∑ªÂä†Â¶Ç‰∏ãÊ≥®Ëß£: 12@Id(assignable = true)long id; ËøôÂ∞Ü‰ºöÂÖÅËÆ∏Â≠òÂÖ•‰ªªÊÑèÂÄº ID ÁöÑÂØπË±°„ÄÇÂΩìÁÑ∂ËÆæÁΩÆ ID ‰∏∫ 0 Êó∂ÔºåObjectBox Â∞ÜÂà∂ÂÆöÊñ∞ ID Ëá™ÂÆö‰πâ ID ‰ºöÊâìÁ†¥Ëá™Âä®Áä∂ÊÄÅÊåáÁ§∫ÁõëËßÜ(new vs. persisted). ÊâÄ‰ª•Â∫îËØ•Á´ãÂç≥Â≠òÂÖ•ËØ•Ëá™ÂÆö‰πâ ID ÂØπË±°ÔºåÂèØËÉΩËøòÂæóÊâãÂä®ÁªëÂÆö boxÔºåÁâπÂà´Âú®ÂÖ≥ËÅîÁä∂ÂÜµ‰∏ã. ID ÁöÑ String Âà´Âêç (ËøòÂú®Ë∑Ø‰∏ä‚Ä¶)Êü•ÁúãÁâπÊÄßÂÆûÁé∞ËøõÂ∫¶String ID alias]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÈ´òÁ∫ß-1-ÈÖçÁΩÆ]]></title>
    <url>%2F2019%2F02%2F26%2FObjectBox%E9%AB%98%E7%BA%A7-1-%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[ÊâãÂä®Ê∑ªÂä†‰æùËµñÂ∫ìÂ¶ÇÊûú ObjectBox Êèí‰ª∂Ê≤°ÊúâËá™Âä®Ê∑ªÂä†‰æùËµñÂ∫ìÂíåÊ≥®Ëß£Â§ÑÁêÜÂô®ÔºåÈÇ£‰πàÊâãÂä®Ê∑ªÂä†„ÄÇ 12345dependencies &#123; // all below should be added automatically by the plugin compile "io.objectbox:objectbox-android:$objectboxVersion" annotationProcessor "io.objectbox:objectbox-processor:$objectboxVersion"&#125; 1234567dependencies &#123; // all below should be added automatically by the plugin compile "io.objectbox:objectbox-android:$objectboxVersion" kapt "io.objectbox:objectbox-processor:$objectboxVersion" // some useful Kotlin extension functions compile "io.objectbox:objectbox-kotlin:$objectboxVersion"&#125; ÊîπÂèò model Êñá‰ª∂‰ΩçÁΩÆÈªòËÆ§ model Êñá‰ª∂‰Ωç‰∫é module-name/objectbox-models/default.json. 123456789android &#123; defaultConfig &#123; javaCompileOptions &#123; annotationProcessorOptions &#123; arguments = [ "objectbox.modelPath" : "$projectDir/schemas/objectbox.json".toString() ] &#125; &#125; &#125;&#125; 12345kapt &#123; arguments &#123; arg("objectbox.modelPath", "$projectDir/schemas/objectbox.json") &#125;&#125; ÊîπÂèò MyObjectBox ÁöÑÂåÖÂêçÈªòËÆ§ MyObjectBox Á±ªÂåÖÂêçÂíå entity Á±ªÊàñÂÖ∂Áà∂Á±ªÁöÑÂåÖÂêçÁõ∏Âêå. 123456789android &#123; defaultConfig &#123; javaCompileOptions &#123; annotationProcessorOptions &#123; arguments = [ "objectbox.myObjectBoxPackage" : "com.example.custom" ] &#125; &#125; &#125;&#125; 12345kapt &#123; arguments &#123; arg("objectbox.myObjectBoxPackage", "com.example.custom") &#125;&#125; ÂºÄÂêØ debug Ê®°Âºè123456789android &#123; defaultConfig &#123; javaCompileOptions &#123; annotationProcessorOptions &#123; arguments = [ 'objectbox.debug' : 'true' ] &#125; &#125; &#125;&#125; 12345kapt &#123; arguments &#123; arg("objectbox.debug", true) &#125;&#125; greenDAO ÂÖºÂÆπÊü•ÁúãgreenDAO ÂÖºÂÆπÈÖçÁΩÆ]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-12-‰∫ãÂä°]]></title>
    <url>%2F2019%2F02%2F26%2FObjectBox%E5%85%A5%E9%97%A8-12-%E4%BA%8B%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[ObjectBox ÊòØ‰∏Ä‰∏™Êª°Ë∂≥ ACID ÁâπÊÄßÁöÑ‰∫§ÊòìÂûãÊï∞ÊçÆÂ∫ì.‰∏Ä‰∏™‰∫ãÂä°ÂèØ‰ª•ÂåÖÂê´‰∏ÄÁªÑÊìç‰ΩúÔºåË¶Å‰πàÊâßË°åÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•„ÄÇÂá†‰πéÊâÄÊúâÁöÑ ObjectBox ÁöÑÊìç‰ΩúÈÉΩÂåÖÂê´‰∫Ü‰∫ãÂä°„ÄÇÊØîÂ¶Ç put(),read()„ÄÇÊôÆÈÄöÊÉÖÂÜµ‰∏ãÔºå‰∏çÁî®ÂÖ≥ÂøÉËøô‰∫õÂ∫ïÂ±ÇÁöÑ‰∫ãÂä°„ÄÇ‰ΩÜÊüê‰∫õÂ§çÊùÇÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâãÂä®Â§ÑÁêÜ‰∫ãÂä°Êìç‰ΩúÂèØ‰ª•‰Ωø‰Ω†ÁöÑ app Êõ¥Âä†È´òÊïà‰∏ÄËá¥„ÄÇ ÊâãÂä®‰∫ãÂä°ObjectBox Êèê‰æõ‰∫ÜÂ¶Ç‰∏ãÊñπÊ≥ïÂÆûÁé∞ÊâãÂä®‰∫ãÂä°Ôºö runInTx: Âú®‰∫ãÂä°‰∏≠ËøêË°åÊåáÂÆöÁöÑ runnable runInReadTx: Âú®‰∏Ä‰∏™Âè™ËØªÁöÑ‰∫ãÂä°‰∏≠ËøêË°åÊåáÂÆöÁöÑ runnable.‰∏çÂêå‰∫éÂÜôÂÖ•‰∫ãÂä°ÔºåÂ§ö‰∏™Âè™ËØª‰∫ãÂä°ÂèØ‰ª•ÂêåÊó∂ËøêË°å„ÄÇ runInTxAsync: Âú®Âè¶‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ËøêË°åÊåáÂÆöÁöÑ runnable.‰∏ÄÊó¶‰∫ãÂä°ÊâßË°åÂÆåÊØïÔºåcallback(ÂèØ‰∏∫ null) Â∞ÜË¢´Ë∞ÉÁî®. callInTx: Á±ª‰ºº runInTx(Runnable),‰ΩÜÊòØÊúâËøîÂõûÂÄºÊàñÊäõÂá∫ÂºÇÂ∏∏. ÂØπÊâπÈáèÂ≠òÂÖ•Êìç‰ΩúËøõË°åÊâãÂä®‰∫ãÂä°ÁöÑ‰ºòÂäøÊòØ‰Ω†ÂèØ‰ª•ÂÆûÁé∞‰ªªÊÑèÊï∞ÈáèÁöÑÊìç‰ΩúÔºå‰ΩøÁî®Â§ö‰∏™ box ÂØπË±°„ÄÇÂêåÊó∂ÔºåÂú®‰∫ãÂä°ÊâßË°åËøáÁ®ã‰∏≠ÔºåÂèØ‰ª•ÂØπÊï∞ÊçÆÊúâ‰∏Ä‰∏™Áõ¥ËßÇÁöÑËÆ§Áü•„ÄÇ 1234567// ÂÜôÂÖ•‰∫ãÂä°boxStore.runInTx(() -&gt; &#123; for (User user: allUsers) &#123; if (modify(user)) box.put(user); else box.remove(user); &#125;&#125;) ‰∫ãÂä°‰ª£‰ª∑ÁêÜËß£‰∫ãÂä°ÂèØ‰ª•ÂæàÂ•ΩÁöÑÂ∏ÆÂä©ÊéåÊè°Êï∞ÊçÆÂ∫ìÊÄßËÉΩ„ÄÇËØ∑Ê≥®ÊÑè: ÂÜôÂÖ•‰∫ãÂä°‰ª£‰ª∑Â§ß.Êèê‰∫§‰∫ãÂä°ÂåÖÂê´‰∫ÜÂ∞ÜÊï∞ÊçÆÂêåÊ≠•Âà∞Áâ©ÁêÜÂ≠òÂÇ®‰∏≠ÁöÑÊìç‰ΩúÔºåËøôÂØπÊï∞ÊçÆÂ∫ìÊòØ‰∏Ä‰∏™Áõ∏ÂØπÊòÇË¥µÁöÑÊìç‰Ωú„ÄÇÂè™ÊúâÊñá‰ª∂Á≥ªÁªüÁ°ÆËÆ§ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩÂ≠òÂÇ®Ôºå‰∫ãÂä°Êìç‰ΩúÊâç‰ºöË¢´ËÆ§‰∏∫ÊòØÊàêÂäüÁöÑ„ÄÇ‰∫ãÂä°ÂêåÊ≠•ËØ•Êñá‰ª∂ÂèØËÉΩÈúÄË¶ÅÂá†ÊØ´Áßí„ÄÇËØ∑ËÆ∞‰ΩèÔºöÂ∞ΩÈáèÊääÂ§ö‰∏™Êìç‰Ωú(put Á≠â)ÊîæÂÖ•Âêå‰∏Ä‰∏™‰∫ãÂä°‰∏≠. 12345678910// ‰∏çÊé®Ëçêfor(User user: allUsers) &#123; modify(user); // modifies properties of given user box.put(user);&#125;// Êé®Ëçêfor(User user: allUsers) &#123; modify(user); // modifies properties of given user&#125;box.put(allUsers); ËØªÂèñ‰∫ãÂä°ObjectBox ÁöÑËØªÂèñ‰∫ãÂä°ÂæàÂø´„ÄÇÁõ∏ÂØπ‰∫éÂÜôÂÖ•‰∫ãÂä°ÔºåÊ≤°Êúâ commit Êìç‰ΩúÔºåÊâÄ‰ª•Ê≤°ÊúâÊòÇË¥µÁöÑÂêåÊ≠•Êñá‰ª∂Á≥ªÁªü„ÄÇËØ∑Ê≥®ÊÑèÔºöÂú®‰∏Ä‰∏™ËØªÂèñ‰∫ãÂä°‰∏≠ put Êìç‰ΩúÊòØÈùûÊ≥ïÁöÑÔºå‰ºöÊäõÂá∫‰∏Ä‰∏™ÂºÇÂ∏∏„ÄÇget,count,queries Á≠âÊìç‰ΩúÊ≤°ÊúâÊâãÂä®Â£∞Êòé‰∫ãÂä°(ËØªÂÜô),ÈªòËÆ§‰ºöËøêË°åÂú®‰∏Ä‰∏™ËØªÂèñ‰∫ãÂä°.ËôΩÁÑ∂ËØªÂèñ‰∫ãÂä°ÊØîÂÜôÂÖ•‰∫ãÂä°‰ª£‰ª∑Â∞èÔºå‰ΩÜÊòØËøòÊòØÊúÄÂ•ΩÊääÂÆÉÊîæÂÖ•ËØªÂèñ‰∫ãÂä°‰∏≠„ÄÇ Â§öÁâàÊú¨ÁöÑÂπ∂ÂèëObjectBox Êèê‰æõ‰∫ÜËØ≠‰πâÂåñÁöÑÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂(Multiversion concurrency control MVCC).Â§ö‰∏™Âπ∂ÂèëËØªÂèñ(ËØªÂèñ‰∫ãÂä°)ÂèØ‰ª•Á´ãÂç≥ÊâßË°åÔºåÊó†ÈúÄÈòªÂ°ûÊàñÁ≠âÂæÖ„ÄÇËøôÊòØÈÄöËøáÂ≠òÂÇ®Â§ö‰∏™ÁâàÊú¨ÁöÑÔºàÊèê‰∫§ÔºâÊï∞ÊçÆÊù•ÂÆûÁé∞ÁöÑ„ÄÇÂç≥‰æø‰∏Ä‰∏™ÂÜôÂÖ•‰∫ãÂä°Ê≠£Âú®ËøêË°åÔºåËØªÂèñ‰∫ãÂä°‰πüÂèØ‰ª•Á´ãÂç≥Ëé∑ÂèñÂà∞ÊúÄÊñ∞ÁöÑÂêåÊ≠•Áä∂ÊÄÅ„ÄÇÂÜôÂÖ•‰∫ãÂä°ÊåâÈ°∫Â∫èÊâßË°å‰ª•‰æøÁä∂ÊÄÅ‰∏ÄËá¥„ÄÇÊâÄ‰ª•‰øùËØÅÂÜôÂÖ•‰∫ãÂä°Áü≠Â∞èÂèØ‰ª•ÈÅøÂÖçÈòªÂ°ûÂÖ∂‰ªñÂÜôÂÖ•‰∫ãÂä°„ÄÇÂõ†Ê≠§Âú®‰∏Ä‰∏™ÂÜôÂÖ•‰∫ãÂä°‰∏≠ÊâßË°åÁΩëÁªúÊìç‰ΩúÊàñÂ§çÊùÇËÆ°ÁÆó‰∏çÊé®Ëçê„ÄÇÂ∞ΩÈáèÂú®ÂÜôÂÖ•‰∫ãÂä°ÂâçÂÆåÊàêËøô‰∫õÊìç‰Ωú„ÄÇ Ê≥®ÊÑè‰∏çÈúÄË¶ÅËá™Â∑±ÊâãÂä®Áª¥ÊåÅÂÜôÂÖ•‰∫ãÂä°Â∫èÂàó„ÄÇÂ¶ÇÊûúÂ§öÁ∫øÁ®ãÊÉ≥ÂêåÊó∂ÊâßË°åÂÜôÂÖ•‰∫ãÂä°(put,runInTx),Âêå‰∏ÄÊó∂ÂàªÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•ÊâßË°åÔºåÂÖ∂‰ªñÂøÖÈ°ªÁ≠âÂæÖ„ÄÇÁ±ª‰ºº Java ‰∏≠ÁöÑ lock Êàñ synchronized„ÄÇ Ê∑±ÂÖ•ÂÜôÂÖ•‰∫ãÂä°Â∞ΩÈáèÈÅøÂÖçÂú®ÂÜôÂÖ•‰∫ãÂä°‰∏≠‰ΩøÁî®ÈîÅ(synchronized Êàñ java.util.concurrent.locks).Âõ†‰∏∫ÂÜôÂÖ•‰∫ãÂä°ËøêË°åË¥πÊó∂ÔºåÊâÄ‰ª• ObjectBox ÂÜÖÈÉ®‰ºöËé∑Âèñ‰∏Ä‰∏™ÂÜôÂÖ•ÈîÅ„ÄÇÂΩìËÆæËÆ°Â§ö‰∏™ÈîÅÊó∂ÔºåËØ∑ÊèêÈ´òË≠¶ÊÉï„ÄÇÂßãÁªà‰ª•Áõ∏ÂêåÁöÑÈ°∫Â∫èËé∑ÂèñÈîÅÂèØ‰ª•ÈÅøÂÖçÊ≠ªÈîÅ„ÄÇÂ¶ÇÊûúÂú®‰∏Ä‰∏™‰∫ãÂä°Ëé∑Âèñ‰∫Ü X ÈîÅÔºåËØ∑‰øùËØÅ‰Ω†ÁöÑ‰ª£Á†ÅÂú®ÊåÅÊúâ X ÈîÅÊó∂Ê≤°ÊúâÂú®Âè¶Â§ñ‰∏Ä‰∏™ÂÜôÂÖ•‰∫ãÂä°‰∏≠ÊâßË°å.]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-11-Data Browser]]></title>
    <url>%2F2019%2F02%2F26%2FObjectBox%E5%85%A5%E9%97%A8-11-Data-Browser%2F</url>
    <content type="text"><![CDATA[Data Browser ÂÖ∑ÊúâÂ¶Ç‰∏ãÂäüËÉΩ: Êü•ÁúãÊï∞ÊçÆÂ∫ìÁöÑ entities Âíå schema ‰∏ãËΩΩ JSON Ê†ºÂºèÁöÑ entities ÈÖçÁΩÆ1234567dependencies &#123; debugImplementation "io.objectbox:objectbox-android-objectbrowser:$objectboxVersion" releaseImplementation "io.objectbox:objectbox-android:$objectboxVersion"&#125;// apply the plugin after the dependencies blockapply plugin: 'io.objectbox' ‰∏çËøôÊ†∑ËÆæÁΩÆÂèØËÉΩÂá∫Áé∞ Duplicate files copied in APK lib/armeabi-v7a/libobjectbox.so ËøôÊ†∑ÁöÑÈîôËØØ.Âõ†‰∏∫ ObjectBox Êèí‰ª∂ÂèàÊ∑ªÂä†‰∫Ü‰∏ÄÊ¨° objectbox-android Â∫ì Âú® AndroidManifest.xml Ê∑ªÂä†Â¶Ç‰∏ãÊùÉÈôê(2.2.0 ÂêéÈúÄË¶Å) 1234&lt;!-- Required to provide the web interface --&gt;&lt;uses-permission android:name="android.permission.INTERNET" /&gt;&lt;!-- Required to run keep-alive service when targeting API 28 or higher --&gt;&lt;uses-permission android:name="android.permission.FOREGROUND_SERVICE"/&gt; Âª∫ËÆÆÂú® Application Á±ª‰∏≠Ê∑ªÂä† 12345boxStore = MyObjectBox.builder().androidContext(this).build();if (BuildConfig.DEBUG) &#123; boolean started = new AndroidObjectBrowser(boxStore).start(this); Log.i("ObjectBrowser", "Started: " + started);&#125;]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-10-ÂÖ≥ËÅî]]></title>
    <url>%2F2019%2F02%2F25%2FObjectBox%E5%85%A5%E9%97%A8-10-%E5%85%B3%E8%81%94%2F</url>
    <content type="text"><![CDATA[Object ‰πãÈó¥ÁöÑÂÖ≥ËÅîÂÖ∑ÊúâÊñπÂêëÊÄß.ÂÖ≥ËÅîÊòØÂª∂ËøüÂàùÂßãÂåñÁöÑÔºöÂÆûÈôÖÁöÑÂºïÁî®ÂØπË±°Âè™ÊúâÂú®Ë∞ÉÁî®Êó∂Êâç‰ºö‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Âä†ËΩΩ„ÄÇ‰∏ÄÊó¶Âä†ËΩΩËøáÔºåÂ∞±‰ºöÁºìÂ≠òËµ∑Êù•. To-One ÂÖ≥ËÅî‰ΩøÁî® ToOne ‰ºöÊô∫ËÉΩÁöÑÂØπÁõÆÊ†áÂØπË±°ÂàõÂª∫ÂÖ≥ËÅî„ÄÇÂêåÊó∂Ëé∑ÂèñÁõÆÊ†áÂØπË±°ÁºìÂ≠ò„ÄÇ 12345678910111213141516// Customer.java@Entitypublic class Customer &#123; @Id public long id;&#125;// Order.java@Entitypublic class Order &#123; @Id public long id; public ToOne&lt;Customer&gt; customer;&#125;// ‰∏∫‰∫ÜÁªëÂÆö customer ÂØπË±°ÔºåÂØπ ToOne ÂÆû‰æãË∞ÉÁî® setTarget() ÁÑ∂ÂêéÂ∞±Â≠òÂÖ• order ÂØπË±°Customer customer = new Customer();Order order = new Order();order.customer.setTarget(customer);long orderId = boxStore.boxFor(Order.class).put(order); Â¶ÇÊûú customer Âú®Êï∞ÊçÆÂ∫ì‰∏≠‰∏çÂ≠òÂú®ÔºåToOne Â∞Ü‰ºöÂ≠òÂÇ®„ÄÇÂ¶ÇÊûúÂ∑≤ÁªèÂ≠òÂú®ÔºåÈÇ£‰πà ToOne Âè™‰ºöÂàõÂª∫ÂÖ≥ËÅî,‰∏ç‰ºöÂ≠òÂÇ®.Â¶ÇÊûúÂÖ≥ËÅî Entity ‰ΩøÁî®ÁöÑÊòØËá™ÂÆö‰πâ IDs(@Id(assignable = true)),ÂàôËØ• Entity ‰∏ç‰ºöË¢´Â≠òÂÇ®. Âú® ToOne ÂÆû‰æã‰∏≠ÔºåÂèØÈÄöËøá Order ÂØπË±°ÁöÑ getTarget() Ëé∑Âèñ customer 12Order order = boxStore.boxFor(Order.class).get(orderId);Customer customer = order.customer.getTarget(customer); Â¶ÇÊûúÂè™ÊòØÊÉ≥Ë¶ÅËé∑Âèñ ID ËÄå‰∏çÊòØÊï¥‰∏™ÁõÆÊ†áÂØπË±°ÔºågetTargetId() ÂÄºÂæóÊã•ÊúâÔºåÊ≠§ÊñπÊ≥ïÊ†πÊú¨‰∏ç‰ºöÊé•Ëß¶Êï∞ÊçÆÂ∫ìÔºåÊâÄ‰ª•È´òÊïà„ÄÇ ÁßªÈô§ÂÖ≥ËÅî: ‰ªÖÁßªÈô§ÂÖ≥ËÅîÂÖ≥Á≥ªÔºåËÄå‰∏ç‰ºö‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ÁßªÈô§ÁõÆÊ†áÂØπË±°„ÄÇ 12order.customer.setTarget(null);boxStore.boxFor(Order.class).put(order); Êü•Áúã objectbox-models/default.json ‰ºöÂèëÁé∞ÔºåToOne Â±ûÊÄßÊ†πÊú¨Ê≤°Êúâ‰øùÂ≠ò„ÄÇ‰ªÖ‰ªÖÂè™ÊòØÁõÆÊ†áÂØπË±°ÁöÑ ID ‰øùÂ≠òÂú®‰∏Ä‰∏™ÂêçÁß∞Âíå ToOne Â±ûÊÄßÂêéÊãºÊé• Id ÁöÑËôöÊãüÂ±ûÊÄß. ÂàùÂßãÂåñÈ≠îÊúØÊ≥®ÊÑèÂà∞ ToOne Â±ûÊÄß customer ‰ªéÊ≤°ÂàùÂßãÂåñÔºåÁÑ∂ËÄåË∞ÉÁî®Êó∂Âç¥‰∏ç‰ºöÊäõÂá∫Á©∫ÊåáÈíàÂºÇÂ∏∏„ÄÇÂõ†‰∏∫ËØ•ÂàùÂßãÂåñÂ∑≤ÁªèÊâßË°åËøá‰∫Ü„ÄÇObjectBox Êèí‰ª∂‰ºöÂØπ entity Á±ª(‰ªÖÊîØÊåÅÁ∫Ø Java È°πÁõÆÂíå Android È°πÁõÆ) Âú®Ë∞ÉÁî®ÂâçÊ≠£Á°ÆÁöÑÂàùÂßãÂåñ„ÄÇÊâÄ‰ª•Âú®Ëá™ÂÆö‰πâÊûÑÈÄ†ÊñπÊ≥ïÊó∂Ôºå‰Ω†ÂèØ‰ª•ÂÅáËÆæ ToOne/ToMany/List Â±ûÊÄßÂ∑≤ÁªèÂàùÂßãÂåñËøá‰∫Ü„ÄÇ 1234567891011121314@Entitypublic class Example &#123; ToOne&lt;Order&gt; order; ToMany&lt;Order&gt; orders; transient BoxStore __boxStore; public Example() &#123; // this.order = new ToOne&lt;&gt;(this, Example_.order); this.orders = new ToMany&lt;&gt;(this, Example_.orders); &#125; public Example(String value) &#123; this(); &#125;&#125; ÊèêÂçáÊÄßËÉΩ‰∏∫‰∫ÜÊèêÈ´òÊÄßËÉΩÔºåËØ∑Êèê‰æõÂÖ®ÂèÇÊï∞ÊûÑÈÄ†ÊñπÊ≥ï„ÄÇÂØπ‰∫é ToOne Â±ûÊÄßÔºåËØ∑Ê∑ªÂä†‰∏Ä‰∏™Âêç‰∏∫ ToOne Â±ûÊÄßÂêçÂä† Id ÁöÑ id ÂèÇÊï∞„ÄÇÂèØ‰ª•ÂèÇËÄÉ objectbox-models/default.json ÈáåÁöÑÂëΩÂêç. 12345678910@Entitypublic class Order &#123; @Id public long id; public ToOne&lt;Customer&gt; customer; public Order() &#123; /* default constructor */ &#125; public Order(long id, long customerId /* virtual ToOne id property */) &#123; this.id = id; this.customer.setTargetId(customerId); &#125;&#125; ToMany ÂÖ≥ËÅîÂèØ‰ª•‰ΩøÁî® List Êàñ ToMany Á±ªÂûãÂÆûÁé∞ ToMany ÂÖ≥ËÅî.Áõ∏ÂØπ ToOne Êù•ËØ¥ÔºåToMany ÂèØ‰ª•ÂÆûÁé∞ËøΩË∏™Êï∞ÊçÆÂèòÂåñÂπ∂Â∞ÜÂÖ∂ÂÜôÂÖ•Êìç‰Ωú‰∏≠ÔºåËÄå List ÂøÖÈ°ªËá™Â∑±ÂÆûÁé∞. 1:N ‰ΩøÁî® @Backlink Ê≥®Ëß£ 1:N ÂÖ≥ËÅîÂ±ûÊÄß„ÄÇ 123456789101112131415161718192021222324252627282930313233343536// Customer.java@Entitypublic class Customer &#123; @Id public long id; // 'to' is optional if only one relation matches @Backlink(to = "customer") public ToMany&lt;Order&gt; orders;&#125;// Order.java@Entitypublic class Order &#123; @Id public long id; public ToOne&lt;Customer&gt; customer;&#125;Customer customer = new Customer();customer.orders.add(new Order());customer.orders.add(new Order());long customerId = boxStore.boxFor(Customer.class).put(customer); // puts customer and ordersCustomer customer = boxStore.boxFor(Customer.class).get(customerId);for (Order order : customer.orders) &#123; // TODO&#125;Order order = customer.orders.remove(0);boxStore.boxFor(Customer.class).put(customer);// optional: also remove the order from its box// boxStore.boxFor(Order.class).remove(order); N:N 12345678910111213141516171819202122232425262728293031323334353637383940// Teacher.java@Entitypublic class Teacher&#123; @Id public long id;&#125;// Student.java@Entitypublic class Student&#123; @Id public long id; public ToMany&lt;Teacher&gt; teachers;&#125;Teacher teacher1 = new Teacher();Teacher teacher2 = new Teacher();Student student1 = new Student();student1.teachers.add(teacher1);student1.teachers.add(teacher2);Student student2 = new Student();student2.teachers.add(teacher2);// puts students and teachersboxStore.boxFor(Student.class).put(student1, student2);Student student1 = boxStore.boxFor(Student.class).get(student1.id);for (Teacher teacher : student1.teachers) &#123; // TODO&#125;student1.teachers.remove(0);// boxStore.boxFor(Student.class).put(student1);// more efficient than using put:student1.teachers.applyChangesToDb(); ‰∏äÈù¢ÂèØ‰ª•ÈÄöËøá student Áü•ÈÅì teacher ÁöÑ‰ø°ÊÅØÔºåÂΩìÁÑ∂ÂèØ‰ª•ÂèçËøáÊù• 1234567891011121314151617181920// Teacher.java@Entitypublic class Teacher&#123; @Id public long id; @Backlink(to = "teachers") // backed by the to-many relation in Student public ToMany&lt;Student&gt; students;&#125;// Student.java@Entitypublic class Student&#123; @Id public long id; public ToMany&lt;Teacher&gt; teachers;&#125; Êõ¥Êñ∞ÂÖ≥ËÅîToOne Âíå ToMany ÂèØ‰ª•ËøΩË∏™ÂèòÂåñÔºàÂè™Ë¶ÅÂ≠òÂÖ•Êã•ÊúâÂÖ≥ËÅîÂ±ûÊÄßÁöÑ entityÔºâÂπ∂Â∞ÜÂÖ∂Â≠òÂÖ•Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÂ¶ÇÊûú ID != 0 ÊàñËÄÖ @Id(assignable = true) ÈÇ£‰πàÂèØ‰ª•ÈÄöËøá Box Êù•Êõ¥Êñ∞ÂÖ≥ËÅî 1234567// update a related entity using its boxOrder orderToUpdate = customer.orders.get(0);orderToUpdate.text = "Revised description";// DOES NOT WORK// boxStore.boxFor(Customer.class).put(customer);// WORKSboxStore.boxFor(Order.class).put(orderToUpdate); Êõ¥Êñ∞ ToOneToOne Á±ªÊèê‰æõ‰∫ÜÂ¶Ç‰∏ãÊñπÊ≥ïÊõ¥Êñ∞ÂÖ≥ËÅî: setTarget(entity): ÂàõÂª∫ÂÖ≥ËÅîÔºõ‰º†ÂÖ• null Ê∏ÖÈô§ÂÖ≥ËÅî setTargetId(entityId): ÂØπÂ≠òÂú®ÁöÑÁõÆÊ†á entity ÂàõÂª∫ÂÖ≥ËÅîÔºõ‰º†ÂÖ• 0 Ê∏ÖÈô§ÂÖ≥ËÅî. setAndPutTarget(entity): 12order.customer.setTarget(customer); // or order.customer.setCustomerId(customer.getId());orderBox.put(order); Â¶ÇÊûú entity Âú®Ë∞ÉÁî® setAndPutTarget() ‰πãÂâçËøòÊ≤°Â≠òÂÇ®,ÈÇ£‰πàÈúÄË¶ÅÂÖàÁªëÂÆöÂÆÉÁöÑ box 123Order order = new Order(); // new entityorderBox.attach(order); // need to attach box firstorder.customer.setAndPutTarget(customer); Â¶ÇÊûúÁõÆÊ†á entity ‰ΩøÁî®Ëá™ÂÆö‰πâ IDs,ÂøÖÈ°ªÂú®Êõ¥Êñ∞ ToOne ÂÖ≥ËÅîÊó∂Â≠òÂÇ®ÂÆÉ 1234customer.id = 12; // self-assigned idcustomerBox.put(customer); // need to put customer firstorder.customer.setTarget(customer); // or order.customer.setCustomerId(customer.getId());orderBox.put(order); ËøôÊòØÂõ†‰∏∫ ObjectBox Âè™‰øùÂ≠ò id ‰∏∫ 0 ÁöÑÂÖ≥ËÅîÂØπË±°. Êõ¥Êñ∞ ToManyToMany ÂÆûÁé∞‰∫Ü java.lang.List Êé•Âè£„ÄÇÂ¶ÇÊûúÂêë ToMany ÂÆû‰æãÊ∑ªÂä†ÂØπË±°ÔºåËøô‰∫õÂØπË±°Â∞±‰ºöË¢´Â≠òÂÇ®ËøõÊï∞ÊçÆÂ∫ì„ÄÇÁßªÈô§‰πü‰∏ÄÊ†∑„ÄÇÔºà‰ªÖ‰ªÖÊòØÂÖ≥ËÅîË¢´ÁßªÈô§ËÄåÂ∑≤Ôºâ.‰∏çË¶ÅÂøòËÆ∞ÊääËøΩË∏™ ToMany ÊîπÂèòÁöÑ own entity ÂØπË±°Â≠òÂÇ®. 123customer.orders.add(order1);customer.orders.remove(order2);customerBox.put(customer); Â¶ÇÊûú‰ΩøÁî®Ëá™ÂÆö‰πâ IDs(@Id(assignable = true)) ËØ∑Âú®‰øÆÊîπ ToMany ÂâçÁªëÂÆöÂÆÉÁöÑ box 1234customer.id = 12; // self-assigned idcustomerBox.attach(customer); // need to attach box firstcustomer.orders.add(order);customerBox.put(customer); Â¶ÇÊûú entity ÊòØËá™ÂÆö‰πâ IDs,ÈÇ£‰πàÈúÄË¶ÅÂÖàÂ≠òÂÖ•ËØ• entity,ÁÑ∂ÂêéÂÜçÊõ¥Êñ∞ÂÖ≥ËÅîÂπ∂Â≠òÂÇ® own entity. 1234order.id = 42; // self-assigned idorderBox.put(order); // need to put order firstcustomer.orders.add(order);customerBox.put(customer); // put customer, add relation to order Ê†ëÂΩ¢ÂÖ≥ËÅîÂèØ‰ª•‰ΩøÁî® ToOne,ToMany Â§ÑÁêÜÊåáÂêëËá™Ë∫´ÁöÑÊ†ëÂΩ¢ÂÖ≥ËÅî 123456789@Entitypublic class TreeNode &#123; @Id long id; ToOne&lt;TreeNode&gt; parent; @BackLink ToMany&lt;TreeNode&gt; children;&#125; ÁîüÊàêÁöÑ entity ÂèØ‰ª•Ëé∑ÂèñÂÆÉÁöÑ parent Âíå children 12TreeNode parent = entity.parent.getTarget();List&lt;TreeNode&gt; children = entity.children;]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-9-ËÆ¢ÈòÖËßÇÂØü]]></title>
    <url>%2F2019%2F02%2F25%2FObjectBox%E5%85%A5%E9%97%A8-9-%E8%AE%A2%E9%98%85%E8%A7%82%E5%AF%9F%2F</url>
    <content type="text"><![CDATA[Data Observers, Reactive ExtensionsËÆ¢ÈòÖËßÇÂØüÊ®°ÂºèÔºåRx ÊîØÊåÅ 1234Query&lt;Task&gt; query = taskBox.query().equal(Task_.complete,false).build();query.subscribe(subscriptions) .on(AndroidScheduler.mainThread()) .observer(data -&gt; updateUi(data)); Data ObserversÂΩìÊï∞ÊçÆÊîπÂèòÊó∂ÔºåObjectBox ‰ºöÈÄöÁü•ÊâÄÊúâÁöÑËÆ¢ÈòÖËÄÖ.‰ªñ‰ª¨ÂèØ‰ª•ËÆ¢ÈòÖÁ°ÆÂÆöÁöÑÊï∞ÊçÆÁ±ªÂûã(ÈÄöËøá BoxStore)ÊàñÊü•ËØ¢ÁªìÊûúÈõÜ„ÄÇÂÆûÁé∞ io.objectbox.reactive.DataObserver Âç≥ÂèØÂàõÂª∫ËßÇÂØüËÄÖ 1234interface DataObserver&lt;T&gt; &#123; void onData(T data);&#125;| onData() ÂºÇÊ≠•Ë∞ÉÁî®Ôºå‰∏çÁî®ÂÖ≥ÂøÉÁ∫øÁ®ã ËÆ¢ÈòÖÊôÆÈÄöÊîπÂèò123456DataObserver&lt;Class&lt;Task&gt;&gt; taskObserver = new DataObserver&lt;Class&lt;Task&gt;&gt;() &#123; @Override public void onData(Class&lt;Note&gt; data)&#123;&#125;&#125;;boxStore.subscribe(Task.class).observer(taskObserver);| subscribe() ‰ºöÊé•ÂèóÊâÄÊúâÂèØÁî®ÁöÑÂØπË±°Á±ªÂûãÊîπÂèòÈÄöÁü•„ÄÇ ËÆ¢ÈòÖÊü•ËØ¢12Query&lt;Task&gt; query = taskBox.query().equal(Task_.completed, false).build();subscription = query.subscribe().observer(data -&gt; updateUi(data)); ÂèñÊ∂àËÆ¢ÈòÖÂΩìË∞ÉÁî® observer() Êó∂ÔºåËøîÂõû io.objectbox.reactive.DataSubscription 1234interface DataSubscription &#123; void cancel(); boolean isCanceled();&#125; 1234DataSubscription subscription = boxStore.subscribe().observer(myObserver);// At some later point:subscription.cancel(); ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÂª∫ËÆÆ‰ΩøÁî® DataSubscriptionList 123456789101112private DataSubscriptionList subscriptions = new DataSubscriptionList();protected void onStart() &#123; super.onStart(); Query&lt;X&gt; query = box.query()... .build(); query.subscribe(subscriptions)... .observe(...);&#125;protected void onStop() &#123; super.onStop(); subscriptions.cancel();&#125; ËÆ¢ÈòÖÔºå‰∫ãÂä°ÂΩì‰∫ãÂä°Êèê‰∫§Êó∂ÂèëÂá∫ËÆ¢ÈòÖÈÄöÁü•„ÄÇÂçïÁã¨Ë∞ÉÁî®box.put(),remove() ÔºåÈªòËÆ§ÁöÑ‰∫ãÂä°‰ºöÂºÄÂêØÊèê‰∫§„ÄÇ‰æãÂ¶ÇÂ¶Ç‰∏ãÂ∞ÜËß¶Âèë‰∏§Ê¨° User.class ÈÄöÁü•Ôºõ 12box.put(firendUser);box.put(myUser); ‰ΩøÁî® runInTx(),callInTx() ÂèØ‰ª•Â∞ÜÂ§ö‰∏™Êìç‰ΩúÂú®Âêå‰∏Ä‰∏™ÂçÅ‰∫î‰∏≠Êèê‰∫§.Â¶Ç‰∏äÂèØ‰ª•‰øÆÊîπ‰∏∫: 1box.put(friendUser,myUser); ÂìçÂ∫îÂºèÊâ©Â±ïÁ∫øÁ®ãÂàáÊç¢12Query&lt;Task&gt; query = taskBox.query().equal(Task_.complete, false).build();query.subscribe().on(AndroidScheduler.mainThread()).observer(data -&gt; updateUi(data)); ÂΩìÁÑ∂ÂèØ‰ª•‰ΩøÁî®Ëá™ÂÆö‰πâ Looper ÂàõÂª∫ AndroidScheduler,ÊàñËÄÖÂÆûÁé∞ io.objectbox.reactive.Scheduler Êü•ËØ¢Âú®ÂêéÂè∞Á∫øÁ®ãÊâßË°å DataTransformer ËøêË°åÂú®ÂêéÂè∞Á∫øÁ®ã DataObserver Âíå ErrorObserver ËøêË°åÂú®ÂêéÂè∞Á∫øÁ®ãÔºåÈô§ÈùûÈÄöËøá on() ÊåáÂÆö Êï∞ÊçÆËΩ¨Êç¢Â¶Ç‰ΩïËÆ¢ÈòÖÂÆûÈôÖÁöÑÂØπË±°Êï∞Èáè: 123boxStore.subscribe() .transform(clazz -&gt; return boxStore.boxFor(clazz).count()) .observer(count -&gt; updateCount(count)); ÂºÇÂ∏∏ËÆ¢ÈòÖtransformer ÂèØËÉΩÊäõÂá∫ÂêÑÁßçÂºÇÂ∏∏ÔºåDataObserver ÂèØËÉΩÊäõÂá∫ RuntimeException. 123public interface ErrorObserver &#123; void onError(Throwable th);&#125; Âú® subscribe() ÂêéË∞ÉÁî® onError() Âç≥ÂèØ. ‰∏ÄÊ¨°ÈÄöÁü• vs. ÊîπÂèòÂç≥ÈÄöÁü•ÂΩìËÆ¢ÈòÖ query ÂêéÔºåDataObserver ÂÖ∑ÊúâÂ¶Ç‰∏ãË°å‰∏∫Ôºö ÂàùÂßãÂåñÊü•ËØ¢ÁªìÊûú(Â∞±Âú®ËÆ¢ÈòÖÂêé) Êõ¥Êñ∞Êü•ËØ¢ÁªìÊûú(Âú®Êï∞ÊçÆÊîπÂèòÂêé) ÊúâÊó∂ÂÄô‰ªÖÂØπÂÖ∂‰∏≠‰∏ÄÁßçË°å‰∏∫ÊÑüÂÖ¥Ë∂£.single() Âíå onlyChange() Â∫îËøêËÄåÁîü(Âú® subscribe() ÂêéË∞ÉÁî®)single() Âè™ÂìçÂ∫î‰∏ÄÊ¨°ÈÄöÁü•Âç≥Ëá™Âä®ÂèñÊ∂à„ÄÇ Âº±ÂºïÁî®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºå‰∏∫‰∫ÜÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÈú≤ÔºåÈÄöÂ∏∏Â∞ΩÂèØËÉΩÂú®‰∏çÈúÄË¶ÅÁöÑÊó∂ÂÄôÂèñÊ∂àËÆ¢ÈòÖ„ÄÇÂΩìÁÑ∂Ôºå‰Ω†‰∏çÂú®‰πéÁöÑËØùÔºåÂú® subscribe() ÂêéË∞ÉÁî® weak() ‰πüÂèØ‰ª•. ObjectBox RxJava Êâ©Â±ïÂ∫ì1implementation "io.objectbox:objectbox-rxjava:$objectboxVersion"]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-8-Êü•ËØ¢]]></title>
    <url>%2F2019%2F02%2F24%2FObjectBox%E5%85%A5%E9%97%A8-8-%E6%9F%A5%E8%AF%A2%2F</url>
    <content type="text"><![CDATA[Queries ‰ΩøÁî® QueryBuilder ÂÆö‰πâÊü•ËØ¢Ê†áÂáÜÔºåQuery Á±ªËøêË°åÊü•ËØ¢Âπ∂ËøîÂõûÂåπÈÖçÁªìÊûú QueryBuilder QueryBuilder ‰ΩøÁî®ÁºñËØëÁîüÊàêÁöÑÂÖÉ‰ø°ÊÅØÁ±ªÊù•ÊåáÂÆöË¶ÅÂåπÈÖçÁöÑÂ±ûÊÄßÂÄº„ÄÇ 1234567List&lt;user&gt; joes = userBox.query().equal(User_.firstName,"Joe").build().find();QueryBuilder&lt;User&gt; builder = userBox.query();builder.equal(User_.firstName,"Joe") .greater(User_.yearOfBirth,1970) .startsWith(User_.lastName,"O");List&lt;User&gt; youngJoes = builder.build().find(); ËæπÁïåÊù°‰ª∂ equal(),notEqual(),greater(),less() isNull(),notNull() between() in(),notIn() startsWith(),endsWith(),contains() and(),or() ÊéíÂ∫è1234567userBox.query().equal(User_.firstName,"Joe") .order(User_.lastName) // ÂçáÂ∫èÊéíÂàó,ÂøΩÁï•Â§ßÂ∞èÂÜô .find();userBox.query().equal(User_.firstName,"Joe") .order(User_.lastName,QueryBuilder.DESCENDING | QueryBuilder.CASE_SENSITIVE) .find(); Query1234567Query&lt;User&gt; query = builder. build();// ËøîÂõûÊâÄÊúâÂåπÈÖçÁöÑÂØπË±°List&lt;User&gt; joes = query.find();// ËøîÂõûÁ¨¨‰∏Ä‰∏™ÂåπÈÖçÁöÑÂØπË±°ÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ËøîÂõû nullUser joe = query.findFirst();// ËøîÂõûÂîØ‰∏Ä‰∏Ä‰∏™ÂåπÈÖçÁöÑÂØπË±°ÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®ËøîÂõû null,Â¶ÇÊûúÊúâÂ§ö‰∏™ÂÄºÊäõÂá∫ÂºÇÂ∏∏User joe = query.findUnique(); Â¶ÇÊûúÊòØ‰∏çÊñ≠ÁöÑÊâßË°å Query,ÈÇ£‰πàÂ∫îËØ•ÁºìÂ≠ò Query ÂØπË±°ÔºåÈáçÂ§ç‰ΩøÁî®„ÄÇ‰∏∫‰∫ÜÂ§çÁî® Query ÂØπË±°ÔºåÂèØ‰ª•ÊîπÂèòÂÆÉÁöÑÂ±ûÊÄßÂÄºÔºåÊàñÊü•ËØ¢ÂèÇÊï∞ÔºåÊàñÊ∑ªÂä†ÁöÑÂêÑÁßçËæπÁïåÊù°‰ª∂„ÄÇ 12345// ÂÅáËÆæÂ∑≤ÁªèÊûÑÂª∫‰∫Ü‰∏Ä‰∏™ Query ÂØπË±°Ôºå‰ΩÜÊòØ‰∏∫‰∫ÜÂêéÈù¢Â§çÁî®ÔºåÊ≠§Â§Ñ equal ËæπÁïåÊù°‰ª∂ÁöÑÂÄºËÆæÁΩÆ‰∏∫ ""Query&lt;User&gt; query = userBox.query().equal(User_.firstName,"").build();// Êé•‰∏ãÊù•ÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÊÉÖÂÜµÊîπÂèòÂèÇÊï∞ÂÄºList&lt;User&gt; joes = query.setParameter(User_.firstName,"Joe").find();List&lt;User&gt; jakes = query.setParameter(User_.firstName,"Jake").find(); Â¶ÇÊûúÊòØÂ§ö‰∏™ËæπÁïåÊù°‰ª∂ÔºåÂèØ‰ª•Âú®ËæπÁïåÊù°‰ª∂ÂêéÁªôÊØè‰∏Ä‰∏™ÂèÇÊï∞ËÆæÁΩÆ‰∏Ä‰∏™Âà´Âêç 1234// Áªô equal() Êü•ËØ¢ÂèÇÊï∞ËÆæÁΩÆ name Âà´ÂêçQuery&lt;User&gt; query = userBox.query().equal(User_.firstName,"").parameterAlias("name");// ÁÑ∂ÂêéÂèØ‰ª•‰º†ÂÖ•ÈîÆÂÄºÂØπÊù•‰ª£ÊõøÂ±ûÊÄßList&lt;User&gt; joes = query.setParameter("name","Joe").find(); Limit,Offset,Pagination12Query&lt;User&gt; query = userBox.query().equal(User_.firstName,"Joe").build();List&lt;User&gt; joes = query.find(/*offset*/10,/*limit*/5,/*results*/); Âª∂ËøüÂä†ËΩΩ findLazy(),findLazyCached() ËøîÂõû LazyList Êü•ËØ¢ÁªìÊûú„ÄÇ LazyList ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºå‰∏çÂèØ‰øÆÊîπÁöÑÂè™ËØª list,Âè™ÊúâÂú®ËÆøÈóÆÊó∂Êâç‰ºöÂä†ËΩΩÊï∞ÊçÆ„ÄÇÁºìÂ≠ò LazyList ÂèØ‰ª•‰øùÁïô‰πãÂâçËÆøÈóÆËøáÁöÑÊï∞ÊçÆ‰ª•ÈÅøÂÖçÈáçÂ§çÂä†ËΩΩ„ÄÇ Âà†Èô§query.remove() Âà†Èô§ÊâÄÊúâÂåπÈÖçÁöÑÁªìÊûú Â±ûÊÄßÊü•ËØ¢Â¶ÇÊûúÂè™ÊÉ≥ËøîÂõûÊüê‰∏™ÊåáÂÆöÂ±ûÊÄßÁöÑÂÄºËÄå‰∏çÊòØÂåπÈÖçÁöÑÂÖ®ÈÉ®ÂØπË±°ÂàóË°®ÔºåÈÇ£‰πàËØ∑‰ΩøÁî® PropertyQuery.Âú®ÊûÑÂª∫ query ÂêéË∞ÉÁî® property(Property) Âç≥ÂèØ 123String[] emails = userBox.query().build() .property(User_.mail) .findStrings(); findString() ËøîÂõûÁ¨¨‰∏ÄÊù°ÁªìÊûúÔºåfindStrings() ËøîÂõûÊâÄÊúâÁªìÊûú ËøîÂõûÁöÑÊòØÊ≤°ÊúâÊéíÂ∫èÁöÑÁªìÊûúÔºåÂç≥‰ΩøÂú®ÊûÑÂª∫ query Êó∂ÊåáÂÆö‰∫ÜÊéíÂ∫èËßÑÂàô. Â§ÑÁêÜ null ÂÄºÈªòËÆ§‰∏çËøîÂõû null ÂÄº„ÄÇÂ¶ÇÊûúÂ±ûÊÄß‰∏∫ nullÔºåÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™Êõø‰ª£ËøîÂõûÂÄº 12345// Â¶ÇÊûú email ‰∏∫ null,ËøîÂõû unknownString[] emails = userBox.query() .property(UserBox_.mail) .nullValue("unknown") .findStrings(); distinctÔºåunique12345// ËøîÂõû ‚Äòjoe'String[] names = userBox.query() .property(User_.firstName) .distinct() .findStrings(); ÈªòËÆ§ strings ÂøΩÁï•Â§ßÂ∞èÂÜô„ÄÇÂΩìÁÑ∂ÂèØ‰ª•ÂÆöÂà∂ 12345// ËøîÂõû 'joe' 'Joe' 'JOE'String[] names = userBox.query() .property(User_.firstName) .distinct(StringOrder.CASE_SENSITIVE) .findStrings(); Âè™Êü•ËØ¢‰∏Ä‰∏™ÂÄºÔºåÊ≤°ÊúâÂàôÊäõÂá∫ÂºÇÂ∏∏ 1234String[] names = userBox.query().build().equal(User_.isAdmin, true) .property(User_.firstName) .unique() .findStrings(); distinct Âíå unique ÂèØ‰ª•ÁªÑÂêà ÁªüËÆ°Â±ûÊÄßÊü•ËØ¢ÂêåÊó∂Êèê‰æõ‰∫ÜÁªüËÆ°ÂáΩÊï∞„ÄÇ min(),minDouble() max(),maxDouble() sum,sumDouble(): sum() ÂèØËÉΩÊ∫¢Âá∫Âπ∂ÊäõÂá∫ÂºÇÂ∏∏ avg(): ËøîÂõû double count(): ÊØîÊü•ËØ¢Âà∞ÂØπË±°ÂàóË°®ÁÑ∂ÂêéÊ±ÇÂàóË°®ÈïøÂ∫¶Ë¶ÅÂø´„ÄÇÂèØ‰ª•Âíå distinct() ÁªÑÂêà ‰∏∫ÂÖ≥ËÅîÂ±ûÊÄßÊ∑ªÂä†Êü•ËØ¢Êù°‰ª∂ÂàõÂª∫ÂÖ≥ËÅîÂ±ûÊÄßÂêéÔºåÂèØËÉΩÊÉ≥‰∏∫Âè™Â≠òÂú®‰∫éÂÖ≥ËÅî entity ÁöÑÂ±ûÊÄßÊ∑ªÂä†Êü•ËØ¢Êù°‰ª∂„ÄÇSQL ‰∏≠‰ΩøÁî® JOIN. 12345678910111213@Entityclass Person &#123; @Id var id: Long = 0 var name: String? = null lateinit var address: ToManay&lt;Address&gt;&#125;@Entityclass Address &#123; @Id var id: Long = 0 var street: String? = null var zip: String? = null&#125; Êü•ËØ¢‰ΩèÂú®ÊåáÂÆöË°óÈÅì(Address)ÁöÑ xxx(Person)„ÄÇÂèØ‰ª•‰ΩøÁî®link(RelationInfo 12345// Ëé∑ÂèñÊâÄÊúâÂêç‰∏∫ elmo ÁöÑÂØπË±°val builder = box.query().equal(Person_.name,"Elmo");// ‰ΩèÂú® Sesame Ë°óÈÅìbuilder.link(Person_.address).equal(Address_.street,"Sesame Street");val elmosOnSesameStreet = builder.build().find() Â¶ÇÊûúÊÉ≥Ëé∑ÂèñÂà∞ Address ÂàóË°®Âë¢ÔºüÈÇ£‰πàÂèØ‰ª•Âú® Address ‰∏≠Ê∑ªÂä† @Backlint Ê≥®Ëß£ 1234567891011@Entityclass Address &#123; // ... @Backlint(to = "addresses") lateinit var persons: ToMany&lt;Person&gt;&#125;// Ëé∑ÂèñÊâÄÊúâ Sesame Ë°óÈÅìÂØπË±°val builder = box.query().equal(Address_.street,"Sesame Street");// Âêç‰∏∫ elmobuilder.link(Address_.persons).equal(Person_.name,"Elmo");val sesameStreetsWithElmo = builder.build().find(); ÂΩìÁÑ∂Ôºå‰πüÂèØ‰ª•‰∏çÁî®‰øÆÊîπ Address,‰ΩøÁî® backlink(RelationInfo) Âç≥ÂèØÂÆûÁé∞Êü•ËØ¢ 123val builder = box.query().equal(Address_.street,"Sesame Street");builder.backlink(Person_.address).equal(Person_.name,"Elmo");val sesameStreetWithElmos = builder.build().find(); ÂÖ≥Á≥ªÂ±ûÊÄßÁöÑÊøÄËøõÂä†ËΩΩÈªòËÆ§ÂÖ≥Á≥ªÂ±ûÊÄßÊòØÊáíÂä†ËΩΩÁöÑ„ÄÇÁ¨¨‰∏ÄÊ¨°ËÆøÈóÆ ToOne ,ToMany Â±ûÊÄßÊó∂‰ºöÂà∞Êï∞ÊçÆÂ∫ì‰∏≠Êü•ËØ¢Êï∞ÊçÆÔºåÁÑ∂ÂêéÈÉΩ‰ºö‰ΩøÁî®ÁºìÂ≠òËøáÁöÑÊï∞ÊçÆ„ÄÇ 12val customers = customerBox.query().build().find()customers[0].orders[0]; // Á¨¨‰∏ÄÊ¨°ËÆøÈóÆËß¶ÂèëÊï∞ÊçÆÂ∫ìÊü•ËØ¢ Â¶ÇÊûúÊÉ≥Âú®Êü•ËØ¢ÁªìÊûúËøîÂõûÊó∂ÂÆûÁé∞È¢ÑËØªÂèñ ToOne,ToMany Êï∞ÊçÆ,ËØ∑‰ΩøÁî® QueryBuilder.eager 1234val customers = customerBox.query() .eager(Customer_.orders) .build() .find(); eager Âä†ËΩΩ‰ªÖÊîØÊåÅ‰∏ÄÂ±ÇÊ∑±Â∫¶„ÄÇÂ¶ÇÊûúÊúâÂµåÂ•óÁöÑÂÖ≥ËÅîÂ±ÇÁ∫ßÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑ query filter ÂÆûÁé∞„ÄÇ query filtersÂ∫îÁî®‰∫éÂ§çÊùÇÁöÑËæπÁïåÊù°‰ª∂ÔºåQueryBuilder Á±ª‰∏çËÉΩÂÆûÁé∞„ÄÇ‰ΩøÁî®Â¶Ç‰∏ãËßÑÂàôÂ∞Ü‰ºöÈùûÂ∏∏È´òÊïàÔºö ‰ΩøÁî®Ê†áÂáÜÁöÑÊï∞ÊçÆÂ∫ìËæπÁïåÊù°‰ª∂Áº©Â∞èÁõÆÊ†áËåÉÂõ¥„ÄÇ(‰ΩøÁî® QueryBuilder Ëé∑ÂèñÁõÆÊ†á) ÁÑ∂Âêé‰ΩøÁî® QueryFilter ËøáÊª§QueryFilter ‰∏ÄÊ¨°Ê£ÄÊü•‰∏Ä‰∏™ÁõÆÊ†áÂØπË±°ÔºåÁ¨¶ÂêàËøîÂõû true 12345// Áº©Â∞èËåÉÂõ¥songBox.query().equal(Song_.bandId,bandId) .filter((song) -&gt; &#123; return song.starCount * 2 &gt; song.downloads; &#125;); ÂÖ≥Ê≥®‰∏Ä‰∏ãÊÄßËÉΩ: ObjectBox ÂàõÂª∫ÂØπË±°ÈùûÂ∏∏Âø´ ËôöÊãüÊú∫‰ºöÂõûÊî∂Áü≠ÊúüÂØπË±°„ÄÇÊ≠§Â§ÑÂõûÊî∂Â∞ÜÊØîÂàõÂª∫Âø´ÔºåÊâÄ‰ª•ÊÄßËÉΩ‰∏çÊòØÈóÆÈ¢ò„ÄÇ query filters Âíå ToManyToMany Êèê‰æõ‰∫ÜÂæàÂ§öÂáΩÊï∞ÂèØ‰ª•Êñπ‰æøÁöÑËΩ¨‰∏∫ query filters: hasA hasAll getById]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-7-kotlinÊîØÊåÅ]]></title>
    <url>%2F2019%2F02%2F24%2FObjectBox%E5%85%A5%E9%97%A8-7-kotlin%E6%94%AF%E6%8C%81%2F</url>
    <content type="text"><![CDATA[Kotlin ÊîØÊåÅkotlin Entity Âú® kotlin ‰∏≠ÔºåID Â±ûÊÄßÂ∫îËØ•ËøôÊ†∑ÂÆö‰πâ @Id var id: Long = 0.ID ÂøÖÈ°ªÊòØ var. ÊûÑÈÄ†Âô® ObjectBox ‰ºòÂÖàË∞ÉÁî®ÂÖ®ÂèÇÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇÂ¶ÇÊûúËá™ÂÆö‰πâÂ±ûÊÄßÊàñ transient Â±ûÊÄß ÊàñÂÖ≥ËÅîÂ±ûÊÄßÊòØÊûÑÈÄ†ÊñπÊ≥ïÁöÑ‰∏ÄÈÉ®ÂàÜÂèÇÊï∞ÔºåObjectBox Â∞Ü‰∏ç‰ºöË∞ÉÁî®Ê≠§ÊûÑÈÄ†ÊñπÊ≥ï.ÊâÄ‰ª•Â∫îËØ•Êèê‰æõ‰∏∫Ëøô‰∫õÂèÇÊï∞Êèê‰æõÈªòËÆ§ÂÄº‰ª•Á°Æ‰øùÊó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÂ≠òÂú®„ÄÇ 1234567@Entitydata class Note( @Id var id: Long = 0, val text: String = "", @Convert( converter = StringsConverter::class, dbType = String::class) val strings: List&lt;String&gt; = listOf()) kotlin Entity ‰∏≠ÂÆö‰πâÂÖ≥ËÅîÂ±ûÊÄßÂú® kotlin ‰∏≠ÂÆö‰πâÂÖ≥ËÅîÂ±ûÊÄßÂèØËÉΩÊØîËæÉÈ∫ªÁÉ¶„ÄÇ‰ΩÜËØ∑Ê≥®ÊÑèÔºöÂÖ≥ËÅîÂ±ûÊÄßÂøÖÈ°ª‰∏∫ var. Âê¶Âàô initialization magic Â∞Ü‰∏çËµ∑‰ΩúÁî®.ÈÄöÂ∏∏ÂèØ‰ª•‰ΩøÁî® lateinit ‰øÆÈ•∞ÂÖ≥ËÅîÂ±ûÊÄß 123456789101112@Entityclass Order &#123; @Id var id: Long = 0 lateinit var customer: ToOne&lt;Customer&gt;&#125;@Entityclass Customer &#123; @Id var id: Long = 0 @Backlink( to = "customer") latelinit var orders: List&lt;Order&gt;&#125; kotlin Êâ©Â±ïÂáΩÊï∞123dependencies &#123; implementation "io.objectbox:objectbox-kotlin:$objectboxVersion"&#125; kotlin 12345678910111213val box: Box&lt;DataClassEntity&gt; = store.boxFor()val query = box.query &#123; equal(property,value) order(property)&#125;val query = box.query().inValues(property,array).build()toMany.applyChangesToDb(resetFirst = true) &#123; // ÈªòËÆ§ false add(entity) removeById(id)&#125;]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-6-JavaÊ°åÈù¢Â∫îÁî®.md]]></title>
    <url>%2F2019%2F02%2F24%2FObjectBox%E5%85%A5%E9%97%A8-6-Java%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8%2F</url>
    <content type="text"><![CDATA[Java Ê°åÈù¢Â∫îÁî®ÂµåÂÖ•ÂºèÊï∞ÊçÆÂ∫ìObjectBox ‰∏ç‰ªÖ‰ªÖÈÄÇÁî®‰∫é Android È°πÁõÆÔºåÂêåÊó∂‰πüÈÄÇÁî®‰∫éËøêË°åÂú® Windows Linux macOS ‰∏äÁöÑÁ∫Ø Java(JVM) Ê°åÈù¢Â∫îÁî®. ÈÖçÁΩÆËØ∑‰ΩøÁî® Gradle ‰Ωú‰∏∫ÊûÑÂª∫Â∑•ÂÖ∑ÔºåÂõ†‰∏∫ ObjectBox ‰ΩøÁî®‰∫Ü Gradle Êèí‰ª∂. 1234567891011121314151617buildscript &#123; ext.objectboxVersion = '2.3.3' repositories &#123; jcenter() maven&#123; url "https://plugins.gradle.org/m2/"&#125; &#125; dependencies &#123; classpath "net.ltgt.gradle:gradle-apt-plugin:0.20" classpath "io.objectbox:objectbox-gradle-plugin:$objectboxVersion" &#125;&#125;repositories &#123; jcenter()&#125;apply plugin: 'java'apply plugin: 'net.ltgt.apt-idea' // Ê≥®Ëß£Â§ÑÁêÜÂô®Êèí‰ª∂apply plugin: 'io.objectbox' Native Â∫ìObjectBox ÊòØÁî± C/C++ÂÜôÊàêÁöÑÂèØ‰ª•ËøêË°åÂ§ßÂ§öÊï∞ native code ÁöÑÂØπË±°Êï∞ÊçÆÂ∫ì„ÄÇ ÊîπÂèò Model Êñá‰ª∂‰ΩçÁΩÆÈªòËÆ§ model Êñá‰ª∂Â≠òÂÇ®Âú® module-name/objectbox-models/default.json.ÂèØ‰ª•ÈÄöËøá‰øÆÊîπ objectbox.modelPath Êù•ÊîπÂèò 1234// Âú®È°πÁõÆ build.gradle Êñá‰ª∂Ôºå apply plugin: 'java' ‰πãÂêéÊ∑ªÂä†tasks.withType(JavaCompile) &#123; options.compilerArgs += ["-Aobjectbox.modelPath=$projectDir/schemas/object.json]&#125; ÊîπÂèò MyObjectBox ÂåÖÂêç123tasks.withType(JavaCompile) &#123; options.compilerArgs += [ "-Aobjectbox.modelPath=$projectDir/schemas/objectbox.json" ]&#125; ÂºÄÂêØ debug Ê®°Âºè12345678// enable debug output for pluginobjectbox &#123; debug true&#125;// enable debug output for annotation processortasks.withType(JavaCompile) &#123; options.compilerArgs += [ "-Aobjectbox.debug=true" ]&#125; ÂèØ‰ª•‰ΩøÁî® BoxStore builder ÁöÑ name(String) Êù•ÊîπÂèòÊï∞ÊçÆÂ∫ìÂ≠òÂÇ®ÁöÑ‰ΩçÁΩÆ„ÄÇÂçïÂÖÉÊµãËØïÊ∑ªÂä† junit 4 Â∫ì]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-5-LiveData]]></title>
    <url>%2F2019%2F02%2F24%2FObjectBox%E5%85%A5%E9%97%A8-5-LiveData%2F</url>
    <content type="text"><![CDATA[LiveData (Arch.Comp.)‰ªé 1.2.0 ÂºÄÂßãÊîØÊåÅ Android Architecture ComponentsObjectBox Êèê‰æõ ObjectBoxLiveData ÂèØ‰ª•Âú® ViewModel ‰∏≠‰ΩøÁî® 1234567891011public class NoteViewModel extends ViewModel &#123; private ObjectBoxLiveData&lt;Note&gt; noteLiveData; public ObjectBoxLiveData&lt;Note&gt; getNoteLiveData(Box&lt;Note&gt; notesBox) &#123; if (noteLiveData == null) &#123; // Êü•ËØ¢ÊâÄÊúâÁöÑ notes, text Êåâ a-z ÁöÑÈ°∫Â∫èÊéíÂàó noteLiveData = new ObjectBoxLiveData(notesBox.query().order(Note_.text).build()); &#125; return noteLiveData; &#125;&#125; ‰∏ä‰∏ÄÁßçÊñπÊ≥ïÈúÄË¶Å‰º†ÂÖ• Box.ÂèØ‰ª•‰ΩøÁî® AndroidViewModel ‰ª£ÊõøÔºåÂÆÉÂèØ‰ª•ËÆøÈóÆ Application context,ÁÑ∂Âêé‰ºöÂú® ViewModel ‰∏≠Ë∞ÉÁî® ((App)getApplication()).getBoxStore().boxFor().Á¨¨‰∏ÄÁßçÁöÑ‰ºòÂäøÂú®‰∫éÊ≤°ÊúâÂºïÁî® Android Á±ªÔºåÊâÄ‰ª•ÂèØ‰ª•ËøõË°åÂçïÂÖÉÊµãËØï„ÄÇ 1234567NoteViewModel model = ViewModelProviders.of(this).get(NoteViewModel.class);model.getNoteLiveData(notesBox).observe(this,new Observer&lt;List&lt;Note&gt;&gt;&#123; @Override public void onChanged(@Nullable List&lt;Node&gt; notes) &#123; notesAdapter.setNotes(notes); &#125;&#125;) Paging (Arch.Comp.)‰ªé 2.0.0 ÂºÄÂßãÊîØÊåÅ.ObjectBox Êèê‰æõ‰∫Ü ObjectBoxDataSource Á±ª.ÂÆÉÁªßÊâø‰∫Ü paging Â∫ìÁöÑ PositionalDataSourceÂú® ViewModel ‰∏≠ÔºåÁ±ª‰ººÂàõÂª∫ LiveData,ÂÖàÂàõÂª∫ ObjectBox query.ÁÑ∂ÂêéÊûÑÈÄ†Âπ∂‰ΩøÁî® ObjectBoxDataSource Â∑•ÂéÇ‰ª£Êõø LiveData. 1234567891011121314public class NotePageViewModel extends ViewModel &#123; private LiveData&lt;PagedList&lt;Note&gt;&gt; noteLiveDataPaged; public LiveData&lt;PagedList&lt;Note&gt;&gt; getNoteLiveDataPaged(Box&lt;Note&gt; notesBox) &#123; if(noteLiveDataPaged == null) &#123; Query&lt;Note&gt; query = notesBox.query().order(Note_.text).build(); noteLiveDataPaged = new LivePagedListBuilder( new ObjectBoxDataSource.Factory(query), 20 // È°µÊï∞ ).build(); &#125; return noteLiveDataPaged; &#125;&#125;]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-4-Êú¨Âú∞ÂçïÂÖÉÊµãËØï]]></title>
    <url>%2F2019%2F02%2F24%2FObjectBox%E5%85%A5%E9%97%A8-4-%E6%9C%AC%E5%9C%B0%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%2F</url>
    <content type="text"><![CDATA[ÂÆâÂçìÊú¨Âú∞ÂçïÂÖÉÊµãËØïËÆæÁΩÆÊµãËØïÁéØÂ¢É| Ê≠§ÈÖçÁΩÆ‰ªÖÈíàÂØπ ObjectBox 1.4 Âèä‰πãÂâçÁâàÊú¨.Êñ∞ÁâàÊú¨Â∑≤ÁªèËá™Âä®Ê∑ªÂä†‰∫Ü native ObjectBox ‰æùËµñÂ∫ì„ÄÇ 123456789// /app/build.gradledepdendencies &#123; // ÂøÖÂ§á JUnit 4 testImplementation 'junit:unit:4.12' // ÊâãÂä®Ê∑ªÂä†Âπ≥Âè∞Áã¨Á´ãÁöÑ native Objectbox ‰æùËµñÂ∫ì.(ÂèØÈÄâ) testImplementation "io.objectbox:objectbox-linux:$objectboxVersion" testImplementation "io.objectbox:objectbox-macos:$objectboxVersion" testImplementation "io.objectbox:objectbox-windows:$objectboxVersion"&#125; | Êú¨Âú∞ÂçïÂÖÉÊµãËØï‰ªÖÊîØÊåÅ 64 ‰ΩçÁ≥ªÁªü.| windows ÂèØËÉΩÈúÄË¶ÅÂÆâË£Ö Microsoft Visual C++ 2015 Redistributable(x64) ÂàõÂª∫Êú¨Âú∞ÂçïÂÖÉÊµãËØïÁ±ª ÂèØ‰ª•‰ΩøÁî® BoxStore builder ÁöÑdirectory(File) ÊåáÂÆöÊï∞ÊçÆÂ∫ì‰øùÂ≠òÂú®Êú¨Âú∞ËÆæÂ§á‰∏ä„ÄÇ ‰∏∫‰øùËØÅÊï∞ÊçÆ‰∏ç‰∫§ÂèâÊ±°ÊüìÔºåÂèØ‰ª•‰ΩøÁî® BoxStore.deleteAllFiles(File) Âà†Èô§Â∑≤ÁªèÂ≠òÂú®ÁöÑÊï∞ÊçÆÂ∫ì 12345678910111213141516171819202122232425262728293031public class NoteTest &#123; private static final File TEST_DIR = new File("objectbox-example/test-db"); private BoxStore store; @Before public void setUp() throws Exception &#123; // Âà†Èô§‰πãÂâçÁöÑÊï∞ÊçÆÂ∫ì BoxStore.deleteAllFiles(TEST_DIR); store = MyObjectBox.builder() // ÊåáÂÆöÊï∞ÊçÆÂ∫ìÂ≠òÊîæË∑ØÂæÑ .directory(TEST_DIR) // Ê∑ªÂä† debug Ê†áËÆ∞ÊâìÂç∞Êó•Âøó .debugFlags(DebugFlags.LOG_QUERIES | DebugFlags.LOG_QUERY_PARAMETERS) .build(); &#125; @After public void tearDown() throws Exception &#123; if (store != null) &#123; store.close(); store = null &#125; BoxStore.deleteAllFiles(TEST_DIR); &#125; @Test public void exampleTest() &#123; Box&lt;Note&gt; noteBox = store.boxFor(Note.class); assertEquals(...); &#125;&#125; ÂÖ≥Á≥ªÊµãËØï ObjectBox 1.4.4 Âèä‰πãÂêé ‰∏∫‰∫ÜÊµãËØïÂÖ∑Êúâ ToOne,ToMany Â±ûÊÄßÁöÑ entity,ÂøÖÈ°ªÂú®Êú¨Âú∞ JVM ÂàùÂßãÂåñ entity Âπ∂‰∏îÊ∑ªÂä†‰∏Ä‰∏™ transient ÁöÑ BoxStore Â±ûÊÄß.]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-3-Ê≥®Ëß£]]></title>
    <url>%2F2019%2F02%2F24%2FObjectBox%E5%85%A5%E9%97%A8-3-%E6%B3%A8%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[Entity Ê≥®Ëß£entity Êï∞ÊçÆÂèØËÆøÈóÆ ObjectBox ÈúÄË¶ÅËÆøÈóÆ entity ÁöÑÂ±ûÊÄß(ÁîüÊàê Cursor Á±ª). Â±ûÊÄßÂåÖÂÜÖÂèØËßÅ„ÄÇkotlin ‰∏≠‰ΩøÁî® JvmField Êèê‰æõÊ†áÂáÜ getters ‰∏∫‰∫ÜÊèêÂçáÊÄßËÉΩÔºåËØ∑Êèê‰æõÂÖ∑ÊúâÂÖ®ÈÉ®Â±ûÊÄßÁöÑÊûÑÈÄ†ÊñπÊ≥ï 123456789101112@Entitypublic class User &#123; @Id private long id; private String name; @Transient private int tempUsageCount; public User()&#123;/* ÈªòËÆ§ÊûÑÈÄ†ÊñπÊ≥ï */&#125; public User(id,name)&#123; this.id = id; this.name = name; &#125; // getters and setters for properties...&#125; entity Â±ûÊÄßÁöÑÊ≥®Ëß£ @NameInDb ÂèØ‰ª•Âú®Êï∞ÊçÆÂ∫ì‰∏≠‰∏∫Â±ûÊÄßÂëΩÂêç„ÄÇ Â∫îËØ•‰ΩøÁî® @Uid Ê≥®Ëß£Êù•‰ª£ÊõøÈáçÂëΩÂêçÂ±ûÊÄßÂíå entity @NameInDb ‰ªÖÊîØÊåÅÂÜÖËÅîÂ∏∏ÈáèÊù•ÊåáÂÆöÂàóÂêç„ÄÇ @Transient ‰øùËØÅÂ±ûÊÄß‰∏çË¢´ÊåÅ‰πÖÂåñÔºåtransientÔºåstatic ‰øÆÈ•∞Á¨¶‰πü‰∏ÄÊ†∑. Â±ûÊÄßÁ¥¢Âºï @Index @Index ÂΩìÂâç‰∏çÊîØÊåÅ byte[] float double Index typs(String). ObjectBox 2.0 ÂºïÂÖ•‰∫Ü index types.‰πãÂâçÂØπÊØè‰∏Ä‰∏™Á¥¢ÂºïÔºå‰ΩøÁî®Â±ûÊÄßÁöÑÂÄºÊù•ÂÆåÊàêÊü•ËØ¢„ÄÇÁé∞Âú® ObjectBox ÂèØ‰ª•‰ΩøÁî® hash Êù•ÁîüÊàê index.Áî±‰∫é String Â±ûÊÄßÊòéÊòæÊØîÊ†áÈáèÂÄºÊõ¥Âç†Á©∫Èó¥ÔºåObjectBox ÂØπ strings ‰ΩøÁî®ÈªòËÆ§ÁöÑ index type ÂÆåÊàê hash.ÂèØ‰ª•ÈíàÂØπ String Á±ªÂûãÁöÑÂ±ûÊÄßÊòéÁ°ÆÊåáÂÆö index type ‰∏∫Âü∫‰∫éÂÄºÊûÑÂª∫Á¥¢Âºï„ÄÇ 12@Index( type = IndexType.VALUE)private String name; ËØ∑Ê≥®ÊÑèÔºöÂØπ‰∫é String Á±ªÂûãÁöÑÂ±ûÊÄßÔºåÂü∫‰∫éÂÄºÁöÑÁ¥¢ÂºïÂèØËÉΩÊØîÈªòËÆ§Âü∫‰∫é hash ÁöÑÁ¥¢ÂºïÊõ¥Âç†Á©∫Èó¥,ËøôÁßçÁªìËÆ∫ÂèñÂÜ≥‰∫éËØ•ÂÄºÁöÑÈïøÂ∫¶„ÄÇ ObjectBox ÊîØÊåÅ‰ª•‰∏ãÁ¥¢ÂºïÂ±ûÊÄß: Êú™ÊåáÂÆöÊàñÈªòËÆ§: Ê†πÊçÆÂ±ûÊÄßÁöÑÁ±ªÂûãÂÜ≥ÂÆö(HASH for String,VALUE for others) VALUE: ‰ΩøÁî®Â±ûÊÄßÂÄºÁîüÊàêÁ¥¢Âºï„ÄÇ‰æãÂ¶Ç String,ÂèØËÉΩÊõ¥Âç†Á©∫Èó¥ HASH: ‰ΩøÁî®Â±ûÊÄßÂÄºÁöÑ 32 ‰Ωç hash ÁîüÊàêÁ¥¢Âºï„ÄÇÂÅ∂Â∞îÂèØËÉΩÂèëÁîü hash Á¢∞ÊíûÔºå‰ΩÜÂÆûÈôÖÊ¶ÇÁéáÂæàÂ∞è„ÄÇÈÄöÂ∏∏ÊØî HASH64 Êõ¥‰Ω≥ÔºåÂõ†‰∏∫Âç†Á©∫Èó¥Â∞è HASH64: ‰ΩøÁî®Â±ûÊÄßÂÄºÁöÑÈïø hash ÁîüÊàêÁ¥¢Âºï„ÄÇÊØî HASH Âç†Á©∫Èó¥Â§ßÔºåÊâÄ‰ª•‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰∏çÊòØÈ¶ñÈÄâ. Unique Á∫¶ÊùüÂ¶ÇÊûú unique Á∫¶ÊùüÁöÑÂ±ûÊÄßÂÄºÂÜ≤Á™ÅÔºåput() Êìç‰ΩúÂ∞ÜË¢´ÁªàÊ≠¢‰∏îÊäõÂá∫ UniqueViolationException ÁöÑÂºÇÂ∏∏.Unique Âü∫‰∫é Index,ÊâÄ‰ª•ÂèØ‰ª•ÂêåÊó∂ÁªôÂ±ûÊÄßÊ∑ªÂä† @Index Ê≥®Ëß£„ÄÇ ÂÖ≥Á≥ª]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-2-Âü∫Êú¨Êìç‰Ωú]]></title>
    <url>%2F2019%2F02%2F24%2FObjectBox%E5%85%A5%E9%97%A8-2-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[EntityÂú®‰∏Ä‰∏™Á±ª‰∏≠Ëá≥Â∞ëÈúÄË¶Å @Entity Âíå @Id ‰∏§‰∏™Ê≥®Ëß£ÊâçËÉΩÂÆö‰πâ‰∏Ä‰∏™ ObjectBox model.‰æãÂ¶Ç: 123456// User.java@Entitypublic class User &#123; @Id public long id; public String name;&#125; ÁÑ∂Âêé make Â∞±ÂèØÁîüÊàê model. | @Id ÁöÑÁ±ªÂûãÂøÖÈ°ª‰∏∫ long.| Â¶ÇÊûú entity ÂèëÁîü‰∫ÜÂæàÂ§ßÁöÑÂèòÂä®ÔºàÂ¶ÇÁßªÂä®Á±ªÊàñ‰øÆÊîπÊ≥®Ëß£Ôºâ,ÂøÖÈ°ª rebuild È°πÁõÆ‰ª•‰æø ObjectBox ÁîüÊàêÁöÑ‰ª£Á†ÅÂæóÂà∞Êõ¥Êñ∞. Ê†∏ÂøÉÁ±ª MyObjectBox: Âü∫‰∫é entity Á±ªÁîüÊàê„ÄÇÊèê‰æõ builder ÈÖçÁΩÆ BoxStore. BoxStore: ObjectBox ÁöÑÂÖ•Âè£„ÄÇÊìç‰ΩúÊï∞ÊçÆÂ∫ìÔºåÁÆ°ÁêÜ Boxes ÁöÑÂ∑•ÂÖ∑. Box: ÂØπ entity ‰øùÂ≠òÂíåÊü•ËØ¢„ÄÇÊØè‰∏Ä‰∏™ entity ÈÉΩÊúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑ BoxÔºàÁî± BoxStore Êèê‰æõ). Ê†∏ÂøÉÂàùÂßãÂåñÂÆû‰æãÂåñ BoxStore ÁöÑÊúÄÂ•ΩÊó∂Êú∫ÊòØÂú® app ÂêØÂä®Êó∂„ÄÇÊé®ËçêÂú® Application Á±ªÁöÑ onCreate ÊñπÊ≥ï‰∏≠ËøõË°å. 12345678910111213public class App extends Application &#123; private BoxStore boxStore; @Override public void onCreate() &#123; super.onCreate(); boxStore = MyObjectBox.builder().androidContext(this).build(); &#125; public BoxStore getBoxStore() &#123; return boxStore; &#125;&#125;// ÁÑ∂ÂêéÂú® app ÁîüÂëΩÂë®ÊúüÂÜÖÂ∞±ÂèØ‰ª•‰ΩøÁî®‰∫ÜnotesBox = ((App) getApplicationi()).getBoxStore().boxFor(User.class); Box Âü∫Êú¨Êìç‰Ωú put: Â≠òÂÖ•‰∏Ä‰∏™ÂØπË±°ÔºåÂèØËÉΩ‰ºöË¶ÜÁõñÂÖ∑ÊúâÁõ∏Âêå ID ÁöÑÂØπË±°„ÄÇÂç≥‰ΩøÁî® put ÊèíÂÖ•ÊàñÊõ¥Êñ∞ÂØπË±°„ÄÇËøîÂõû ID„ÄÇ get,getAll: Êèê‰æõ‰∏Ä‰∏™ÂØπË±°ÁöÑ IDÔºåÂèØÂø´ÈÄüÁöÑÈÄöËøá getËé∑ÂèñÂÆÉ„ÄÇgetAll Ëé∑ÂèñÊåáÂÆöÁöÑÊâÄÊúâÁöÑÂØπË±°„ÄÇ remove,removeAll: ‰ªé box ‰∏≠Âà†Èô§‰∏Ä‰∏™ÂØπË±°„ÄÇremoveAll Âà†Èô§ÊåáÂÆöÁöÑÊâÄÊúâÂØπË±°. count: ËøîÂõûËØ• box Â≠òÂÇ®ÁöÑÂØπË±°Êï∞Èáè. query: ËøîÂõû‰∏Ä‰∏™ query builder. Object IDs Entity ÂøÖÈ°ªÂÖ∑Êúâ‰∏Ä‰∏™Á±ªÂûã‰∏∫ long,Áî± @Id Ê≥®Ëß£Â±ûÊÄß„ÄÇÂΩìÁÑ∂ÂèØ‰ª•‰ΩøÁî®ÂèØÁ©∫ÁöÑ java.lang.LongÁ±ªÂûãÔºå‰ΩÜ‰∏çÊé®Ëçê„ÄÇÂ¶ÇÊûúÈúÄË¶Å‰ΩøÁî®Âè¶Â§ñ‰∏ÄÁßçÁ±ªÂûãÁöÑ ID(ÊúçÂä°Âô®ËøîÂõûÁöÑ String Á±ªÂûãÁöÑ UID),ÊääÂÆÉ‰Ωú‰∏∫ÊôÆÈÄöÂ±ûÊÄßÂç≥ÂèØÔºåÁÑ∂ÂêéÂèØ‰ª•ÈÄöËøáÊ≠§ ID Êü•ËØ¢. 123456@Entity class StringIdEntity &#123; @Id priavte long id; private String uid;&#125;StringIdEntity entity = box.query().equal(StringIdEntity_.uid,uid).findUnique(); ÊåáÂÆö IDObjectBox ÈªòËÆ§‰ºö‰∏∫Êñ∞ÂØπË±°ÊåáÂÆö IDs.ID Ëá™Â¢û. 12345User user = new User();// user.id == 0box.put(user);// user.id != 0long id = user.id Â¶ÇÊûúÊèíÂÖ•ÁöÑÂØπË±°ÁöÑ ID ÊØî box ÈáåÁöÑ ID ÊúÄÂ§ßÂÄºËøòÂ§ßÔºåObjectBox Â∞ÜÊäõÂá∫ÈîôËØØ. ‰øùÁïô Object IDsObject IDs ‰∏çËÉΩÔºö‚Äì 0,null(‰ΩøÁî® java.lang.Long)„ÄÇ‚Äì 0xFFFFFFFFFFFFFFFFÔºàjava ‰∏≠ÁöÑ -1Ôºâ:ÂÜÖÈÉ®‰øùÁïô ‰∫ãÂä° put ËøêË°åÂú®ÈöêÂºè‰∫ãÂä°‰∏≠ ‰ºòÂÖà‰ΩøÁî® put ÊâπÈáèÊìç‰ΩúÂàóË°® Ôºàput(entities)Ôºâ Â¶ÇÊûúÂú®Âæ™ÁéØ‰∏≠Êìç‰ΩúÂ§ßÈáèÊï∞ÊçÆÔºåËÄÉËôëÊòéÁ°Æ‰ΩøÁî®‰∫ãÂä°ÔºåÂ¶ÇrunInTx()]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ObjectBoxÂÖ•Èó®-1-ÁÆÄ‰ªã]]></title>
    <url>%2F2019%2F02%2F24%2FObjectBox%E5%85%A5%E9%97%A8-1-%E7%AE%80%E4%BB%8B%2F</url>
    <content type="text"><![CDATA[ÂÖ≥‰∫éObjectBox ÂÆö‰ΩçÊòØ: ÈíàÂØπÁßªÂä®Á´ØÂíå IoT Ë∂ÖÂø´ÁöÑ (superfast edge database) Èù¢ÂêëÂØπË±°ÁöÑÊï∞ÊçÆÂ∫ì .‰∏∫Â∞èÂûãËÆæÂ§áÊèê‰æõ‰∫ÜËæπÁºòËÆ°ÁÆóËÉΩÂäõÔºå‰ΩøÂæóÊï∞ÊçÆÂèØ‰ª•Âø´ÈÄüÈ´òÊïàÂú∞Âú®Êú¨Âú∞Â≠òÂÇ®„ÄÅÂ§ÑÁêÜ„ÄÅÂÆâÂÖ®ÁÆ°ÁêÜ.ObjectBox Â∞è‰∫é 1MB,ÊúÄÈÄÇÂêàÁßªÂä® APP„ÄÅÂ∞èÂûã IoT ËÆæÂ§áÂèäË∑ØÁî±„ÄÇÂπ∂‰∏î ObjectBox ‰πüÊòØÁ¨¨‰∏Ä‰∏™Âú®ËæπÁºòËÆæÂ§á‰∏äÂÖºÂÆπ ACID ÁöÑÈ´òÊÄßËÉΩÁöÑ NoSQL Êï∞ÊçÆÂ∫ì.ÊâÄÊúâÁöÑ‰∫ßÂìÅÈÉΩÊòØÂü∫‰∫éÂ∑•Á®ãÂ∏àÊÄùÁª¥ÂºÄÂèëÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•‰ΩøÁî®ÊúÄÂ∞ëÁöÑ‰ª£Á†ÅÂéªÂÆûÁé∞ÊÉ≥Ë¶ÅÁöÑÂäüËÉΩ„ÄÇ ‰ºòÁÇπ ÊØîÂêåÁ±ªÁ´üÂìÅÂø´ 10 ÂÄç‰ª•‰∏ä„ÄÇBenchMark Ë∑®Âπ≥Âè∞„ÄÇÊîØÊåÅ Linux„ÄÅWindows„ÄÅMac/iOS„ÄÅAndroid„ÄÅRaspberry Pi„ÄÅARM Á≠âÂµåÂÖ•ÂºèËÆæÂ§áÂíåÂÆπÂô®„ÄÇ Â∞è‰∫é 1MB,ÁâπÂà´ÈíàÂØπÂ∞èÂûãËÆæÂ§áËÆæËÆ°Âíå‰ºòÂåñ„ÄÇ Êòì‰ΩøÁî®„ÄÇ ÊîØÊåÅ reactive. Êó†ÁºùÁªìÂêà greenDAO.(Âêå‰∏ÄÂÆ∂ÂÖ¨Âè∏Âá∫ÂìÅ) Êõ¥Â•ΩÂú∞ÊîØÊåÅÂÖ≥Á≥ªÂûãÊï∞ÊçÆ. Êèê‰æõ‰∫ÜÊîπÂèòËøΩË∏™(change tracking)ÔºåÁ∫ßËÅîÊ∑ªÂä†(cascading puts)ÔºåÁÅµÊ¥ªÁöÑÂä†ËΩΩÁ≠ñÁï•(eager,lazy) Êó†ÈúÄÊéåÊè° SQL:ObjectBox ËÆæËÆ°ÁÆÄÂçïÔºå‰ΩøÁî®Êñπ‰æøÔºå‰∏çÈúÄË¶ÅÊéåÊè° SQL Âç≥ÂèØ‰∏äÊâã. ÊîØÊåÅ kotlin: ÂåÖÊã¨ data class. ‰ΩøÁî®Android(Java)123456789101112// root ÁõÆÂΩï build.gradlebuildscript &#123; ext.objectboxVersion = '2.3.3' repositories &#123; jcenter() &#125; dependencies &#123; // Android Gradle plugin ÊúÄ‰ΩéÁâàÊú¨‰∏∫ 3.0.0 classpath 'com.android.tools.build:gradle:3.3.1' classpath "io.objectbox:objectbox-gradle-plugin:$objectboxVersion" &#125;&#125; 123// app ÊàñÂÖ∂‰ªñ module build.gradleapply plugin: 'com.android.application'apply plugin: 'io.objectbox' ÊîæÂú®ÊúÄ‰∏ãÈù¢ Android(Kotlin)12345// app ÊàñÂÖ∂‰ªñ module build.gradleapply plugin: 'com.android.application'apply plugin: 'kotlin-android'apply plugin: 'kotlin-kapt' Â¶ÇÊûú‰ΩøÁî® kotlin-android Êèí‰ª∂ÔºåÂøÖÈ°ªÂä† kotlin -kapt Êèí‰ª∂apply plugin: 'io.objectbox' ÊîæÂú®ÊúÄ‰∏ãÈù¢ Sync gradle Âç≥ÂèØËá™Âä®Ê∑ªÂä† ObjectBox ‰æùËµñ. ÈÖçÁΩÆ1„ÄÅÈ¶ñÂÖàÊ∑ªÂä† ObjectBox Êèí‰ª∂.2„ÄÅÂ¶ÇÊûú ObjectBox Êèí‰ª∂Ê≤°ÊúâËá™Âä®Ê∑ªÂä†‰æùËµñÂ∫ìÂíåÊ≥®Ëß£Â§ÑÁêÜÂô®ÔºåËØ∑ÊâãÂä®Ê∑ªÂä†‰æùËµñ„ÄÇ 123456// Android(Java)// /app/build.gradledependencies &#123; compile "io.objectbox:objectbox-androoid:$objectboxVersion" annotationProcessor "io.objectbox:objectbox-processor:$objectboxVersion"&#125; 12345678// Android(kotlin)// /app/build.gradledependencies &#123; compile "io.objectbox:objectbox-android:$objectboxVersion" kapt "io.objectbox:objectbox-processor:$objectboxVersioni" // ÈíàÂØπ kotlin ÁöÑÊâ©Â±ïÂáΩÊï∞(ÂèØÈÄâ) compile "io.objectbox:objectbox-kotlin:$objectboxVersion"&#125; 3„ÄÅÊîπÂèò Model Êñá‰ª∂ÁöÑË∑ØÂæÑ ObjectBox Model Êñá‰ª∂ÈªòËÆ§‰øùÂ≠òÂú® module-name/objectbox-models/default.json„ÄÇ 1234567891011// Android(Java)// /app/build.gradleandroid &#123; defaultConfig &#123; javaCompileOptions &#123; annotationProcessorOptions &#123; arguments = ["objectbox.modelPath":"$projectDir/schemas/objectbox.json".toString()] &#125; &#125; &#125;&#125; 1234567// Android(Kotlin)// /app/build.gradlekapt &#123; arguments &#123; arg("objectbox.modelPath":"$projectDir/schemas/objectbox.json") &#125;&#125; 4„ÄÅÊîπÂèò MyObjectBox ÁöÑÂåÖÂêç MyObjectBox Á±ªÁöÑÂåÖÂêçÈªòËÆ§Âíå entitiy Á±ªÁöÑÂåÖÂêçÊàñÂÖ∂‰∏ä‰∏ÄÁ∫ßÊä•Âêç‰∏ÄËá¥„ÄÇ 1234567891011// Android(Java)// /app/build.gradleandroid &#123; defaultConfig &#123; javaCompileOptions &#123; annotationProcessorOptions &#123; arguments = ["objectbox.myObjectBoxPackage":"com.example.custom"] &#125; &#125; &#125;&#125; 1234567// Android(Kotlin)// /app/build.gradlekapt &#123; arguments &#123; arg("objectbox.myObjectBoxPackage", "com.example.custom") &#125;&#125; 5„ÄÅÂºÄÂêØ Debug Ê®°Âºè Âú® /app/build.gradle ‰∏≠Ê∑ªÂä†ÂøÖË¶ÅÁöÑÈÄâÈ°πÂêéÔºåËøêË°å ./gradlew --info Âç≥ÂèØÊü•Áúã debug ËæìÂá∫ 1234567891011// Android(Java)// /app/build.gradleandroid &#123; defaultConfig &#123; javaCompileOptions &#123; annotationProcessorOptions &#123; arguments = ['objectbox.debug' : 'true'] &#125; &#125; &#125;&#125; 1234567// Android(Kotlin)// /app/build.gradlekapt &#123; arguments &#123; arg("objectbox.debug", true) &#125;&#125; 6„ÄÅÂºÄÂêØ DaoCompat ÂÖºÂÆπÊ®°Âºè ‰ªé greenDAO ËøÅÁßªËøáÊù•ÔºåÁîüÊàêÂíå greenDAO Áõ∏‰ººÁöÑ API,‰Ωø ObjectBox ÁúãËµ∑Êù•Â∞±ÂÉè SQLite ‰∏ÄÊ†∑„ÄÇ 1234// /app[module]/build.gradledepdendencies &#123; compile "org.greenrobot:objectbox-daocompat:1.10"&#125; ÁÑ∂ÂêéÂºÄÂêØ DaoCompat Ê®°Âºè 1234567891011// Android(Java)// /app[module]/build.gradleandroid &#123; defaultConfig &#123; javaCOmpileOptions &#123; annotationProcessorOptions &#123; arguments = ['objectbox.daoCompat':'true'] &#125; &#125; &#125;&#125; 1234567// Android(Kotlin)// /app[module]/build.gradlekapt &#123; arguments &#123; arg("objectbox.daoCompat":true) &#125;&#125; Â¶ÇÊûú‰Ω†ËÆ°Âàí‰ªé greenDAO ËøÅÁßªÂà∞ ObjectBox,ÈÇ£‰πà‰Ω†ÂèØËÉΩ‰ºö‰øùÁïôÂéüÊù•ÁöÑ greenDAO entity Á±ªÔºàÂ§çÂà∂Ëøô‰∫õÁ±ªÂà∞Âè¶Â§ñÁöÑÂåÖ‰∏≠ÔºâÁÑ∂ÂêéÊåâÂ¶Ç‰∏ã‰øÆÊîπ„ÄÇ È¶ñÂÖàÊîπÂèòÊ≥®Ëß£„ÄÇËØ∑Ê≥®ÊÑèÔºö‰∏çÊòØÊâÄÊúâÁöÑ greenDAO Ê≥®Ëß£ÈÉΩÊîØÊåÅÊó†ÁºùËøÅÁßªÂà∞ ObjectBox,ÊîØÊåÅÁöÑÂ¶Ç‰∏ãÔºö 1234567// greenDAOimport org.greenrobot.greendao.annotation.Entity;import org.greenrobot.greendao.annotation...// ObjectBoximport io.objectbox.annotation.Entity;import io.objectbox.annotation... ObjectBox ÂΩìÂâç‰∏çÊîØÊåÅ unique indexes,naming indexes,ÊàñËÄÖÂú®Â§ö‰∏™Â±ûÊÄßÈó¥ indexes. 1234567// greenDAO@Entity(indexes = ...)@Index(name = "idx1", unique = true) private String name;@Unqiue private String name;// ObjectBox@Index private String name; Ëá™ÂÆö‰πâÁ±ªÂûã„ÄÇ‰øÆÊîπÁà∂Á±ª,ÂΩìÁÑ∂‰πüÂèØÂêåÊó∂ÁªßÊâøÔºåËøôÊ†∑ËØ•Ëá™ÂÆö‰πâÁ±ªÂûãÂ∞±ÂèØÂêåÊó∂Âú® greenDAO Âíå ObjectBox Èó¥‰ΩøÁî® 12345// greenDAOimport org.greenrobot.greendao.converter.PropertyConverter;// ObjectBoximport io.objectbox.converter.PropertyConverter; ‰øÆÊîπ @Convert Ê≥®Ëß£ÈáåÁöÑ columnType Êîπ‰∏∫ dbType 12345// greenDAO@Convert(converter = NoteTypeConverter.class, columnType = String.class)// ObjectBox@Convert(converter = NoteTypeConverter.class, dbType = String.class) ÂÖ≥Á≥ª„ÄÇObjectBox ‰ΩøÁî® ToOne Âíå ToManyÁ±ªÂûãÊõø‰ª£ greenDAO ÁöÑ @ToOne Âíå @ToMany Ê≥®Ëß£„ÄÇ ‰ΩøÁî® BoxStore.‰øÆÊîπÂÆå entity ÂêéÔºåËÆæÁΩÆ BoxStore ÂàõÂª∫ DaoSession. 123456789// ÈÄöÂ∏∏Âú® Application Á±ª‰∏≠boxStore = MyObjectBox.builder().androidContext(this).build();daoCompatSession = new DaoSession(boxStore);// Âú®ËøÅÁßªÂÆåÊàêÂêéÔºå‰Ω†ÂèØËÉΩÊÉ≥ÁßªÈô§Ëøô‰∫õËøÅÁßªÊìç‰Ωú„ÄÇ// ÈÇ£‰πàÈÄöËøá greenDAO session Ëé∑Âèñ entities,Êää‰ªñ‰ª¨ËΩ¨‰∏∫ ObjectBox entities,// ÁÑ∂Âêé‰ΩøÁî® DaoCompat session ÊèíÂÖ•„ÄÇList&lt;com.example.app.daos.greendao.Note&gt; notes = daoSession.getNoteDao().loadAll();List&lt;Note&gt; convertedNotes = convertToObjectBoxNotes(notes);daoCompatSession.getNoteDao().insertInTx(convertedNotes); ÈªòËÆ§Ê≤°ÊúâËÆæÁΩÆ ID (Âç≥ id == 0),ObjectBox ‰ºö‰∏∫ÊèíÂÖ•ÁöÑÊï∞ÊçÆÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑ ID.Â¶ÇÊûúÊÉ≥‰øùÁïôÂéüÊù•ÁöÑ ID,ËØ∑‰øÆÊîπ @Id(assignable = true) ‰ΩøÁî® DaoCompat DaoSessionÂú®‰ΩøÁî®Êñ∞ compat session ÊõøÊç¢ÂéüÊù•ÁöÑ API ÂêéÔºåÂèØ‰ª•ÈÄöËøáÂú® Application Á±ª‰∏≠ÁöÑ‰∏Ä‰∏™ÊñπÊ≥ïËøîÂõû DaoSession 123456public DaoSession getDaoSession() &#123; // greenDAO // return daoSession; // ObjectBox return daoCompatSession;&#125; Ë°®Èù¢‰∏ä compat DaoSession ÊòØ greenDAO DaoSession ÁöÑÊõø‰ª£ÂìÅÔºåÂÖ∂ÂÆûÂÆÉÂÜÖÈÉ®ÊòØ‰ΩøÁî® BoxStore ‰ª£Êõø‰∫Ü greenDAO Êï∞ÊçÆÂ∫ì.Â¶ÇÊûúËøò‰ΩøÁî®‰∫Ü greenDAO ÁöÑÈ¢ùÂ§ñÁâπÊÄßÔºåÊØîÂ¶Ç queries,ÈÇ£‰πàËøòÈúÄÂ¶Ç‰∏ã‰øÆÊîπ: 123456// greenDAOimport org.greenrobot.greendao.query.Query;import org.greenrobot.greendao...// ObjectBoximport org.greenrobot.daocompat.query.Query;import org.greenrobot.daocompat... QueriesDaoCompat ÊîØÊåÅ‰ª•‰∏ãÁöÑ Query ÂäüËÉΩ:‚Äì remove() Êõø‰ª£ DeleteQuery‚Äì count() Êõø‰ª£ CountQuery‚Äì ‰∏çÊîØÊåÅ CursorQuery DaoCompat Âíå greenDAO ÁöÑ‰∏çÂêå‚Äì ‰∏çÊîØÊåÅ NotNull‚Äì ‰∏çÊîØÊåÅ Joins Âíå ÂéüÁîü SQL Êü•ËØ¢.‚Äì ‰∏çÊîØÊåÅÂºÇÊ≠• sessions: startAsyncSession()‚Äì ‰∏çÊîØÊåÅÂä†ÂØÜ‚Äì ‰ªÖÊîØÊåÅÁÆÄÂçïÁöÑ AbstractDaoTest Âíå AbstractDaoBasicTest]]></content>
      <tags>
        <tag>ObjectBox</tag>
        <tag>Êï∞ÊçÆÂ∫ì</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[git Á¨îËÆ∞]]></title>
    <url>%2F2018%2F03%2F17%2Fgit-%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[config 1234567891011121314151617181920212223242526272829303132333435363738# ‰øÆÊîπÈÖçÁΩÆgit config --local # ÂØπÊüê‰∏™‰ªìÂ∫ìÊúâÊïàgit config --global # ÂØπÂΩìÂâçÁî®Êà∑ÊâÄÊúâ‰ªìÂ∫ìÊúâÊïàgit config --system # ÂØπÁ≥ªÁªüÊâÄÊúâÁôªÂΩïÁî®Êà∑ÊúâÊïà# Êü•ÁúãÈÖçÁΩÆgit config --list --localgit config --list --globalgit config --list --system# ÊâìÂºÄÁºñËæëÂô®‰øÆÊîπconfiggit config -e # ‰ªÖÂØπÂΩìÂâç‰ªìÂ∫ìÊúâÊïà# ÂèòÊõ¥Êñá‰ª∂Âêçgit mv readme readme.md # ÈÅøÂÖç mv x y -&gt; git add -&gt; git rmgit log [ÂàÜÊîØ] --oneline # ‰∏ÄË°åÊòæÁ§∫ -n4 # ÊåáÂÆöÊúÄÊñ∞ÁöÑÂá†Ê¨°Êèê‰∫§ --all # ÊâÄÊúâÂàÜÊîØÁöÑÊèê‰∫§ --graph # ÂõæÂΩ¢ÂåñÊòæÁ§∫# ÊâìÂºÄÂÜÖÁΩÆÂ∏ÆÂä©ÁΩëÈ°µ.git help --web [log]# guigitk --allgit branch -av# Âú® ./git/refs/heads/xxx ‰∏≠Êü•Áúã‰ø°ÊÅØgit cat-file -t master # ËøîÂõû git object model Á±ªÂûã: blog, tree, commit, tag -p # ÊòæÁ§∫ÊâÄÊúâÂÜÖÂÆπ# Âà†Èô§ÂàÜÊîØgit branch -D [fixup]# ÂèòÂü∫git rebase -i# ÊöÇÂ≠òÂå∫ÂíåÊúÄËøë‰∏ÄÊ¨°Êèê‰∫§ÁöÑÂå∫Âà´git diff --cached# Â∞ÜÊöÇÂ≠òÂå∫ÁöÑÂÜÖÂÆπ‰∏¢ÂºÉgit reset HEAD -- &lt;file&gt;# Â∞ÜÊöÇÂ≠òÂå∫ÁöÑÂÜÖÂÆπÊÅ¢Â§çÂà∞Êú¨Âú∞git checkout -- &lt;file&gt;]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
</search>
